<ПравилаОбмена>
	<ВерсияФормата РежимСовместимости="РежимСовместимостиСБСП20">2.01</ВерсияФормата>
	<Ид>0efd38db-c7eb-48a3-a9b7-9d8f846794d3    </Ид>
	<Наименование>УПП --&gt; КЭДО</Наименование>
	<ДатаВремяСоздания>2018-12-29T15:59:53</ДатаВремяСоздания>
	<Источник ВерсияПлатформы="8.0" ВерсияКонфигурации="1.3.112.4" СинонимКонфигурации="Управление производственным предприятием, редакция 1.3">УправлениеПроизводственнымПредприятием</Источник>
	<Приемник ВерсияПлатформы="8.0" ВерсияКонфигурации="2.5.1.21" СинонимКонфигурации="Клиент ЭДО (базовая), редакция 2.5">КлиентЭДОБазовая</Приемник>
	<ПередЗагрузкойДанных>Параметры.Вставить("ТекущийПользователь", Пользователи.ТекущийПользователь());
</ПередЗагрузкойДанных>
	<ПередОтправкойИнформацииОбУдалении>Отказ = Истина;

Если ТипЗнч(Ссылка) = Тип("ДокументСсылка.СчетНаОплатуПоставщика") Тогда

	ЗаписатьВФайлУдалениеОбъекта(Ссылка, "ДокументСсылка.СчетНаОплатуПоставщика", "ДокументСсылка.СчетНаОплатуПоставщика");
	
ИначеЕсли ТипЗнч(Ссылка) = Тип("ДокументСсылка.ЗаказПокупателя") Тогда

	ЗаписатьВФайлУдалениеОбъекта(Ссылка, "ДокументСсылка.ЗаказПокупателя", "ДокументСсылка.ЗаказПокупателя");
	
ИначеЕсли ТипЗнч(Ссылка) = Тип("ДокументСсылка.РеализацияТоваровУслуг") Тогда
	
	ЗаписатьВФайлУдалениеОбъекта(Ссылка, "ДокументСсылка.РеализацияТоваровУслуг", "ДокументСсылка.РеализацияТоваровУслуг");
	
ИначеЕсли ТипЗнч(Ссылка) = Тип("ДокументСсылка.КорректировкаРеализации") Тогда
	
	ЗаписатьВФайлУдалениеОбъекта(Ссылка, "ДокументСсылка.РеализацияТоваровУслуг", "ДокументСсылка.КорректировкаРеализации");
	
ИначеЕсли ТипЗнч(Ссылка) = Тип("ДокументСсылка.АктОбОказанииПроизводственныхУслуг") Тогда
	
	ЗаписатьВФайлУдалениеОбъекта(Ссылка, "ДокументСсылка.РеализацияТоваровУслуг", "ДокументСсылка.АктОбОказанииПроизводственныхУслуг");
	
ИначеЕсли ТипЗнч(Ссылка) = Тип("ДокументСсылка.СчетФактураВыданный") Тогда
	
	ЗаписатьВФайлУдалениеОбъекта(Ссылка, "ДокументСсылка.СчетФактураВыданный", "ДокументСсылка.СчетФактураВыданный");
	
КонецЕсли;</ПередОтправкойИнформацииОбУдалении>
	<ПриПолученииИнформацииОбУдалении>МетаданныеОбъекта = Объект.Метаданные();

Если Метаданные.Справочники.Содержит(МетаданныеОбъекта) Тогда
	
	Отказ  = Истина;
	
	УстановитьПометкуУдаленияУОбъекта(Объект, Истина, "Справочник");
	
ИначеЕсли Метаданные.Документы.Содержит(МетаданныеОбъекта) Тогда
	
	Отказ  = Истина;
	
	Если Объект.Проведен Тогда
		
		ОтменитьПроведениеОбъектаВИБ(Объект, ТипЗнч(Объект));
		
	КонецЕсли;
	
	УстановитьПометкуУдаленияУОбъекта(Объект, Истина, "Документ");
	
КонецЕсли;</ПриПолученииИнформацииОбУдалении>
	<Параметры/>
	<Обработки/>
	<ПравилаКонвертацииОбъектов>
		<Группа>
			<Код>Перечисления</Код>
			<Наименование>Перечисления                                      </Наименование>
			<Порядок>50</Порядок>
			<Правило>
				<Код>СтавкиНДС</Код>
				<Наименование>Перечисление: Ставки НДС</Наименование>
				<Порядок>50</Порядок>
				<Источник>ПеречислениеСсылка.СтавкиНДС</Источник>
				<Приемник>ПеречислениеСсылка.СтавкиНДС</Приемник>
				<Свойства/>
				<Значения>
					<Значение>
						<Код>1</Код>
						<Наименование>БезНДС --&gt; БезНДС</Наименование>
						<Порядок>50</Порядок>
						<Источник>БезНДС</Источник>
						<Приемник>БезНДС</Приемник>
					</Значение>
					<Значение>
						<Код>2</Код>
						<Наименование>НДС0 --&gt; НДС0</Наименование>
						<Порядок>100</Порядок>
						<Источник>НДС0</Источник>
						<Приемник>НДС0</Приемник>
					</Значение>
					<Значение>
						<Код>3</Код>
						<Наименование>НДС10 --&gt; НДС10</Наименование>
						<Порядок>150</Порядок>
						<Источник>НДС10</Источник>
						<Приемник>НДС10</Приемник>
					</Значение>
					<Значение>
						<Код>4</Код>
						<Наименование>НДС10_110 --&gt; НДС10_110</Наименование>
						<Порядок>200</Порядок>
						<Источник>НДС10_110</Источник>
						<Приемник>НДС10_110</Приемник>
					</Значение>
					<Значение>
						<Код>5</Код>
						<Наименование>НДС18 --&gt; НДС18</Наименование>
						<Порядок>250</Порядок>
						<Источник>НДС18</Источник>
						<Приемник>НДС18</Приемник>
					</Значение>
					<Значение>
						<Код>6</Код>
						<Наименование>НДС18_118 --&gt; НДС18_118</Наименование>
						<Порядок>300</Порядок>
						<Источник>НДС18_118</Источник>
						<Приемник>НДС18_118</Приемник>
					</Значение>
					<Значение>
						<Код>7</Код>
						<Наименование>НДС20 --&gt;</Наименование>
						<Порядок>350</Порядок>
						<Источник>НДС20</Источник>
						<Приемник>НДС20</Приемник>
					</Значение>
					<Значение>
						<Код>8</Код>
						<Наименование>НДС20_120 --&gt;</Наименование>
						<Порядок>400</Порядок>
						<Источник>НДС20_120</Источник>
						<Приемник>НДС20_120</Приемник>
					</Значение>
				</Значения>
			</Правило>
			<Правило>
				<Код>ТипыКонтактнойИнформации</Код>
				<Наименование>Перечисление: Типы контактной информации</Наименование>
				<Порядок>100</Порядок>
				<Источник>ПеречислениеСсылка.ТипыКонтактнойИнформации</Источник>
				<Приемник>ПеречислениеСсылка.ТипыКонтактнойИнформации</Приемник>
				<Свойства/>
				<Значения>
					<Значение>
						<Код>1</Код>
						<Наименование>Адрес --&gt; Адрес</Наименование>
						<Порядок>50</Порядок>
						<Источник>Адрес</Источник>
						<Приемник>Адрес</Приемник>
					</Значение>
					<Значение>
						<Код>2</Код>
						<Наименование>АдресЭлектроннойПочты --&gt; АдресЭлектроннойПочты</Наименование>
						<Порядок>100</Порядок>
						<Источник>АдресЭлектроннойПочты</Источник>
						<Приемник>АдресЭлектроннойПочты</Приемник>
					</Значение>
					<Значение>
						<Код>3</Код>
						<Наименование>ВебСтраница --&gt; ВебСтраница</Наименование>
						<Порядок>150</Порядок>
						<Источник>ВебСтраница</Источник>
						<Приемник>ВебСтраница</Приемник>
					</Значение>
					<Значение>
						<Код>4</Код>
						<Наименование>Другое --&gt; Другое</Наименование>
						<Порядок>200</Порядок>
						<Источник>Другое</Источник>
						<Приемник>Другое</Приемник>
					</Значение>
					<Значение>
						<Код>5</Код>
						<Наименование>Телефон --&gt; Телефон</Наименование>
						<Порядок>250</Порядок>
						<Источник>Телефон</Источник>
						<Приемник>Телефон</Приемник>
					</Значение>
				</Значения>
			</Правило>
			<Правило>
				<Код>ТипыНоменклатуры</Код>
				<Наименование>Перечисление: Типы номенклатуры</Наименование>
				<Порядок>150</Порядок>
				<Источник>ПеречислениеСсылка.ТипыНоменклатуры</Источник>
				<Приемник>ПеречислениеСсылка.ТипыНоменклатуры</Приемник>
				<Свойства/>
				<Значения>
					<Значение>
						<Код>1</Код>
						<Наименование>Товар --&gt; Товар</Наименование>
						<Порядок>50</Порядок>
						<Источник>Товар</Источник>
						<Приемник>Товар</Приемник>
					</Значение>
					<Значение>
						<Код>2</Код>
						<Наименование>Услуга --&gt; Услуга</Наименование>
						<Порядок>100</Порядок>
						<Источник>Услуга</Источник>
						<Приемник>Услуга</Приемник>
					</Значение>
				</Значения>
			</Правило>
			<Правило>
				<Код>ЮрФизЛицо</Код>
				<Наименование>Перечисление: Юр/Физлицо</Наименование>
				<Порядок>200</Порядок>
				<Источник>ПеречислениеСсылка.ЮрФизЛицо</Источник>
				<Приемник>ПеречислениеСсылка.ЮрФизЛицо</Приемник>
				<Свойства/>
				<Значения>
					<Значение>
						<Код>1</Код>
						<Наименование>ФизЛицо --&gt; ФизЛицо</Наименование>
						<Порядок>50</Порядок>
						<Источник>ФизЛицо</Источник>
						<Приемник>ИндивидуальныйПредприниматель</Приемник>
					</Значение>
					<Значение>
						<Код>2</Код>
						<Наименование>ЮрЛицо --&gt; ЮрЛицо</Наименование>
						<Порядок>100</Порядок>
						<Источник>ЮрЛицо</Источник>
						<Приемник>ЮрЛицо</Приемник>
					</Значение>
				</Значения>
			</Правило>
			<Правило>
				<Код>ВидыДоговоровКонтрагентов</Код>
				<Наименование>Перечисление: Виды договоров контрагентов</Наименование>
				<Порядок>250</Порядок>
				<Источник>ПеречислениеСсылка.ВидыДоговоровКонтрагентов</Источник>
				<Приемник>ПеречислениеСсылка.ВидыДоговоровКонтрагентов</Приемник>
				<Свойства/>
				<Значения>
					<Значение>
						<Код>2</Код>
						<Наименование>СКомиссионером --&gt; СКомиссионером</Наименование>
						<Порядок>50</Порядок>
						<Источник>СКомиссионером</Источник>
						<Приемник>СКомиссионером</Приемник>
					</Значение>
					<Значение>
						<Код>3</Код>
						<Наименование>СКомитентом --&gt; СКомитентом</Наименование>
						<Порядок>100</Порядок>
						<Источник>СКомитентом</Источник>
						<Приемник>СКомитентом</Приемник>
					</Значение>
					<Значение>
						<Код>4</Код>
						<Наименование>СПокупателем --&gt; СПокупателем</Наименование>
						<Порядок>150</Порядок>
						<Источник>СПокупателем</Источник>
						<Приемник>СПокупателем</Приемник>
					</Значение>
					<Значение>
						<Код>5</Код>
						<Наименование>СПоставщиком --&gt; СПоставщиком</Наименование>
						<Порядок>200</Порядок>
						<Источник>СПоставщиком</Источник>
						<Приемник>СПоставщиком</Приемник>
					</Значение>
					<Значение>
						<Код>1</Код>
						<Наименование>Прочее --&gt; Прочее</Наименование>
						<Порядок>250</Порядок>
						<Источник>Прочее</Источник>
						<Приемник>Прочее</Приемник>
					</Значение>
				</Значения>
			</Правило>
		</Группа>
		<Группа>
			<Код>Справочники</Код>
			<Наименование>Справочники                                       </Наименование>
			<Порядок>100</Порядок>
			<Правило>
				<Код>Валюты</Код>
				<Наименование>Справочник: Валюты</Наименование>
				<Порядок>50</Порядок>
				<ПоследовательностьПолейПоиска>СтрокаИменСвойствПоиска = "Код";</ПоследовательностьПолейПоиска>
				<СинхронизироватьПоИдентификатору>true</СинхронизироватьПоИдентификатору>
				<ПродолжитьПоискПоПолямПоискаЕслиПоИдентификаторуНеНашли>true</ПродолжитьПоискПоПолямПоискаЕслиПоИдентификаторуНеНашли>
				<Источник>СправочникСсылка.Валюты</Источник>
				<Приемник>СправочникСсылка.Валюты</Приемник>
				<Свойства>
					<Свойство Поиск="true">
						<Код>2</Код>
						<Наименование>Код --&gt; Код</Наименование>
						<Порядок>50</Порядок>
						<Источник Имя="Код" Вид="Свойство" Тип="Строка"/>
						<Приемник Имя="Код" Вид="Свойство" Тип="Строка"/>
					</Свойство>
					<Свойство>
						<Код>3</Код>
						<Наименование>Наименование --&gt; Наименование</Наименование>
						<Порядок>100</Порядок>
						<Источник Имя="Наименование" Вид="Свойство" Тип="Строка"/>
						<Приемник Имя="Наименование" Вид="Свойство" Тип="Строка"/>
					</Свойство>
					<Свойство>
						<Код>1</Код>
						<Наименование>НаименованиеПолное --&gt; НаименованиеПолное</Наименование>
						<Порядок>150</Порядок>
						<Источник Имя="НаименованиеПолное" Вид="Реквизит" Тип="Строка"/>
						<Приемник Имя="НаименованиеПолное" Вид="Реквизит" Тип="Строка"/>
					</Свойство>
					<Свойство>
						<Код>4</Код>
						<Наименование>ПометкаУдаления --&gt; ПометкаУдаления</Наименование>
						<Порядок>200</Порядок>
						<Источник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
						<Приемник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
					</Свойство>
				</Свойства>
				<Значения/>
			</Правило>
			<Правило>
				<Код>СтраныМира</Код>
				<Наименование>Справочник: Классификатор стран мира</Наименование>
				<Порядок>100</Порядок>
				<ПоследовательностьПолейПоиска>Если НомерВариантаПоиска = 1 Тогда
	КодСтраны = СвойстваПоиска.Получить("Код");
	Если ЗначениеЗаполнено(КодСтраны) Тогда
		СсылкаНаОбъект = УправлениеКонтактнойИнформацией.СтранаМираПоКодуИлиНаименованию(КодСтраны);
	КонецЕсли;
Иначе
	ПрекратитьПоиск = Истина;
КонецЕсли;</ПоследовательностьПолейПоиска>
				<НеЗамещать>true</НеЗамещать>
				<СинхронизироватьПоИдентификатору>true</СинхронизироватьПоИдентификатору>
				<ПродолжитьПоискПоПолямПоискаЕслиПоИдентификаторуНеНашли>true</ПродолжитьПоискПоПолямПоискаЕслиПоИдентификаторуНеНашли>
				<НеСоздаватьЕслиНеНайден>true</НеСоздаватьЕслиНеНайден>
				<Источник>СправочникСсылка.КлассификаторСтранМира</Источник>
				<Приемник>СправочникСсылка.СтраныМира</Приемник>
				<Свойства>
					<Свойство Поиск="true">
						<Код>1</Код>
						<Наименование>Код --&gt; Код</Наименование>
						<Порядок>50</Порядок>
						<Источник Имя="Код" Вид="Свойство" Тип="Строка"/>
						<Приемник Имя="Код" Вид="Свойство" Тип="Строка"/>
					</Свойство>
				</Свойства>
				<Значения/>
			</Правило>
			<Правило>
				<Код>ВидыКонтактнойИнформации</Код>
				<Наименование>Справочник: Виды контактной информации</Наименование>
				<Порядок>150</Порядок>
				<НеЗамещать>true</НеЗамещать>
				<СинхронизироватьПоИдентификатору>true</СинхронизироватьПоИдентификатору>
				<НеСоздаватьЕслиНеНайден>true</НеСоздаватьЕслиНеНайден>
				<Источник>СправочникСсылка.ВидыКонтактнойИнформации</Источник>
				<Приемник>СправочникСсылка.ВидыКонтактнойИнформации</Приемник>
				<Свойства>
					<Свойство Поиск="true">
						<Код>2</Код>
						<Наименование>Наименование --&gt; Наименование</Наименование>
						<Порядок>50</Порядок>
						<Источник Имя="Наименование" Вид="Свойство" Тип="Строка"/>
						<Приемник Имя="Наименование" Вид="Свойство" Тип="Строка"/>
					</Свойство>
					<Свойство Поиск="true">
						<Код>4</Код>
						<Наименование>--&gt; Родитель</Наименование>
						<Порядок>100</Порядок>
						<Источник Имя="" Вид=""/>
						<Приемник Имя="Родитель" Вид="Свойство" Тип="СправочникСсылка.ВидыКонтактнойИнформации"/>
					</Свойство>
					<Свойство Поиск="true" Обязательное="true">
						<Код>5</Код>
						<Наименование>--&gt; ЭтоГруппа</Наименование>
						<Порядок>150</Порядок>
						<Источник Имя="" Вид=""/>
						<Приемник Имя="ЭтоГруппа" Вид="Свойство" Тип="Булево"/>
					</Свойство>
				</Свойства>
				<Значения>
					<Значение>
						<Код>1</Код>
						<Наименование>EmailОрганизации --&gt; EmailОрганизации</Наименование>
						<Порядок>50</Порядок>
						<Источник>EmailОрганизации</Источник>
						<Приемник>EmailОрганизации</Приемник>
					</Значение>
					<Значение>
						<Код>2</Код>
						<Наименование>ТелефонКонтрагента --&gt; ТелефонКонтрагента</Наименование>
						<Порядок>100</Порядок>
						<Источник>ТелефонКонтрагента</Источник>
						<Приемник>ТелефонКонтрагента</Приемник>
					</Значение>
					<Значение>
						<Код>3</Код>
						<Наименование>ТелефонОрганизации --&gt; ТелефонОрганизации</Наименование>
						<Порядок>150</Порядок>
						<Источник>ТелефонОрганизации</Источник>
						<Приемник>ТелефонОрганизации</Приемник>
					</Значение>
					<Значение>
						<Код>4</Код>
						<Наименование>ФаксКонтрагента --&gt; ФаксКонтрагента</Наименование>
						<Порядок>200</Порядок>
						<Источник>ФаксКонтрагента</Источник>
						<Приемник>ФаксКонтрагента</Приемник>
					</Значение>
					<Значение>
						<Код>5</Код>
						<Наименование>ФаксОрганизации --&gt; ФаксОрганизации</Наименование>
						<Порядок>250</Порядок>
						<Источник>ФаксОрганизации</Источник>
						<Приемник>ФаксОрганизации</Приемник>
					</Значение>
					<Значение>
						<Код>6</Код>
						<Наименование>ФактАдресКонтрагента --&gt; ФактАдресКонтрагента</Наименование>
						<Порядок>300</Порядок>
						<Источник>ФактАдресКонтрагента</Источник>
						<Приемник>ФактАдресКонтрагента</Приемник>
					</Значение>
					<Значение>
						<Код>7</Код>
						<Наименование>ФактАдресОрганизации --&gt; ФактАдресОрганизации</Наименование>
						<Порядок>350</Порядок>
						<Источник>ФактАдресОрганизации</Источник>
						<Приемник>ФактАдресОрганизации</Приемник>
					</Значение>
					<Значение>
						<Код>8</Код>
						<Наименование>ЮрАдресКонтрагента --&gt; ЮрАдресКонтрагента</Наименование>
						<Порядок>400</Порядок>
						<Источник>ЮрАдресКонтрагента</Источник>
						<Приемник>ЮрАдресКонтрагента</Приемник>
					</Значение>
					<Значение>
						<Код>9</Код>
						<Наименование>ЮрАдресОрганизации --&gt; ЮрАдресОрганизации</Наименование>
						<Порядок>450</Порядок>
						<Источник>ЮрАдресОрганизации</Источник>
						<Приемник>ЮрАдресОрганизации</Приемник>
					</Значение>
				</Значения>
			</Правило>
			<Правило>
				<Код>Организации</Код>
				<Наименование>Справочник: Организации</Наименование>
				<Порядок>200</Порядок>
				<ПоследовательностьПолейПоиска>Если НомерВариантаПоиска = 1 тогда
	СтрокаИменСвойствПоиска = "ИНН, КПП";
ИначеЕсли НомерВариантаПоиска = 2 тогда
	СтрокаИменСвойствПоиска = "ИНН";
Иначе
	СтрокаИменСвойствПоиска = "Наименование";
КонецЕсли;</ПоследовательностьПолейПоиска>
				<СинхронизироватьПоИдентификатору>true</СинхронизироватьПоИдентификатору>
				<ПродолжитьПоискПоПолямПоискаЕслиПоИдентификаторуНеНашли>true</ПродолжитьПоискПоПолямПоискаЕслиПоИдентификаторуНеНашли>
				<Источник>СправочникСсылка.Организации</Источник>
				<Приемник>СправочникСсылка.Организации</Приемник>
				<Свойства>
					<Свойство Поиск="true">
						<Код>1</Код>
						<Наименование>ИНН --&gt; ИНН</Наименование>
						<Порядок>50</Порядок>
						<Источник Имя="ИНН" Вид="Реквизит" Тип="Строка"/>
						<Приемник Имя="ИНН" Вид="Реквизит" Тип="Строка"/>
					</Свойство>
					<Свойство Поиск="true">
						<Код>4</Код>
						<Наименование>КПП --&gt; КПП</Наименование>
						<Порядок>100</Порядок>
						<Источник Имя="КПП" Вид="Реквизит" Тип="Строка"/>
						<Приемник Имя="КПП" Вид="Реквизит" Тип="Строка"/>
					</Свойство>
					<Свойство Поиск="true">
						<Код>13</Код>
						<Наименование>Наименование --&gt; Наименование</Наименование>
						<Порядок>150</Порядок>
						<Источник Имя="Наименование" Вид="Свойство" Тип="Строка"/>
						<Приемник Имя="Наименование" Вид="Свойство" Тип="Строка"/>
					</Свойство>
					<Свойство>
						<НеЗамещать>true</НеЗамещать>
						<Код>12</Код>
						<Наименование>Код --&gt; Код</Наименование>
						<Порядок>200</Порядок>
						<Источник Имя="Код" Вид="Свойство" Тип="Строка"/>
						<Приемник Имя="Код" Вид="Свойство" Тип="Строка"/>
					</Свойство>
					<Свойство>
						<Код>28</Код>
						<Наименование>НаименованиеСокращенное --&gt; НаименованиеСокращенное</Наименование>
						<Порядок>250</Порядок>
						<Источник Имя="НаименованиеСокращенное" Вид="Реквизит" Тип="Строка"/>
						<Приемник Имя="НаименованиеСокращенное" Вид="Реквизит" Тип="Строка"/>
					</Свойство>
					<Свойство>
						<Код>5</Код>
						<Наименование>НаименованиеПолное --&gt; НаименованиеПолное</Наименование>
						<Порядок>300</Порядок>
						<Источник Имя="НаименованиеПолное" Вид="Реквизит" Тип="Строка"/>
						<Приемник Имя="НаименованиеПолное" Вид="Реквизит" Тип="Строка"/>
					</Свойство>
					<Свойство>
						<НеЗамещать>true</НеЗамещать>
						<Код>8</Код>
						<Наименование>Префикс --&gt; Префикс</Наименование>
						<Порядок>350</Порядок>
						<Источник Имя="Префикс" Вид="Реквизит" Тип="Строка"/>
						<Приемник Имя="Префикс" Вид="Реквизит" Тип="Строка"/>
					</Свойство>
					<Свойство>
						<Код>2</Код>
						<Наименование>КодОКОПФ --&gt; КодОКОПФ</Наименование>
						<Порядок>400</Порядок>
						<Источник Имя="КодОКОПФ" Вид="Реквизит" Тип="Строка"/>
						<Приемник Имя="КодОКОПФ" Вид="Реквизит" Тип="Строка"/>
					</Свойство>
					<Свойство>
						<Код>3</Код>
						<Наименование>КодПоОКПО --&gt; КодПоОКПО</Наименование>
						<Порядок>450</Порядок>
						<Источник Имя="КодПоОКПО" Вид="Реквизит" Тип="Строка"/>
						<Приемник Имя="КодПоОКПО" Вид="Реквизит" Тип="Строка"/>
					</Свойство>
					<Свойство>
						<Код>6</Код>
						<Наименование>ОГРН --&gt; ОГРН</Наименование>
						<Порядок>500</Порядок>
						<Источник Имя="ОГРН" Вид="Реквизит" Тип="Строка"/>
						<Приемник Имя="ОГРН" Вид="Реквизит" Тип="Строка"/>
					</Свойство>
					<Свойство>
						<Код>7</Код>
						<Наименование>ОсновнойБанковскийСчет --&gt; ОсновнойБанковскийСчет</Наименование>
						<Порядок>550</Порядок>
						<Источник Имя="ОсновнойБанковскийСчет" Вид="Реквизит" Тип="СправочникСсылка.БанковскиеСчета"/>
						<Приемник Имя="ОсновнойБанковскийСчет" Вид="Реквизит" Тип="СправочникСсылка.БанковскиеСчета"/>
						<КодПравилаКонвертации>БанковскиеСчета                                   </КодПравилаКонвертации>
					</Свойство>
					<Свойство>
						<Код>9</Код>
						<Наименование>СвидетельствоДатаВыдачи --&gt; СвидетельствоДатаВыдачи</Наименование>
						<Порядок>600</Порядок>
						<Источник Имя="СвидетельствоДатаВыдачи" Вид="Реквизит" Тип="Дата"/>
						<Приемник Имя="СвидетельствоДатаВыдачи" Вид="Реквизит" Тип="Дата"/>
					</Свойство>
					<Свойство>
						<Код>10</Код>
						<Наименование>СвидетельствоСерияНомер --&gt; СвидетельствоСерияНомер</Наименование>
						<Порядок>650</Порядок>
						<Источник Имя="СвидетельствоСерияНомер" Вид="Реквизит" Тип="Строка"/>
						<Приемник Имя="СвидетельствоСерияНомер" Вид="Реквизит" Тип="Строка"/>
					</Свойство>
					<Свойство>
						<Код>11</Код>
						<Наименование>ЮрФизЛицо --&gt; ЮрФизЛицо</Наименование>
						<Порядок>700</Порядок>
						<Источник Имя="ЮрФизЛицо" Вид="Реквизит" Тип="ПеречислениеСсылка.ЮрФизЛицо"/>
						<Приемник Имя="ЮрФизЛицо" Вид="Реквизит" Тип="ПеречислениеСсылка.ЮрФизЛицо"/>
						<КодПравилаКонвертации>ЮрФизЛицо                                         </КодПравилаКонвертации>
					</Свойство>
					<Свойство>
						<Код>14</Код>
						<Наименование>ПометкаУдаления --&gt; ПометкаУдаления</Наименование>
						<Порядок>750</Порядок>
						<Источник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
						<Приемник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
					</Свойство>
					<Группа>
						<Код>15</Код>
						<Наименование>--&gt; КонтактнаяИнформация</Наименование>
						<Порядок>800</Порядок>
						<Источник Имя="" Вид=""/>
						<Приемник Имя="КонтактнаяИнформация" Вид="ТабличнаяЧасть"/>
						<ПередОбработкойВыгрузки>Если Источник.ЭтоГруппа Тогда
	Отказ = Истина;
Иначе
	Выполнить(Алгоритмы.ПереносКИ);
Конецесли;</ПередОбработкойВыгрузки>
						<Свойство>
							<Код>16</Код>
							<Наименование>--&gt; АдресЭП</Наименование>
							<Порядок>50</Порядок>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="АдресЭП" Вид="Реквизит" Тип="Строка"/>
						</Свойство>
						<Свойство>
							<Код>17</Код>
							<Наименование>--&gt; Вид</Наименование>
							<Порядок>100</Порядок>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="Вид" Вид="Реквизит" Тип="СправочникСсылка.ВидыКонтактнойИнформации"/>
						</Свойство>
						<Свойство>
							<Код>19</Код>
							<Наименование>--&gt; Город</Наименование>
							<Порядок>200</Порядок>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="Город" Вид="Реквизит" Тип="Строка"/>
						</Свойство>
						<Свойство>
							<Код>20</Код>
							<Наименование>--&gt; ДоменноеИмяСервера</Наименование>
							<Порядок>250</Порядок>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="ДоменноеИмяСервера" Вид="Реквизит" Тип="Строка"/>
						</Свойство>
						<Свойство>
							<Код>21</Код>
							<Наименование>--&gt; ЗначенияПолей</Наименование>
							<Порядок>300</Порядок>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="ЗначенияПолей" Вид="Реквизит" Тип="Строка"/>
						</Свойство>
						<Свойство>
							<Код>22</Код>
							<Наименование>--&gt; НомерТелефона</Наименование>
							<Порядок>350</Порядок>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="НомерТелефона" Вид="Реквизит" Тип="Строка"/>
						</Свойство>
						<Свойство>
							<Код>23</Код>
							<Наименование>--&gt; НомерТелефонаБезКодов</Наименование>
							<Порядок>400</Порядок>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="НомерТелефонаБезКодов" Вид="Реквизит" Тип="Строка"/>
						</Свойство>
						<Свойство>
							<Код>24</Код>
							<Наименование>--&gt; Представление</Наименование>
							<Порядок>450</Порядок>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="Представление" Вид="Реквизит" Тип="Строка"/>
						</Свойство>
						<Свойство>
							<Код>25</Код>
							<Наименование>--&gt; Регион</Наименование>
							<Порядок>500</Порядок>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="Регион" Вид="Реквизит" Тип="Строка"/>
						</Свойство>
						<Свойство>
							<Код>26</Код>
							<Наименование>--&gt; Страна</Наименование>
							<Порядок>550</Порядок>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="Страна" Вид="Реквизит" Тип="Строка"/>
						</Свойство>
						<Свойство>
							<Код>27</Код>
							<Наименование>--&gt; Тип</Наименование>
							<Порядок>600</Порядок>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="Тип" Вид="Реквизит" Тип="ПеречислениеСсылка.ТипыКонтактнойИнформации"/>
						</Свойство>
					</Группа>
				</Свойства>
				<Значения/>
			</Правило>
			<Правило>
				<Код>Контрагенты</Код>
				<Наименование>Справочник: Контрагенты</Наименование>
				<Порядок>250</Порядок>
				<ПоследовательностьПолейПоиска>Если НомерВариантаПоиска = 1 тогда
	СтрокаИменСвойствПоиска = "ИНН, КПП";
ИначеЕсли НомерВариантаПоиска = 2 тогда
	СтрокаИменСвойствПоиска = "ИНН";
Иначе
	СтрокаИменСвойствПоиска = "Наименование, ЭтоГруппа";
КонецЕсли;</ПоследовательностьПолейПоиска>
				<СинхронизироватьПоИдентификатору>true</СинхронизироватьПоИдентификатору>
				<ПродолжитьПоискПоПолямПоискаЕслиПоИдентификаторуНеНашли>true</ПродолжитьПоискПоПолямПоискаЕслиПоИдентификаторуНеНашли>
				<Источник>СправочникСсылка.Контрагенты</Источник>
				<Приемник>СправочникСсылка.Контрагенты</Приемник>
				<Свойства>
					<Свойство Поиск="true">
						<Код>1</Код>
						<Наименование>ИНН --&gt; ИНН</Наименование>
						<Порядок>50</Порядок>
						<Источник Имя="ИНН" Вид="Реквизит" Тип="Строка"/>
						<Приемник Имя="ИНН" Вид="Реквизит" Тип="Строка"/>
					</Свойство>
					<Свойство Поиск="true">
						<Код>4</Код>
						<Наименование>КПП --&gt; КПП</Наименование>
						<Порядок>100</Порядок>
						<Источник Имя="КПП" Вид="Реквизит" Тип="Строка"/>
						<Приемник Имя="КПП" Вид="Реквизит" Тип="Строка"/>
					</Свойство>
					<Свойство Поиск="true">
						<Код>9</Код>
						<Наименование>Наименование --&gt; Наименование</Наименование>
						<Порядок>150</Порядок>
						<Источник Имя="Наименование" Вид="Свойство" Тип="Строка"/>
						<Приемник Имя="Наименование" Вид="Свойство" Тип="Строка"/>
					</Свойство>
					<Свойство Поиск="true">
						<Код>11</Код>
						<Наименование>Родитель --&gt; Родитель</Наименование>
						<Порядок>200</Порядок>
						<Источник Имя="Родитель" Вид="Свойство" Тип="СправочникСсылка.Контрагенты"/>
						<Приемник Имя="Родитель" Вид="Свойство" Тип="СправочникСсылка.Контрагенты"/>
					</Свойство>
					<Свойство Поиск="true" Обязательное="true">
						<Код>12</Код>
						<Наименование>ЭтоГруппа --&gt; ЭтоГруппа</Наименование>
						<Порядок>250</Порядок>
						<Источник Имя="ЭтоГруппа" Вид="Свойство" Тип="Булево"/>
						<Приемник Имя="ЭтоГруппа" Вид="Свойство" Тип="Булево"/>
					</Свойство>
					<Свойство>
						<Код>8</Код>
						<Наименование>Код --&gt; Код</Наименование>
						<Порядок>300</Порядок>
						<Источник Имя="Код" Вид="Свойство" Тип="Строка"/>
						<Приемник Имя="Код" Вид="Свойство" Тип="Строка"/>
					</Свойство>
					<Свойство>
						<Код>5</Код>
						<Наименование>НаименованиеПолное --&gt; НаименованиеПолное</Наименование>
						<Порядок>350</Порядок>
						<Источник Имя="НаименованиеПолное" Вид="Реквизит" Тип="Строка"/>
						<Приемник Имя="НаименованиеПолное" Вид="Реквизит" Тип="Строка"/>
					</Свойство>
					<Свойство>
						<Код>2</Код>
						<Наименование>КодПоОКПО --&gt; КодПоОКПО</Наименование>
						<Порядок>400</Порядок>
						<Источник Имя="КодПоОКПО" Вид="Реквизит" Тип="Строка"/>
						<Приемник Имя="КодПоОКПО" Вид="Реквизит" Тип="Строка"/>
					</Свойство>
					<Свойство>
						<Код>7</Код>
						<Наименование>ЮрФизЛицо --&gt; ЮрФизЛицо</Наименование>
						<Порядок>450</Порядок>
						<Источник Имя="ЮрФизЛицо" Вид="Реквизит" Тип="ПеречислениеСсылка.ЮрФизЛицо"/>
						<Приемник Имя="ЮрФизЛицо" Вид="Реквизит" Тип="ПеречислениеСсылка.ЮрФизЛицо"/>
						<КодПравилаКонвертации>ЮрФизЛицо                                         </КодПравилаКонвертации>
					</Свойство>
					<Свойство>
						<Код>6</Код>
						<Наименование>ОсновнойБанковскийСчет --&gt; ОсновнойБанковскийСчет</Наименование>
						<Порядок>500</Порядок>
						<Источник Имя="ОсновнойБанковскийСчет" Вид="Реквизит" Тип="СправочникСсылка.БанковскиеСчета"/>
						<Приемник Имя="ОсновнойБанковскийСчет" Вид="Реквизит" Тип="СправочникСсылка.БанковскиеСчета"/>
						<КодПравилаКонвертации>БанковскиеСчета                                   </КодПравилаКонвертации>
					</Свойство>
					<Свойство>
						<Код>10</Код>
						<Наименование>ПометкаУдаления --&gt; ПометкаУдаления</Наименование>
						<Порядок>550</Порядок>
						<Источник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
						<Приемник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
					</Свойство>
					<Группа>
						<Код>13</Код>
						<Наименование>--&gt; КонтактнаяИнформация</Наименование>
						<Порядок>600</Порядок>
						<Источник Имя="" Вид=""/>
						<Приемник Имя="КонтактнаяИнформация" Вид="ТабличнаяЧасть"/>
						<ПередОбработкойВыгрузки>Если Источник.ЭтоГруппа Тогда
	Отказ = Истина;
Иначе
	Выполнить(Алгоритмы.ПереносКИ);
Конецесли;</ПередОбработкойВыгрузки>
						<Свойство>
							<Код>14</Код>
							<Наименование>--&gt; АдресЭП</Наименование>
							<Порядок>50</Порядок>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="АдресЭП" Вид="Реквизит" Тип="Строка"/>
						</Свойство>
						<Свойство>
							<Код>15</Код>
							<Наименование>--&gt; Вид</Наименование>
							<Порядок>100</Порядок>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="Вид" Вид="Реквизит" Тип="СправочникСсылка.ВидыКонтактнойИнформации"/>
							<КодПравилаКонвертации>ВидыКонтактнойИнформации                          </КодПравилаКонвертации>
						</Свойство>
						<Свойство>
							<Код>17</Код>
							<Наименование>--&gt; Город</Наименование>
							<Порядок>200</Порядок>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="Город" Вид="Реквизит" Тип="Строка"/>
						</Свойство>
						<Свойство>
							<Код>18</Код>
							<Наименование>--&gt; ДоменноеИмяСервера</Наименование>
							<Порядок>250</Порядок>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="ДоменноеИмяСервера" Вид="Реквизит" Тип="Строка"/>
						</Свойство>
						<Свойство>
							<Код>19</Код>
							<Наименование>--&gt; ЗначенияПолей</Наименование>
							<Порядок>300</Порядок>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="ЗначенияПолей" Вид="Реквизит" Тип="Строка"/>
						</Свойство>
						<Свойство>
							<Код>20</Код>
							<Наименование>--&gt; НомерТелефона</Наименование>
							<Порядок>350</Порядок>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="НомерТелефона" Вид="Реквизит" Тип="Строка"/>
						</Свойство>
						<Свойство>
							<Код>21</Код>
							<Наименование>--&gt; НомерТелефонаБезКодов</Наименование>
							<Порядок>400</Порядок>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="НомерТелефонаБезКодов" Вид="Реквизит" Тип="Строка"/>
						</Свойство>
						<Свойство>
							<Код>22</Код>
							<Наименование>--&gt; Представление</Наименование>
							<Порядок>450</Порядок>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="Представление" Вид="Реквизит" Тип="Строка"/>
						</Свойство>
						<Свойство>
							<Код>23</Код>
							<Наименование>--&gt; Регион</Наименование>
							<Порядок>500</Порядок>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="Регион" Вид="Реквизит" Тип="Строка"/>
						</Свойство>
						<Свойство>
							<Код>24</Код>
							<Наименование>--&gt; Страна</Наименование>
							<Порядок>550</Порядок>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="Страна" Вид="Реквизит" Тип="Строка"/>
						</Свойство>
						<Свойство>
							<Код>25</Код>
							<Наименование>--&gt; Тип</Наименование>
							<Порядок>600</Порядок>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="Тип" Вид="Реквизит" Тип="ПеречислениеСсылка.ТипыКонтактнойИнформации"/>
							<КодПравилаКонвертации>ТипыКонтактнойИнформации                          </КодПравилаКонвертации>
						</Свойство>
					</Группа>
				</Свойства>
				<Значения/>
			</Правило>
			<Правило>
				<Код>ДоговорыКонтрагентов</Код>
				<Наименование>Справочник: Договоры контрагентов</Наименование>
				<Порядок>300</Порядок>
				<ПоследовательностьПолейПоиска>Если НомерВариантаПоиска = 1 тогда
 	СтрокаИменСвойствПоиска = "НомерДоговора, ДатаДоговора, Владелец, Организация";
ИначеЕсли НомерВариантаПоиска = 2 тогда
	СтрокаИменСвойствПоиска = "Наименование, Владелец, Организация";
КонецЕсли;</ПоследовательностьПолейПоиска>
				<СинхронизироватьПоИдентификатору>true</СинхронизироватьПоИдентификатору>
				<ПродолжитьПоискПоПолямПоискаЕслиПоИдентификаторуНеНашли>true</ПродолжитьПоискПоПолямПоискаЕслиПоИдентификаторуНеНашли>
				<Источник>СправочникСсылка.ДоговорыКонтрагентов</Источник>
				<Приемник>СправочникСсылка.ДоговорыКонтрагентов</Приемник>
				<Свойства>
					<Свойство Поиск="true">
						<Код>8</Код>
						<Наименование>Дата --&gt; ДатаДоговора</Наименование>
						<Порядок>50</Порядок>
						<Источник Имя="Дата" Вид="Реквизит" Тип="Дата"/>
						<Приемник Имя="ДатаДоговора" Вид="Реквизит" Тип="Дата"/>
					</Свойство>
					<Свойство Поиск="true">
						<Код>9</Код>
						<Наименование>Номер --&gt; НомерДоговора</Наименование>
						<Порядок>100</Порядок>
						<Источник Имя="Номер" Вид="Реквизит" Тип="Строка"/>
						<Приемник Имя="НомерДоговора" Вид="Реквизит" Тип="Строка"/>
					</Свойство>
					<Свойство Поиск="true" Обязательное="true">
						<Код>13</Код>
						<Наименование>ЭтоГруппа --&gt; ЭтоГруппа</Наименование>
						<Порядок>150</Порядок>
						<Источник Имя="ЭтоГруппа" Вид="Свойство" Тип="Булево"/>
						<Приемник Имя="ЭтоГруппа" Вид="Свойство" Тип="Булево"/>
					</Свойство>
					<Свойство Поиск="true">
						<Код>4</Код>
						<Наименование>Наименование --&gt; Наименование</Наименование>
						<Порядок>200</Порядок>
						<Источник Имя="Наименование" Вид="Свойство" Тип="Строка"/>
						<Приемник Имя="Наименование" Вид="Свойство" Тип="Строка"/>
					</Свойство>
					<Свойство Поиск="true">
						<Код>2</Код>
						<Наименование>Владелец --&gt; Владелец</Наименование>
						<Порядок>250</Порядок>
						<Источник Имя="Владелец" Вид="Свойство" Тип="СправочникСсылка.Контрагенты"/>
						<Приемник Имя="Владелец" Вид="Свойство" Тип="СправочникСсылка.Контрагенты"/>
						<КодПравилаКонвертации>Контрагенты                                       </КодПравилаКонвертации>
					</Свойство>
					<Свойство Поиск="true">
						<Код>1</Код>
						<Наименование>Организация --&gt; Организация</Наименование>
						<Порядок>300</Порядок>
						<Источник Имя="Организация" Вид="Реквизит" Тип="СправочникСсылка.Организации"/>
						<Приемник Имя="Организация" Вид="Реквизит" Тип="СправочникСсылка.Организации"/>
						<КодПравилаКонвертации>Организации                                       </КодПравилаКонвертации>
					</Свойство>
					<Свойство>
						<Код>12</Код>
						<Наименование>ВидДоговора --&gt; ВидДоговора</Наименование>
						<Порядок>350</Порядок>
						<Источник Имя="ВидДоговора" Вид="Реквизит" Тип="ПеречислениеСсылка.ВидыДоговоровКонтрагентов"/>
						<Приемник Имя="ВидДоговора" Вид="Реквизит" Тип="ПеречислениеСсылка.ВидыДоговоровКонтрагентов"/>
						<КодПравилаКонвертации>ВидыДоговоровКонтрагентов                         </КодПравилаКонвертации>
					</Свойство>
					<Свойство>
						<Код>3</Код>
						<Наименование>Код --&gt; Код</Наименование>
						<Порядок>400</Порядок>
						<Источник Имя="Код" Вид="Свойство" Тип="Строка"/>
						<Приемник Имя="Код" Вид="Свойство" Тип="Строка"/>
					</Свойство>
					<Свойство>
						<Код>5</Код>
						<Наименование>ПометкаУдаления --&gt; ПометкаУдаления</Наименование>
						<Порядок>450</Порядок>
						<Источник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
						<Приемник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
					</Свойство>
					<Свойство>
						<Код>6</Код>
						<Наименование>Родитель --&gt; Родитель</Наименование>
						<Порядок>500</Порядок>
						<Источник Имя="Родитель" Вид="Свойство" Тип="СправочникСсылка.ДоговорыКонтрагентов"/>
						<Приемник Имя="Родитель" Вид="Свойство" Тип="СправочникСсылка.ДоговорыКонтрагентов"/>
						<КодПравилаКонвертации>ДоговорыКонтрагентов                              </КодПравилаКонвертации>
					</Свойство>
					<Свойство>
						<Код>7</Код>
						<Наименование>ВалютаВзаиморасчетов --&gt; ВалютаРасчетов</Наименование>
						<Порядок>550</Порядок>
						<Источник Имя="ВалютаВзаиморасчетов" Вид="Реквизит" Тип="СправочникСсылка.Валюты"/>
						<Приемник Имя="ВалютаРасчетов" Вид="Реквизит" Тип="СправочникСсылка.Валюты"/>
						<КодПравилаКонвертации>Валюты                                            </КодПравилаКонвертации>
					</Свойство>
					<Свойство>
						<Код>11</Код>
						<Наименование>Дата --&gt; ДатаНачалаДействия</Наименование>
						<Порядок>600</Порядок>
						<Источник Имя="Дата" Вид="Реквизит" Тип="Дата"/>
						<Приемник Имя="ДатаНачалаДействия" Вид="Реквизит" Тип="Дата"/>
					</Свойство>
					<Свойство>
						<Код>10</Код>
						<Наименование>СрокДействия --&gt; ДатаОкончанияДействия</Наименование>
						<Порядок>650</Порядок>
						<Источник Имя="СрокДействия" Вид="Реквизит" Тип="Дата"/>
						<Приемник Имя="ДатаОкончанияДействия" Вид="Реквизит" Тип="Дата"/>
					</Свойство>
				</Свойства>
				<Значения/>
			</Правило>
			<Правило>
				<Код>КлассификаторБанков</Код>
				<Наименование>Справочник: Банки</Наименование>
				<Порядок>350</Порядок>
				<ПоследовательностьПолейПоиска>СтрокаИменСвойствПоиска = "Код";</ПоследовательностьПолейПоиска>
				<НеЗамещать>true</НеЗамещать>
				<СинхронизироватьПоИдентификатору>true</СинхронизироватьПоИдентификатору>
				<ПродолжитьПоискПоПолямПоискаЕслиПоИдентификаторуНеНашли>true</ПродолжитьПоискПоПолямПоискаЕслиПоИдентификаторуНеНашли>
				<НеСоздаватьЕслиНеНайден>true</НеСоздаватьЕслиНеНайден>
				<Источник>СправочникСсылка.Банки</Источник>
				<Приемник>СправочникСсылка.КлассификаторБанков</Приемник>
				<Свойства>
					<Свойство Поиск="true">
						<Код>1</Код>
						<Наименование>Код --&gt; Код</Наименование>
						<Порядок>50</Порядок>
						<Источник Имя="Код" Вид="Свойство" Тип="Строка"/>
						<Приемник Имя="Код" Вид="Свойство" Тип="Строка"/>
					</Свойство>
				</Свойства>
				<Значения/>
			</Правило>
			<Правило>
				<Код>БанковскиеСчета</Код>
				<Наименование>Справочник: Банковские счета</Наименование>
				<Порядок>400</Порядок>
				<ПоследовательностьПолейПоиска>СтрокаИменСвойствПоиска = "НомерСчета, Владелец";
</ПоследовательностьПолейПоиска>
				<СинхронизироватьПоИдентификатору>true</СинхронизироватьПоИдентификатору>
				<ПродолжитьПоискПоПолямПоискаЕслиПоИдентификаторуНеНашли>true</ПродолжитьПоискПоПолямПоискаЕслиПоИдентификаторуНеНашли>
				<Источник>СправочникСсылка.БанковскиеСчета</Источник>
				<Приемник>СправочникСсылка.БанковскиеСчета</Приемник>
				<Свойства>
					<Свойство Поиск="true">
						<Код>3</Код>
						<Наименование>НомерСчета --&gt; НомерСчета</Наименование>
						<Порядок>50</Порядок>
						<Источник Имя="НомерСчета" Вид="Реквизит" Тип="Строка"/>
						<Приемник Имя="НомерСчета" Вид="Реквизит" Тип="Строка"/>
					</Свойство>
					<Свойство Поиск="true">
						<Код>4</Код>
						<Наименование>Владелец --&gt; Владелец</Наименование>
						<Порядок>100</Порядок>
						<Источник Имя="Владелец" Вид="Свойство"/>
						<Приемник Имя="Владелец" Вид="Свойство"/>
					</Свойство>
					<Свойство>
						<Код>1</Код>
						<Наименование>Банк --&gt; Банк</Наименование>
						<Порядок>150</Порядок>
						<Источник Имя="Банк" Вид="Реквизит" Тип="СправочникСсылка.Банки"/>
						<Приемник Имя="Банк" Вид="Реквизит" Тип="СправочникСсылка.КлассификаторБанков"/>
						<КодПравилаКонвертации>КлассификаторБанков                               </КодПравилаКонвертации>
					</Свойство>
					<Свойство>
						<Код>2</Код>
						<Наименование>БанкДляРасчетов --&gt; БанкДляРасчетов</Наименование>
						<Порядок>200</Порядок>
						<Источник Имя="БанкДляРасчетов" Вид="Реквизит" Тип="СправочникСсылка.Банки"/>
						<Приемник Имя="БанкДляРасчетов" Вид="Реквизит" Тип="СправочникСсылка.КлассификаторБанков"/>
						<КодПравилаКонвертации>КлассификаторБанков                               </КодПравилаКонвертации>
					</Свойство>
					<Свойство>
						<Код>5</Код>
						<Наименование>Наименование --&gt; Наименование</Наименование>
						<Порядок>250</Порядок>
						<Источник Имя="Наименование" Вид="Свойство" Тип="Строка"/>
						<Приемник Имя="Наименование" Вид="Свойство" Тип="Строка"/>
					</Свойство>
					<Свойство>
						<Код>7</Код>
						<Наименование>ВалютаДенежныхСредств --&gt; ВалютаДенежныхСредств</Наименование>
						<Порядок>300</Порядок>
						<Источник Имя="ВалютаДенежныхСредств" Вид="Реквизит" Тип="СправочникСсылка.Валюты"/>
						<Приемник Имя="ВалютаДенежныхСредств" Вид="Реквизит" Тип="СправочникСсылка.Валюты"/>
						<КодПравилаКонвертации>Валюты                                            </КодПравилаКонвертации>
					</Свойство>
					<Свойство>
						<Код>6</Код>
						<Наименование>ПометкаУдаления --&gt; ПометкаУдаления</Наименование>
						<Порядок>350</Порядок>
						<Источник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
						<Приемник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
					</Свойство>
				</Свойства>
				<Значения/>
			</Правило>
			<Правило>
				<Код>ЕдиницаПоКлассификатору</Код>
				<Наименование>Справочник: Единицы измерения</Наименование>
				<Порядок>450</Порядок>
				<ПоследовательностьПолейПоиска>СтрокаИменСвойствПоиска = "Код";
</ПоследовательностьПолейПоиска>
				<НеЗамещать>true</НеЗамещать>
				<СинхронизироватьПоИдентификатору>true</СинхронизироватьПоИдентификатору>
				<ПродолжитьПоискПоПолямПоискаЕслиПоИдентификаторуНеНашли>true</ПродолжитьПоискПоПолямПоискаЕслиПоИдентификаторуНеНашли>
				<Источник>СправочникСсылка.КлассификаторЕдиницИзмерения</Источник>
				<Приемник>СправочникСсылка.ЕдиницыИзмерения</Приемник>
				<Свойства>
					<Свойство Поиск="true">
						<Код>3</Код>
						<Наименование>Код --&gt; Код</Наименование>
						<Порядок>50</Порядок>
						<Источник Имя="Код" Вид="Свойство" Тип="Строка"/>
						<Приемник Имя="Код" Вид="Свойство" Тип="Строка"/>
						<ПередВыгрузкой>Значение = СокрЛП(Источник.Код);</ПередВыгрузкой>
					</Свойство>
					<Свойство Отключить="true">
						<Код>1</Код>
						<Наименование>МеждународноеСокращение --&gt; МеждународноеСокращение</Наименование>
						<Порядок>100</Порядок>
						<Источник Имя="МеждународноеСокращение" Вид="Реквизит" Тип="Строка"/>
						<Приемник Имя="МеждународноеСокращение" Вид="Реквизит" Тип="Строка"/>
					</Свойство>
					<Свойство>
						<Код>2</Код>
						<Наименование>НаименованиеПолное --&gt; НаименованиеПолное</Наименование>
						<Порядок>150</Порядок>
						<Источник Имя="НаименованиеПолное" Вид="Реквизит" Тип="Строка"/>
						<Приемник Имя="НаименованиеПолное" Вид="Реквизит" Тип="Строка"/>
					</Свойство>
					<Свойство>
						<Код>4</Код>
						<Наименование>Наименование --&gt; Наименование</Наименование>
						<Порядок>200</Порядок>
						<Источник Имя="Наименование" Вид="Свойство" Тип="Строка"/>
						<Приемник Имя="Наименование" Вид="Свойство" Тип="Строка"/>
					</Свойство>
					<Свойство>
						<Код>5</Код>
						<Наименование>ПометкаУдаления --&gt; ПометкаУдаления</Наименование>
						<Порядок>250</Порядок>
						<Источник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
						<Приемник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
					</Свойство>
				</Свойства>
				<Значения/>
			</Правило>
			<Правило>
				<Код>ВидыНоменклатуры</Код>
				<Наименование>Справочник: Виды номенклатуры</Наименование>
				<Порядок>500</Порядок>
				<ПоследовательностьПолейПоиска>Если НомерВариантаПоиска = 1 Тогда
	СтрокаИменСвойствПоиска = "Наименование, ЭтоГруппа, Родитель";
Иначе
	ПрекратитьПоиск = Истина;
	ИндивидуальныеХарактеристики = СвойстваПоиска.Получить("ИндивидуальныеХарактеристикиНоменклатуры");
	Если ИндивидуальныеХарактеристики = Истина Тогда
		ВидНоменклатуры = Справочники.ВидыНоменклатуры.СоздатьЭлемент();
		СвойстваПоиска.Удалить("ЭтоГруппа");
		Для Каждого Свойство Из СвойстваПоиска Цикл
			ВидНоменклатуры[Свойство.Ключ] = Свойство.Значение;
		КонецЦикла;
		ВидНоменклатуры.ИспользоватьХарактеристики = Истина;
		ВидНоменклатуры.УстановитьНовыйКод();
		Попытка
			ВидНоменклатуры.Записать();
			СсылкаНаОбъект = ВидНоменклатуры.Ссылка;
		Исключение
			ТекстОшибки = СтрШаблон(НСтр("ru = 'Не удалось загрузить вид номенклатуры ""%1"".'"), ВидНоменклатуры.Наименование)
				+ Символы.ПС + ПодробноеПредставлениеОшибки(ИнформацияОбОшибке());
			ЗаписьЖурналаРегистрации(НСтр("ru = 'Загрузка видов номенклатуры.'",
				ОбщегоНазначенияКлиентСервер.КодОсновногоЯзыка()),
				УровеньЖурналаРегистрации.Ошибка,
				ВидНоменклатуры.Метаданные(),,
				ТекстОшибки);
		КонецПопытки;
	КонецЕсли;
КонецЕсли;</ПоследовательностьПолейПоиска>
				<ГенерироватьНовыйНомерИлиКодЕслиНеУказан>true</ГенерироватьНовыйНомерИлиКодЕслиНеУказан>
				<Источник>СправочникСсылка.ВидыНоменклатуры</Источник>
				<Приемник>СправочникСсылка.ВидыНоменклатуры</Приемник>
				<Свойства>
					<Свойство Поиск="true">
						<Код>3</Код>
						<Наименование>Наименование --&gt; Наименование</Наименование>
						<Порядок>50</Порядок>
						<Источник Имя="Наименование" Вид="Свойство" Тип="Строка"/>
						<Приемник Имя="Наименование" Вид="Свойство" Тип="Строка"/>
						<ПередВыгрузкой>ВестиУчетПоХарактеристикам = Ложь;
Если НЕ Источник.ЭтоГруппа
	И ВходящиеДанные &lt;&gt; Неопределено
	И ВходящиеДанные.Свойство("ВестиУчетПоХарактеристикам", ВестиУчетПоХарактеристикам)
	И ВестиУчетПоХарактеристикам Тогда
	Значение = Источник.Наименование + " (и/х)";
КонецЕсли;</ПередВыгрузкой>
					</Свойство>
					<Свойство Поиск="true">
						<Код>5</Код>
						<Наименование>Родитель --&gt; Родитель</Наименование>
						<Порядок>100</Порядок>
						<Источник Имя="Родитель" Вид="Свойство" Тип="СправочникСсылка.ВидыНоменклатуры"/>
						<Приемник Имя="Родитель" Вид="Свойство" Тип="СправочникСсылка.ВидыНоменклатуры"/>
						<КодПравилаКонвертации>ВидыНоменклатуры                                  </КодПравилаКонвертации>
					</Свойство>
					<Свойство Поиск="true" Обязательное="true">
						<Код>6</Код>
						<Наименование>ЭтоГруппа --&gt; ЭтоГруппа</Наименование>
						<Порядок>150</Порядок>
						<Источник Имя="ЭтоГруппа" Вид="Свойство" Тип="Булево"/>
						<Приемник Имя="ЭтоГруппа" Вид="Свойство" Тип="Булево"/>
					</Свойство>
					<Свойство Поиск="true">
						<Код>1</Код>
						<Наименование>ТипНоменклатуры --&gt; ТипНоменклатуры</Наименование>
						<Порядок>200</Порядок>
						<Источник Имя="ТипНоменклатуры" Вид="Реквизит" Тип="ПеречислениеСсылка.ТипыНоменклатуры"/>
						<Приемник Имя="ТипНоменклатуры" Вид="Реквизит" Тип="ПеречислениеСсылка.ТипыНоменклатуры"/>
						<КодПравилаКонвертации>ТипыНоменклатуры                                  </КодПравилаКонвертации>
					</Свойство>
					<Свойство Поиск="true">
						<Код>7</Код>
						<Наименование>--&gt; ИндивидуальныеХарактеристикиНоменклатуры</Наименование>
						<Порядок>250</Порядок>
						<Источник Имя="" Вид=""/>
						<Приемник Имя="ИндивидуальныеХарактеристикиНоменклатуры" Вид="Реквизит" Тип="Булево"/>
						<ПередВыгрузкой>Результат = ВходящиеДанные &lt;&gt; Неопределено
	И ВходящиеДанные.Свойство("ВестиУчетПоХарактеристикам", Значение);</ПередВыгрузкой>
					</Свойство>
					<Свойство>
						<Код>2</Код>
						<Наименование>Код --&gt; Код</Наименование>
						<Порядок>300</Порядок>
						<Источник Имя="Код" Вид="Свойство" Тип="Строка"/>
						<Приемник Имя="Код" Вид="Свойство" Тип="Строка"/>
					</Свойство>
					<Свойство>
						<Код>4</Код>
						<Наименование>ПометкаУдаления --&gt; ПометкаУдаления</Наименование>
						<Порядок>350</Порядок>
						<Источник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
						<Приемник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
					</Свойство>
				</Свойства>
				<Значения/>
			</Правило>
			<Правило>
				<Код>Номенклатура</Код>
				<Наименование>Справочник: Номенклатура</Наименование>
				<Порядок>550</Порядок>
				<ПоследовательностьПолейПоиска>Если НомерВариантаПоиска = 1 Тогда
	Если ЗначениеЗаполнено(СвойстваПоиска.Получить("Артикул")) Тогда
		СтрокаИменСвойствПоиска = "Артикул";
	Иначе
		СтрокаИменСвойствПоиска = "Наименование, Родитель, ЭтоГруппа";
	КонецЕсли;
ИначеЕсли НомерВариантаПоиска = 2 Тогда
	СтрокаИменСвойствПоиска = "Наименование, ЭтоГруппа";
КонецЕсли;
</ПоследовательностьПолейПоиска>
				<СинхронизироватьПоИдентификатору>true</СинхронизироватьПоИдентификатору>
				<ПродолжитьПоискПоПолямПоискаЕслиПоИдентификаторуНеНашли>true</ПродолжитьПоискПоПолямПоискаЕслиПоИдентификаторуНеНашли>
				<Источник>СправочникСсылка.Номенклатура</Источник>
				<Приемник>СправочникСсылка.Номенклатура</Приемник>
				<Свойства>
					<Свойство Поиск="true">
						<Код>7</Код>
						<Наименование>Наименование --&gt; Наименование</Наименование>
						<Порядок>50</Порядок>
						<Источник Имя="Наименование" Вид="Свойство" Тип="Строка"/>
						<Приемник Имя="Наименование" Вид="Свойство" Тип="Строка"/>
					</Свойство>
					<Свойство Поиск="true">
						<Код>9</Код>
						<Наименование>Родитель --&gt; Родитель</Наименование>
						<Порядок>100</Порядок>
						<Источник Имя="Родитель" Вид="Свойство" Тип="СправочникСсылка.Номенклатура"/>
						<Приемник Имя="Родитель" Вид="Свойство" Тип="СправочникСсылка.Номенклатура"/>
						<КодПравилаКонвертации>Номенклатура                                      </КодПравилаКонвертации>
					</Свойство>
					<Свойство Поиск="true" Обязательное="true">
						<Код>10</Код>
						<Наименование>ЭтоГруппа --&gt; ЭтоГруппа</Наименование>
						<Порядок>150</Порядок>
						<Источник Имя="ЭтоГруппа" Вид="Свойство" Тип="Булево"/>
						<Приемник Имя="ЭтоГруппа" Вид="Свойство" Тип="Булево"/>
					</Свойство>
					<Свойство Поиск="true">
						<Код>1</Код>
						<Наименование>Артикул --&gt; Артикул</Наименование>
						<Порядок>200</Порядок>
						<Источник Имя="Артикул" Вид="Реквизит" Тип="Строка"/>
						<Приемник Имя="Артикул" Вид="Реквизит" Тип="Строка"/>
					</Свойство>
					<Свойство>
						<Код>6</Код>
						<Наименование>Код --&gt; Код</Наименование>
						<Порядок>250</Порядок>
						<Источник Имя="Код" Вид="Свойство" Тип="Строка"/>
						<Приемник Имя="Код" Вид="Свойство" Тип="Строка"/>
					</Свойство>
					<Свойство>
						<Код>4</Код>
						<Наименование>НаименованиеПолное --&gt; НаименованиеПолное</Наименование>
						<Порядок>300</Порядок>
						<Источник Имя="НаименованиеПолное" Вид="Реквизит" Тип="Строка"/>
						<Приемник Имя="НаименованиеПолное" Вид="Реквизит" Тип="Строка"/>
					</Свойство>
					<Свойство>
						<Код>2</Код>
						<Наименование>ВидНоменклатуры --&gt; ВидНоменклатуры</Наименование>
						<Порядок>350</Порядок>
						<Источник Имя="ВидНоменклатуры" Вид="Реквизит" Тип="СправочникСсылка.ВидыНоменклатуры"/>
						<Приемник Имя="ВидНоменклатуры" Вид="Реквизит" Тип="СправочникСсылка.ВидыНоменклатуры"/>
						<КодПравилаКонвертации>ВидыНоменклатуры                                  </КодПравилаКонвертации>
						<ПередВыгрузкой>Если Источник.ЭтоГруппа Тогда
	Отказ = Истина;
Иначе
	ИсходящиеДанные = Новый Структура;
	ИсходящиеДанные.Вставить("ВестиУчетПоХарактеристикам", Источник.ВестиУчетПоХарактеристикам);
КонецЕсли;</ПередВыгрузкой>
					</Свойство>
					<Свойство>
						<Код>11</Код>
						<Наименование>БазоваяЕдиницаИзмерения --&gt; ЕдиницаИзмерения</Наименование>
						<Порядок>400</Порядок>
						<Источник Имя="БазоваяЕдиницаИзмерения" Вид="Реквизит" Тип="СправочникСсылка.КлассификаторЕдиницИзмерения"/>
						<Приемник Имя="ЕдиницаИзмерения" Вид="Реквизит" Тип="СправочникСсылка.ЕдиницыИзмерения"/>
						<КодПравилаКонвертации>ЕдиницаПоКлассификатору                           </КодПравилаКонвертации>
					</Свойство>
					<Свойство>
						<Код>5</Код>
						<Наименование>СтавкаНДС --&gt; СтавкаНДС</Наименование>
						<Порядок>450</Порядок>
						<Источник Имя="СтавкаНДС" Вид="Реквизит" Тип="ПеречислениеСсылка.СтавкиНДС"/>
						<Приемник Имя="СтавкаНДС" Вид="Реквизит" Тип="ПеречислениеСсылка.СтавкиНДС"/>
						<КодПравилаКонвертации>СтавкиНДС                                         </КодПравилаКонвертации>
						<ПередВыгрузкой>Если Источник.ЭтоГруппа Тогда
	Отказ = Истина;
ИначеЕсли НЕ ЗначениеЗаполнено(Источник.СтавкаНДС)
	И ВходящиеДанные &lt;&gt; Неопределено Тогда
	ВходящиеДанные.Свойство("СтавкаНДС", Значение);
КонецЕсли;</ПередВыгрузкой>
					</Свойство>
					<Свойство>
						<Код>8</Код>
						<Наименование>ПометкаУдаления --&gt; ПометкаУдаления</Наименование>
						<Порядок>500</Порядок>
						<Источник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
						<Приемник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
					</Свойство>
				</Свойства>
				<Значения/>
			</Правило>
			<Правило>
				<Код>ХарактеристикиНоменклатуры</Код>
				<Наименование>Справочник: Характеристики номенклатуры</Наименование>
				<Порядок>600</Порядок>
				<ПоследовательностьПолейПоиска>СтрокаИменСвойствПоиска = "Владелец, Наименование";</ПоследовательностьПолейПоиска>
				<СинхронизироватьПоИдентификатору>true</СинхронизироватьПоИдентификатору>
				<ПродолжитьПоискПоПолямПоискаЕслиПоИдентификаторуНеНашли>true</ПродолжитьПоискПоПолямПоискаЕслиПоИдентификаторуНеНашли>
				<Источник>СправочникСсылка.ХарактеристикиНоменклатуры</Источник>
				<Приемник>СправочникСсылка.ХарактеристикиНоменклатуры</Приемник>
				<Свойства>
					<Свойство Поиск="true">
						<Код>1</Код>
						<Наименование>Владелец --&gt; Владелец</Наименование>
						<Порядок>50</Порядок>
						<Источник Имя="Владелец" Вид="Свойство" Тип="СправочникСсылка.Номенклатура"/>
						<Приемник Имя="Владелец" Вид="Свойство"/>
						<КодПравилаКонвертации>Номенклатура                                      </КодПравилаКонвертации>
					</Свойство>
					<Свойство Поиск="true">
						<Код>2</Код>
						<Наименование>Наименование --&gt; Наименование</Наименование>
						<Порядок>100</Порядок>
						<Источник Имя="Наименование" Вид="Свойство" Тип="Строка"/>
						<Приемник Имя="Наименование" Вид="Свойство" Тип="Строка"/>
					</Свойство>
				</Свойства>
				<Значения/>
			</Правило>
		</Группа>
		<Группа>
			<Код>Документы</Код>
			<Наименование>Документы                                         </Наименование>
			<Порядок>150</Порядок>
			<Правило>
				<Код>АктОбОказанииПроизводственныхУслуг</Код>
				<Наименование>Документ: Акт об оказании производственных услуг</Наименование>
				<Порядок>50</Порядок>
				<ПередВыгрузкой>ВходящиеДанные = Новый Структура;
ВходящиеДанные.Вставить("ВидДокумента", "АктВыполненныхРабот");
ВходящиеДанные.Вставить("ВидОперации", "Реализация");
</ПередВыгрузкой>
				<ПослеЗагрузки>Выполнить(Алгоритмы.ЗаполнитьОтветственногоПоДокументу);
Выполнить(Алгоритмы.УстановитьРежимЗаписиДокумента);
Выполнить(Алгоритмы.ПроверитьИзменениеКлючевыхРеквизитовДокумента);
</ПослеЗагрузки>
				<СинхронизироватьПоИдентификатору>true</СинхронизироватьПоИдентификатору>
				<Источник>ДокументСсылка.АктОбОказанииПроизводственныхУслуг</Источник>
				<Приемник>ДокументСсылка.РеализацияТоваровУслуг</Приемник>
				<Свойства>
					<Группа>
						<Код>11</Код>
						<Наименование>Услуги --&gt; Товары</Наименование>
						<Порядок>50</Порядок>
						<Источник Имя="Услуги" Вид="ТабличнаяЧасть"/>
						<Приемник Имя="Товары" Вид="ТабличнаяЧасть"/>
						<ПередОбработкойВыгрузки>Запрос = Новый Запрос;
Запрос.Текст = 
	"ВЫБРАТЬ
	|	АктОбОказанииПроизводственныхУслугУслуги.Номенклатура.Код КАК КодТовара,
	|	АктОбОказанииПроизводственныхУслугУслуги.Номенклатура КАК Номенклатура,
	|	АктОбОказанииПроизводственныхУслугУслуги.ЕдиницаИзмерения КАК ЕдиницаИзмерения,
	|	АктОбОказанииПроизводственныхУслугУслуги.ЕдиницаИзмерения.ЕдиницаПоКлассификатору КАК ЕдиницаПоКлассификатору,
	|	АктОбОказанииПроизводственныхУслугУслуги.Количество КАК Количество,
	|	АктОбОказанииПроизводственныхУслугУслуги.Цена КАК Цена,
	|	АктОбОказанииПроизводственныхУслугУслуги.Сумма КАК Сумма,
	|	АктОбОказанииПроизводственныхУслугУслуги.СтавкаНДС КАК СтавкаНДС,
	|	АктОбОказанииПроизводственныхУслугУслуги.СуммаНДС КАК СуммаНДС
	|ИЗ
	|	Документ.АктОбОказанииПроизводственныхУслуг.Услуги КАК АктОбОказанииПроизводственныхУслугУслуги
	|ГДЕ
	|	АктОбОказанииПроизводственныхУслугУслуги.Ссылка = &amp;Ссылка";

Запрос.УстановитьПараметр("Ссылка", Источник.Ссылка);

КоллекцияОбъектов = Запрос.Выполнить().Выгрузить();
</ПередОбработкойВыгрузки>
						<ПриВыгрузке>Выполнить(Алгоритмы.ЗаполнитьСтавкуВСтрокеПоФлагуУчитыватьНДС);</ПриВыгрузке>
						<Свойство>
							<Код>14</Код>
							<Наименование>Номенклатура --&gt; Номенклатура</Наименование>
							<Порядок>50</Порядок>
							<Источник Имя="Номенклатура" Вид="Реквизит" Тип="СправочникСсылка.Номенклатура"/>
							<Приемник Имя="Номенклатура" Вид="Реквизит" Тип="СправочникСсылка.Номенклатура"/>
							<КодПравилаКонвертации>Номенклатура                                      </КодПравилаКонвертации>
							<ПередВыгрузкой>ИсходящиеДанные = Новый Структура("СтавкаНДС", ОбъектКоллекции.СтавкаНДС);</ПередВыгрузкой>
						</Свойство>
						<Свойство>
							<Код>12</Код>
							<Наименование>--&gt; ЕдиницаИзмерения</Наименование>
							<Порядок>100</Порядок>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="ЕдиницаИзмерения" Вид="Реквизит" Тип="СправочникСсылка.ЕдиницыИзмерения"/>
							<КодПравилаКонвертации>ЕдиницаПоКлассификатору                           </КодПравилаКонвертации>
							<ПередВыгрузкой>Если ЗначениеЗаполнено(ОбъектКоллекции.ЕдиницаПоКлассификатору) Тогда
	Значение = ОбъектКоллекции.ЕдиницаПоКлассификатору;
КонецЕсли;</ПередВыгрузкой>
						</Свойство>
						<Свойство>
							<Код>13</Код>
							<Наименование>Количество --&gt; Количество</Наименование>
							<Порядок>150</Порядок>
							<Источник Имя="Количество" Вид="Реквизит" Тип="Число"/>
							<Приемник Имя="Количество" Вид="Реквизит" Тип="Число"/>
						</Свойство>
						<Свойство>
							<Код>18</Код>
							<Наименование>Цена --&gt; Цена</Наименование>
							<Порядок>200</Порядок>
							<Источник Имя="Цена" Вид="Реквизит" Тип="Число"/>
							<Приемник Имя="Цена" Вид="Реквизит" Тип="Число"/>
						</Свойство>
						<Свойство>
							<Код>16</Код>
							<Наименование>Сумма --&gt; Сумма</Наименование>
							<Порядок>250</Порядок>
							<Источник Имя="Сумма" Вид="Реквизит" Тип="Число"/>
							<Приемник Имя="Сумма" Вид="Реквизит" Тип="Число"/>
						</Свойство>
						<Свойство>
							<Код>15</Код>
							<Наименование>СтавкаНДС --&gt; СтавкаНДС</Наименование>
							<Порядок>300</Порядок>
							<Источник Имя="СтавкаНДС" Вид="Реквизит" Тип="ПеречислениеСсылка.СтавкиНДС"/>
							<Приемник Имя="СтавкаНДС" Вид="Реквизит" Тип="ПеречислениеСсылка.СтавкиНДС"/>
							<КодПравилаКонвертации>СтавкиНДС                                         </КодПравилаКонвертации>
						</Свойство>
						<Свойство>
							<Код>17</Код>
							<Наименование>СуммаНДС --&gt; СуммаНДС</Наименование>
							<Порядок>350</Порядок>
							<Источник Имя="СуммаНДС" Вид="Реквизит" Тип="Число"/>
							<Приемник Имя="СуммаНДС" Вид="Реквизит" Тип="Число"/>
						</Свойство>
						<Свойство>
							<Код>21</Код>
							<Наименование>--&gt; СуммаСНДС</Наименование>
							<Порядок>400</Порядок>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="СуммаСНДС" Вид="Реквизит" Тип="Число"/>
							<ПередВыгрузкой>Значение = ?(Источник.СуммаВключаетНДС,
	ОбъектКоллекции.Сумма,
	ОбъектКоллекции.Сумма + ОбъектКоллекции.СуммаНДС);</ПередВыгрузкой>
						</Свойство>
					</Группа>
					<Свойство Поиск="true">
						<Код>19</Код>
						<Наименование>--&gt; ВидДокумента</Наименование>
						<Порядок>100</Порядок>
						<ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных>
						<Источник Имя="" Вид=""/>
						<Приемник Имя="ВидДокумента" Вид="Реквизит" Тип="ПеречислениеСсылка.ВидыДокументов"/>
					</Свойство>
					<Свойство Поиск="true">
						<Код>20</Код>
						<Наименование>--&gt; ВидОперации</Наименование>
						<Порядок>150</Порядок>
						<ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных>
						<Источник Имя="" Вид=""/>
						<Приемник Имя="ВидОперации" Вид="Реквизит" Тип="ПеречислениеСсылка.ВидыОпераций"/>
					</Свойство>
					<Свойство Поиск="true">
						<Код>6</Код>
						<Наименование>Дата --&gt; Дата</Наименование>
						<Порядок>200</Порядок>
						<Источник Имя="Дата" Вид="Свойство" Тип="Дата"/>
						<Приемник Имя="Дата" Вид="Свойство" Тип="Дата"/>
					</Свойство>
					<Свойство Поиск="true">
						<Код>22</Код>
						<Наименование>Номер --&gt; Номер</Наименование>
						<Порядок>250</Порядок>
						<Источник Имя="Номер" Вид="Свойство" Тип="Строка"/>
						<Приемник Имя="Номер" Вид="Свойство" Тип="Строка"/>
						<ПередВыгрузкой>Префикс = "";
Номер = Источник.Номер;
МассивПрефиксовДляОбхода = ОбщегоНазначения.СформироватьМассивПрефиксовДляРИБИОрганизации(Источник.Организация);
Для Каждого ТекущийПрефикс ИЗ МассивПрефиксовДляОбхода Цикл
	
	Если Найти(Номер, ТекущийПрефикс) = 1 Тогда 
		Номер = Сред(Номер, СтрДлина(ТекущийПрефикс) + 1);
		Префикс = Префикс + ТекущийПрефикс;
	КонецЕсли;
	
	Если Лев(Номер, 1) = "-" Тогда
		Номер = Сред(Номер, 2);
		Префикс = Префикс + "-";
	КонецЕсли;
	
КонецЦикла;

Значение = Префикс + "А" + Сред(Номер, 2);</ПередВыгрузкой>
					</Свойство>
					<Свойство>
						<Код>7</Код>
						<Наименование>Номер --&gt; НомерЭД</Наименование>
						<Порядок>300</Порядок>
						<Источник Имя="Номер" Вид="Свойство" Тип="Строка"/>
						<Приемник Имя="НомерЭД" Вид="Реквизит" Тип="Строка"/>
						<ПриВыгрузке>Значение = ОбщегоНазначения.ПолучитьНомерНаПечать(Источник);</ПриВыгрузке>
					</Свойство>
					<Свойство>
						<Код>9</Код>
						<Наименование>ВалютаДокумента --&gt; Валюта</Наименование>
						<Порядок>350</Порядок>
						<Источник Имя="ВалютаДокумента" Вид="Реквизит" Тип="СправочникСсылка.Валюты"/>
						<Приемник Имя="Валюта" Вид="Реквизит" Тип="СправочникСсылка.Валюты"/>
						<КодПравилаКонвертации>Валюты                                            </КодПравилаКонвертации>
					</Свойство>
					<Свойство>
						<Код>4</Код>
						<Наименование>Организация --&gt; Организация</Наименование>
						<Порядок>400</Порядок>
						<Источник Имя="Организация" Вид="Реквизит" Тип="СправочникСсылка.Организации"/>
						<Приемник Имя="Организация" Вид="Реквизит" Тип="СправочникСсылка.Организации"/>
						<КодПравилаКонвертации>Организации                                       </КодПравилаКонвертации>
					</Свойство>
					<Свойство>
						<Код>3</Код>
						<Наименование>Контрагент --&gt; Контрагент</Наименование>
						<Порядок>450</Порядок>
						<Источник Имя="Контрагент" Вид="Реквизит" Тип="СправочникСсылка.Контрагенты"/>
						<Приемник Имя="Контрагент" Вид="Реквизит" Тип="СправочникСсылка.Контрагенты"/>
						<КодПравилаКонвертации>Контрагенты                                       </КодПравилаКонвертации>
					</Свойство>
					<Свойство>
						<Код>2</Код>
						<Наименование>ДоговорКонтрагента --&gt; ДоговорКонтрагента</Наименование>
						<Порядок>500</Порядок>
						<Источник Имя="ДоговорКонтрагента" Вид="Реквизит" Тип="СправочникСсылка.ДоговорыКонтрагентов"/>
						<Приемник Имя="ДоговорКонтрагента" Вид="Реквизит" Тип="СправочникСсылка.ДоговорыКонтрагентов"/>
						<КодПравилаКонвертации>ДоговорыКонтрагентов                              </КодПравилаКонвертации>
					</Свойство>
					<Свойство>
						<Код>5</Код>
						<Наименование>СуммаДокумента --&gt; СуммаДокумента</Наименование>
						<Порядок>550</Порядок>
						<Источник Имя="СуммаДокумента" Вид="Реквизит" Тип="Число"/>
						<Приемник Имя="СуммаДокумента" Вид="Реквизит" Тип="Число"/>
					</Свойство>
					<Свойство>
						<Код>10</Код>
						<Наименование>СуммаВключаетНДС --&gt; ЦенаВключаетНДС</Наименование>
						<Порядок>600</Порядок>
						<Источник Имя="СуммаВключаетНДС" Вид="Реквизит" Тип="Булево"/>
						<Приемник Имя="ЦенаВключаетНДС" Вид="Реквизит" Тип="Булево"/>
					</Свойство>
					<Свойство>
						<Код>8</Код>
						<Наименование>ПометкаУдаления --&gt; ПометкаУдаления</Наименование>
						<Порядок>650</Порядок>
						<Источник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
						<Приемник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
					</Свойство>
					<Свойство>
						<Код>23</Код>
						<Наименование>Проведен --&gt; Проведен</Наименование>
						<Порядок>700</Порядок>
						<Источник Имя="Проведен" Вид="Свойство" Тип="Булево"/>
						<Приемник Имя="" Вид=""/>
						<ИмяПараметраДляПередачи>Проведен</ИмяПараметраДляПередачи>
					</Свойство>
				</Свойства>
				<Значения/>
			</Правило>
			<Правило>
				<Код>РеализацияТоваровУслуг</Код>
				<Наименование>Документ: Реализация товаров и услуг</Наименование>
				<Порядок>100</Порядок>
				<ПередВыгрузкой>ВходящиеДанные = Новый Структура;
ВходящиеДанные.Вставить("ВидДокумента");
ВходящиеДанные.Вставить("ВидОперации", "Реализация");

Если Источник.ВидОперации = Перечисления.ВидыОперацийРеализацияТоваров.АктВыполненныхРабот Тогда
	ВходящиеДанные.ВидДокумента = "АктВыполненныхРабот";
ИначеЕсли Источник.ВидОперации = Перечисления.ВидыОперацийРеализацияТоваров.АктНаПередачуПрав Тогда
	ВходящиеДанные.ВидДокумента = "АктНаПередачуПрав";
Иначе
	ВходящиеДанные.ВидДокумента = "ТоварнаяНакладная";
КонецЕсли;
</ПередВыгрузкой>
				<ПослеЗагрузки>Выполнить(Алгоритмы.ЗаполнитьОтветственногоПоДокументу);
Выполнить(Алгоритмы.УстановитьРежимЗаписиДокумента);
Выполнить(Алгоритмы.ПроверитьИзменениеКлючевыхРеквизитовДокумента);
</ПослеЗагрузки>
				<СинхронизироватьПоИдентификатору>true</СинхронизироватьПоИдентификатору>
				<ГенерироватьНовыйНомерИлиКодЕслиНеУказан>true</ГенерироватьНовыйНомерИлиКодЕслиНеУказан>
				<Источник>ДокументСсылка.РеализацияТоваровУслуг</Источник>
				<Приемник>ДокументСсылка.РеализацияТоваровУслуг</Приемник>
				<Свойства>
					<Группа>
						<Код>1</Код>
						<Наименование>Товары --&gt; Товары</Наименование>
						<Порядок>50</Порядок>
						<Источник Имя="Товары" Вид="ТабличнаяЧасть"/>
						<Приемник Имя="Товары" Вид="ТабличнаяЧасть"/>
						<ПередОбработкойВыгрузки>Запрос = Новый Запрос;
Запрос.Текст = 
	"ВЫБРАТЬ
	|	ТаблицаТовары.Номенклатура КАК Номенклатура,
	|	ТаблицаТовары.Номенклатура.Комплект КАК Комплект,
	|	ТаблицаТовары.Количество КАК Количество,
	|	ТаблицаТовары.Цена КАК Цена,
	|	ТаблицаТовары.Сумма КАК Сумма,
	|	ТаблицаТовары.СтавкаНДС КАК СтавкаНДС,
	|	ТаблицаТовары.СуммаНДС КАК СуммаНДС,
	|	ТаблицаТовары.ХарактеристикаНоменклатуры КАК ХарактеристикаНоменклатуры,
	|	ТаблицаТовары.ЕдиницаИзмерения КАК ЕдиницаИзмерения,
	|	ТаблицаТовары.ЕдиницаИзмерения.ЕдиницаПоКлассификатору КАК ЕдиницаПоКлассификатору,
	|	ТаблицаТовары.ЕдиницаИзмерения.Коэффициент КАК ЕдиницаИзмеренияКоэффициент,
	|	ТаблицаТовары.СерияНоменклатуры.НомерГТД.Код КАК НомерГТД,
	|	ТаблицаТовары.СерияНоменклатуры.СтранаПроисхождения КАК СтранаПроисхождения,
	|	ТаблицаТовары.КлючСвязи КАК КлючСвязи,
	|	ТаблицаТовары.КлючСтроки КАК КлючСтроки
	|ИЗ
	|	Документ.РеализацияТоваровУслуг.Товары КАК ТаблицаТовары
	|ГДЕ
	|	ТаблицаТовары.Ссылка = &amp;Ссылка
	|
	|ОБЪЕДИНИТЬ ВСЕ
	|
	|ВЫБРАТЬ
	|	ТаблицаУслуг.Номенклатура,
	|	ТаблицаУслуг.Номенклатура.Комплект,
	|	ТаблицаУслуг.Количество,
	|	ТаблицаУслуг.Цена,
	|	ТаблицаУслуг.Сумма,
	|	ТаблицаУслуг.СтавкаНДС,
	|	ТаблицаУслуг.СуммаНДС,
	|	NULL,
	|	NULL,
	|	ТаблицаУслуг.Номенклатура.БазоваяЕдиницаИзмерения,
	|	NULL,
	|	NULL,
	|	NULL,
	|	NULL,
	|	NULL
	|ИЗ
	|	Документ.РеализацияТоваровУслуг.Услуги КАК ТаблицаУслуг
	|ГДЕ
	|	ТаблицаУслуг.Ссылка = &amp;Ссылка";

Запрос.УстановитьПараметр("Ссылка", Источник.Ссылка);

ТаблицаТовары = Запрос.Выполнить().Выгрузить();
ТаблицаТовары = УправлениеЗапасами.СформироватьТаблицуКомплектующих(ТаблицаТовары, Источник.Ссылка);

КоллекцияОбъектов = ТаблицаТовары;
</ПередОбработкойВыгрузки>
						<ПриВыгрузке>Выполнить(Алгоритмы.ЗаполнитьСтавкуВСтрокеПоФлагуУчитыватьНДС);</ПриВыгрузке>
						<Свойство>
							<Код>4</Код>
							<Наименование>Номенклатура --&gt; Номенклатура</Наименование>
							<Порядок>50</Порядок>
							<Источник Имя="Номенклатура" Вид="Реквизит" Тип="СправочникСсылка.Номенклатура"/>
							<Приемник Имя="Номенклатура" Вид="Реквизит" Тип="СправочникСсылка.Номенклатура"/>
							<ПередВыгрузкой>ИсходящиеДанные = Новый Структура("СтавкаНДС", ОбъектКоллекции.СтавкаНДС);</ПередВыгрузкой>
						</Свойство>
						<Свойство>
							<Код>30</Код>
							<Наименование>ХарактеристикаНоменклатуры --&gt; Характеристика</Наименование>
							<Порядок>100</Порядок>
							<Источник Имя="ХарактеристикаНоменклатуры" Вид="Реквизит" Тип="СправочникСсылка.ХарактеристикиНоменклатуры"/>
							<Приемник Имя="Характеристика" Вид="Реквизит" Тип="СправочникСсылка.ХарактеристикиНоменклатуры"/>
							<КодПравилаКонвертации>ХарактеристикиНоменклатуры                        </КодПравилаКонвертации>
						</Свойство>
						<Свойство>
							<Код>2</Код>
							<Наименование>--&gt; ЕдиницаИзмерения</Наименование>
							<Порядок>150</Порядок>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="ЕдиницаИзмерения" Вид="Реквизит" Тип="СправочникСсылка.ЕдиницыИзмерения"/>
							<КодПравилаКонвертации>ЕдиницаПоКлассификатору                           </КодПравилаКонвертации>
							<ПередВыгрузкой>Если ЗначениеЗаполнено(ОбъектКоллекции.ЕдиницаПоКлассификатору) Тогда
	Значение = ОбъектКоллекции.ЕдиницаПоКлассификатору;
КонецЕсли;</ПередВыгрузкой>
						</Свойство>
						<Свойство>
							<Код>3</Код>
							<Наименование>Количество --&gt; Количество</Наименование>
							<Порядок>200</Порядок>
							<Источник Имя="Количество" Вид="Реквизит" Тип="Число"/>
							<Приемник Имя="Количество" Вид="Реквизит" Тип="Число"/>
							<ПередВыгрузкой>Если ЗначениеЗаполнено(ОбъектКоллекции.ЕдиницаИзмеренияКоэффициент) Тогда
	Значение = ОбъектКоллекции.ЕдиницаИзмеренияКоэффициент * ОбъектКоллекции.Количество;
КонецЕсли;</ПередВыгрузкой>
						</Свойство>
						<Свойство>
							<Код>8</Код>
							<Наименование>Цена --&gt; Цена</Наименование>
							<Порядок>250</Порядок>
							<Источник Имя="Цена" Вид="Реквизит" Тип="Число"/>
							<Приемник Имя="Цена" Вид="Реквизит" Тип="Число"/>
							<ПередВыгрузкой>Если ЗначениеЗаполнено(ОбъектКоллекции.ЕдиницаИзмеренияКоэффициент)
	И ОбъектКоллекции.Количество &lt;&gt; 0 Тогда
	Значение = ОбъектКоллекции.Сумма / (ОбъектКоллекции.Количество
		* ОбъектКоллекции.ЕдиницаИзмеренияКоэффициент);
КонецЕсли;</ПередВыгрузкой>
						</Свойство>
						<Свойство>
							<Код>6</Код>
							<Наименование>Сумма --&gt; Сумма</Наименование>
							<Порядок>300</Порядок>
							<Источник Имя="Сумма" Вид="Реквизит" Тип="Число"/>
							<Приемник Имя="Сумма" Вид="Реквизит" Тип="Число"/>
						</Свойство>
						<Свойство>
							<Код>5</Код>
							<Наименование>СтавкаНДС --&gt; СтавкаНДС</Наименование>
							<Порядок>350</Порядок>
							<Источник Имя="СтавкаНДС" Вид="Реквизит" Тип="ПеречислениеСсылка.СтавкиНДС"/>
							<Приемник Имя="СтавкаНДС" Вид="Реквизит" Тип="ПеречислениеСсылка.СтавкиНДС"/>
							<КодПравилаКонвертации>СтавкиНДС                                         </КодПравилаКонвертации>
						</Свойство>
						<Свойство>
							<Код>7</Код>
							<Наименование>СуммаНДС --&gt; СуммаНДС</Наименование>
							<Порядок>400</Порядок>
							<Источник Имя="СуммаНДС" Вид="Реквизит" Тип="Число"/>
							<Приемник Имя="СуммаНДС" Вид="Реквизит" Тип="Число"/>
						</Свойство>
						<Свойство>
							<Код>27</Код>
							<Наименование>--&gt; СуммаСНДС</Наименование>
							<Порядок>450</Порядок>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="СуммаСНДС" Вид="Реквизит" Тип="Число"/>
							<ПередВыгрузкой>Значение = ?(Источник.СуммаВключаетНДС,
	ОбъектКоллекции.Сумма,
	ОбъектКоллекции.Сумма + ОбъектКоллекции.СуммаНДС);</ПередВыгрузкой>
						</Свойство>
						<Свойство>
							<Код>25</Код>
							<Наименование>--&gt; НомерГТД</Наименование>
							<Порядок>500</Порядок>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="НомерГТД" Вид="Реквизит" Тип="Строка"/>
							<ПередВыгрузкой>Если ЗначениеЗаполнено(ОбъектКоллекции.НомерГТД) Тогда
	Значение = ОбъектКоллекции.НомерГТД;
КонецЕсли;</ПередВыгрузкой>
						</Свойство>
						<Свойство>
							<Код>26</Код>
							<Наименование>--&gt; СтранаПроисхождения</Наименование>
							<Порядок>550</Порядок>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="СтранаПроисхождения" Вид="Реквизит" Тип="СправочникСсылка.СтраныМира"/>
							<КодПравилаКонвертации>СтраныМира                                        </КодПравилаКонвертации>
							<ПередВыгрузкой>Если ЗначениеЗаполнено(ОбъектКоллекции.СтранаПроисхождения) Тогда
	Значение = ОбъектКоллекции.СтранаПроисхождения;
КонецЕсли;</ПередВыгрузкой>
						</Свойство>
					</Группа>
					<Свойство Поиск="true">
						<Код>24</Код>
						<Наименование>--&gt; ВидДокумента</Наименование>
						<Порядок>100</Порядок>
						<ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных>
						<Источник Имя="" Вид=""/>
						<Приемник Имя="ВидДокумента" Вид="Реквизит" Тип="ПеречислениеСсылка.ВидыДокументов"/>
					</Свойство>
					<Свойство Поиск="true">
						<Код>10</Код>
						<Наименование>--&gt; ВидОперации</Наименование>
						<Порядок>150</Порядок>
						<ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных>
						<Источник Имя="" Вид=""/>
						<Приемник Имя="ВидОперации" Вид="Реквизит" Тип="ПеречислениеСсылка.ВидыОпераций"/>
					</Свойство>
					<Свойство Поиск="true">
						<Код>19</Код>
						<Наименование>Дата --&gt; Дата</Наименование>
						<Порядок>200</Порядок>
						<Источник Имя="Дата" Вид="Свойство" Тип="Дата"/>
						<Приемник Имя="Дата" Вид="Свойство" Тип="Дата"/>
					</Свойство>
					<Свойство Поиск="true">
						<Код>28</Код>
						<Наименование>Номер --&gt; Номер</Наименование>
						<Порядок>250</Порядок>
						<Источник Имя="Номер" Вид="Свойство" Тип="Строка"/>
						<Приемник Имя="Номер" Вид="Свойство" Тип="Строка"/>
						<ПередВыгрузкой>Префикс = "";
Номер = Источник.Номер;
МассивПрефиксовДляОбхода = ОбщегоНазначения.СформироватьМассивПрефиксовДляРИБИОрганизации(Источник.Организация);
Для Каждого ТекущийПрефикс ИЗ МассивПрефиксовДляОбхода Цикл
	
	Если Найти(Номер, ТекущийПрефикс) = 1 Тогда 
		Номер = Сред(Номер, СтрДлина(ТекущийПрефикс) + 1);
		Префикс = Префикс + ТекущийПрефикс;
	КонецЕсли;
	
	Если Лев(Номер, 1) = "-" Тогда
		Номер = Сред(Номер, 2);
		Префикс = Префикс + "-";
	КонецЕсли;
	
КонецЦикла;

Значение = Префикс + "Р" + Сред(Номер, 2);</ПередВыгрузкой>
					</Свойство>
					<Свойство>
						<Код>20</Код>
						<Наименование>Номер --&gt; НомерЭД</Наименование>
						<Порядок>300</Порядок>
						<Источник Имя="Номер" Вид="Свойство" Тип="Строка"/>
						<Приемник Имя="НомерЭД" Вид="Реквизит" Тип="Строка"/>
						<ПередВыгрузкой>Значение = ОбщегоНазначения.ПолучитьНомерНаПечать(Источник);</ПередВыгрузкой>
					</Свойство>
					<Свойство>
						<Код>22</Код>
						<Наименование>ВалютаДокумента --&gt; Валюта</Наименование>
						<Порядок>350</Порядок>
						<Источник Имя="ВалютаДокумента" Вид="Реквизит" Тип="СправочникСсылка.Валюты"/>
						<Приемник Имя="Валюта" Вид="Реквизит" Тип="СправочникСсылка.Валюты"/>
						<КодПравилаКонвертации>Валюты                                            </КодПравилаКонвертации>
					</Свойство>
					<Свойство>
						<Код>16</Код>
						<Наименование>Организация --&gt; Организация</Наименование>
						<Порядок>400</Порядок>
						<Источник Имя="Организация" Вид="Реквизит" Тип="СправочникСсылка.Организации"/>
						<Приемник Имя="Организация" Вид="Реквизит" Тип="СправочникСсылка.Организации"/>
						<КодПравилаКонвертации>Организации                                       </КодПравилаКонвертации>
					</Свойство>
					<Свойство>
						<Код>15</Код>
						<Наименование>Контрагент --&gt; Контрагент</Наименование>
						<Порядок>450</Порядок>
						<Источник Имя="Контрагент" Вид="Реквизит" Тип="СправочникСсылка.Контрагенты"/>
						<Приемник Имя="Контрагент" Вид="Реквизит" Тип="СправочникСсылка.Контрагенты"/>
						<КодПравилаКонвертации>Контрагенты                                       </КодПравилаКонвертации>
					</Свойство>
					<Свойство>
						<Код>13</Код>
						<Наименование>ДоговорКонтрагента --&gt; ДоговорКонтрагента</Наименование>
						<Порядок>500</Порядок>
						<Источник Имя="ДоговорКонтрагента" Вид="Реквизит" Тип="СправочникСсылка.ДоговорыКонтрагентов"/>
						<Приемник Имя="ДоговорКонтрагента" Вид="Реквизит" Тип="СправочникСсылка.ДоговорыКонтрагентов"/>
						<КодПравилаКонвертации>ДоговорыКонтрагентов                              </КодПравилаКонвертации>
					</Свойство>
					<Свойство>
						<Код>9</Код>
						<Наименование>БанковскийСчетОрганизации --&gt; БанковскийСчетОрганизации</Наименование>
						<Порядок>550</Порядок>
						<Источник Имя="БанковскийСчетОрганизации" Вид="Реквизит" Тип="СправочникСсылка.БанковскиеСчета"/>
						<Приемник Имя="БанковскийСчетОрганизации" Вид="Реквизит" Тип="СправочникСсылка.БанковскиеСчета"/>
						<КодПравилаКонвертации>БанковскиеСчета                                   </КодПравилаКонвертации>
					</Свойство>
					<Свойство>
						<Код>11</Код>
						<Наименование>Грузоотправитель --&gt; Грузоотправитель</Наименование>
						<Порядок>600</Порядок>
						<Источник Имя="Грузоотправитель" Вид="Реквизит" Тип="СправочникСсылка.Контрагенты"/>
						<Приемник Имя="Грузоотправитель" Вид="Реквизит" Тип="СправочникСсылка.Контрагенты"/>
						<КодПравилаКонвертации>Контрагенты                                       </КодПравилаКонвертации>
					</Свойство>
					<Свойство>
						<Код>12</Код>
						<Наименование>Грузополучатель --&gt; Грузополучатель</Наименование>
						<Порядок>650</Порядок>
						<Источник Имя="Грузополучатель" Вид="Реквизит" Тип="СправочникСсылка.Контрагенты"/>
						<Приемник Имя="Грузополучатель" Вид="Реквизит" Тип="СправочникСсылка.Контрагенты"/>
						<КодПравилаКонвертации>Контрагенты                                       </КодПравилаКонвертации>
					</Свойство>
					<Свойство>
						<Код>18</Код>
						<Наименование>СуммаДокумента --&gt; СуммаДокумента</Наименование>
						<Порядок>700</Порядок>
						<Источник Имя="СуммаДокумента" Вид="Реквизит" Тип="Число"/>
						<Приемник Имя="СуммаДокумента" Вид="Реквизит" Тип="Число"/>
					</Свойство>
					<Свойство>
						<Код>23</Код>
						<Наименование>СуммаВключаетНДС --&gt; ЦенаВключаетНДС</Наименование>
						<Порядок>750</Порядок>
						<Источник Имя="СуммаВключаетНДС" Вид="Реквизит" Тип="Булево"/>
						<Приемник Имя="ЦенаВключаетНДС" Вид="Реквизит" Тип="Булево"/>
					</Свойство>
					<Свойство>
						<Код>21</Код>
						<Наименование>ПометкаУдаления --&gt; ПометкаУдаления</Наименование>
						<Порядок>800</Порядок>
						<Источник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
						<Приемник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
					</Свойство>
					<Свойство>
						<Код>29</Код>
						<Наименование>Проведен --&gt; Проведен</Наименование>
						<Порядок>850</Порядок>
						<Источник Имя="Проведен" Вид="Свойство" Тип="Булево"/>
						<Приемник Имя="" Вид=""/>
						<ИмяПараметраДляПередачи>Проведен</ИмяПараметраДляПередачи>
					</Свойство>
				</Свойства>
				<Значения/>
			</Правило>
			<Правило>
				<Код>КорректировкаРеализации</Код>
				<Наименование>Документ: Корректировка реализации</Наименование>
				<Порядок>150</Порядок>
				<ПередВыгрузкой>ВходящиеДанные = Новый Структура;
ВходящиеДанные.Вставить("ВидДокумента");
ВходящиеДанные.Вставить("ВидОперации");
ВходящиеДанные.Вставить("НомерИсправления");
ВходящиеДанные.Вставить("НомерИсходногоДокумента");
ВходящиеДанные.Вставить("ДатаИсходногоДокумента");
ВходящиеДанные.Вставить("НомерИсправленияИсходногоДокумента");
ВходящиеДанные.Вставить("ДатаИсправленияИсходногоДокумента");
ВходящиеДанные.Вставить("НомерИсправляемогоКорректировочногоДокумента");
ВходящиеДанные.Вставить("ДатаИсправляемогоКорректировочногоДокумента");

ИсходныйДокумент = Неопределено;
Если Источник.ВидОперации = Перечисления.ВидыОперацийИсправленияПоступленияРеализации.СогласованноеИзменение Тогда
	
	Если ТипЗнч(Источник.ДокументРеализации) = Тип("ДокументСсылка.КорректировкаРеализации") Тогда 
		
		ИсходныйДокумент = Источник.ИсправляемыйДокументРеализации;
		
		РеквизитыИсправляемогоДокумента = ОбщегоНазначения.ЗначенияРеквизитовОбъекта(Источник.ИсправляемыйДокументРеализации,
			"Номер, Дата, Организация");
		РеквизитыДокументаРеализации 	= ОбщегоНазначения.ЗначенияРеквизитовОбъекта(Источник.ДокументРеализации,
			"Номер, Дата, Организация, ВидОперации, ДокументРеализации, ИсправляемыйДокументРеализации");
		
		ВходящиеДанные.НомерИсходногоДокумента = ОбщегоНазначения.ПолучитьНомерНаПечать(РеквизитыИсправляемогоДокумента);
		ВходящиеДанные.ДатаИсходногоДокумента  = РеквизитыИсправляемогоДокумента.Дата;
		
		НомерИсправления = 0;
		ДатаИсправления  = Неопределено;
		Пока ЗначениеЗаполнено(РеквизитыДокументаРеализации.ДокументРеализации)
			И ЗначениеЗаполнено(РеквизитыДокументаРеализации.ИсправляемыйДокументРеализации)
			И РеквизитыДокументаРеализации.ИсправляемыйДокументРеализации = Источник.ИсправляемыйДокументРеализации
			И РеквизитыДокументаРеализации.ВидОперации = Перечисления.ВидыОперацийИсправленияПоступленияРеализации.ИсправлениеОшибки Цикл
			НомерИсправления = НомерИсправления + 1;
			Если ДатаИсправления = Неопределено Тогда
				ДатаИсправления = РеквизитыДокументаРеализации.Дата;
			КонецЕсли;
			
			Если ТипЗнч(РеквизитыДокументаРеализации.ДокументРеализации) = Тип("ДокументСсылка.КорректировкаРеализации") Тогда
				РеквизитыДокументаРеализации = ОбщегоНазначения.ЗначенияРеквизитовОбъекта(РеквизитыДокументаРеализации.ДокументРеализации,
					"Дата, ВидОперации, ДокументРеализации, ИсправляемыйДокументРеализации");
			Иначе
				Прервать;
			КонецЕсли;
		КонецЦикла;
		
		ВходящиеДанные.НомерИсправленияИсходногоДокумента = НомерИсправления;
		ВходящиеДанные.ДатаИсправленияИсходногоДокумента  = ДатаИсправления;
		
	Иначе
		
		ИсходныйДокумент = Источник.ДокументРеализации;
		
		РеквизитыДокументаРеализации = ОбщегоНазначения.ЗначенияРеквизитовОбъекта(Источник.ДокументРеализации,
			"Номер, Дата, Организация");
		
		ВходящиеДанные.НомерИсходногоДокумента = ОбщегоНазначения.ПолучитьНомерНаПечать(РеквизитыДокументаРеализации);
		ВходящиеДанные.ДатаИсходногоДокумента  = РеквизитыДокументаРеализации.Дата;
	КонецЕсли;
	
ИначеЕсли Источник.ВидОперации = Перечисления.ВидыОперацийИсправленияПоступленияРеализации.ИсправлениеОшибки Тогда
	
	Если ТипЗнч(Источник.ДокументРеализации) = Тип("ДокументСсылка.КорректировкаРеализации") Тогда
		
		ИсходныйДокумент = Источник.ИсправляемыйДокументРеализации;
		
		РеквизитыДокументаРеализации = ОбщегоНазначения.ЗначенияРеквизитовОбъекта(Источник.ДокументРеализации,
			"Номер, Дата, Организация, ВидОперации, ДокументРеализации, ИсправляемыйДокументРеализации");
		
		НомерИсправления = 0;
		ДатаИсправления  = Неопределено;
		Пока ЗначениеЗаполнено(РеквизитыДокументаРеализации.ДокументРеализации)
			И ЗначениеЗаполнено(РеквизитыДокументаРеализации.ИсправляемыйДокументРеализации)
			И РеквизитыДокументаРеализации.ИсправляемыйДокументРеализации = Источник.ИсправляемыйДокументРеализации
			И РеквизитыДокументаРеализации.ВидОперации = Перечисления.ВидыОперацийИсправленияПоступленияРеализации.ИсправлениеОшибки Цикл
			НомерИсправления = НомерИсправления + 1;
			Если ДатаИсправления = Неопределено Тогда
				ДатаИсправления = РеквизитыДокументаРеализации.Дата;
			КонецЕсли;
			
			Если ТипЗнч(РеквизитыДокументаРеализации.ДокументРеализации) = Тип("ДокументСсылка.КорректировкаРеализации") Тогда
				РеквизитыДокументаРеализации = ОбщегоНазначения.ЗначенияРеквизитовОбъекта(РеквизитыДокументаРеализации.ДокументРеализации,
					"Дата, ВидОперации, ДокументРеализации, ИсправляемыйДокументРеализации");
			Иначе
				Прервать;
			Конецесли;
		КонецЦикла;
		
		ВходящиеДанные.НомерИсправления = НомерИсправления + 1;
		
		Если ТипЗнч(Источник.ИсправляемыйДокументРеализации) = Тип("ДокументСсылка.КорректировкаРеализации") Тогда
			
			РеквизитыИсправляемогоКорректировочногоДокумента = ОбщегоНазначения.ЗначенияРеквизитовОбъекта(Источник.ИсправляемыйДокументРеализации,
				"Номер, Дата, Организация, ВидОперации, ДокументРеализации, ИсправляемыйДокументРеализации");
			
			ВходящиеДанные.НомерИсправляемогоКорректировочногоДокумента = 
				ОбщегоНазначения.ПолучитьНомерНаПечать(РеквизитыИсправляемогоКорректировочногоДокумента);
			ВходящиеДанные.ДатаИсправляемогоКорректировочногоДокумента = РеквизитыИсправляемогоКорректировочногоДокумента.Дата;
			
			РеквизитыИсправляемогоДокумента = ОбщегоНазначения.ЗначенияРеквизитовОбъекта(
				РеквизитыИсправляемогоКорректировочногоДокумента.ИсправляемыйДокументРеализации, "Ссылка, Номер, Дата, Организация");
				
			РеквизитыДокументаРеализации = ОбщегоНазначения.ЗначенияРеквизитовОбъекта(РеквизитыДокументаРеализации.ДокументРеализации,
				"Дата, ВидОперации, ДокументРеализации, ИсправляемыйДокументРеализации");
			
			ИсходныйДокумент = РеквизитыИсправляемогоДокумента.Ссылка;
			
			НомерИсправления = 0;
			ДатаИсправления  = Неопределено;
			Пока ЗначениеЗаполнено(РеквизитыДокументаРеализации.ДокументРеализации)
				И ЗначениеЗаполнено(РеквизитыДокументаРеализации.ИсправляемыйДокументРеализации)
				И РеквизитыДокументаРеализации.ИсправляемыйДокументРеализации = РеквизитыИсправляемогоДокумента.Ссылка
				И РеквизитыДокументаРеализации.ВидОперации = Перечисления.ВидыОперацийИсправленияПоступленияРеализации.ИсправлениеОшибки Цикл
				НомерИсправления = НомерИсправления + 1;
				Если ДатаИсправления = Неопределено Тогда
					ДатаИсправления = РеквизитыДокументаРеализации.Дата;
				КонецЕсли;
				
				Если ТипЗнч(РеквизитыДокументаРеализации.ДокументРеализации) = Тип("ДокументСсылка.КорректировкаРеализации") Тогда
					РеквизитыДокументаРеализации = ОбщегоНазначения.ЗначенияРеквизитовОбъекта(РеквизитыДокументаРеализации.ДокументРеализации,
						"Дата, ВидОперации, ДокументРеализации, ИсправляемыйДокументРеализации");
				Иначе
					Прервать;
				КонецЕсли;
			КонецЦикла;
		Иначе
			РеквизитыИсправляемогоДокумента = ОбщегоНазначения.ЗначенияРеквизитовОбъекта(Источник.ИсправляемыйДокументРеализации,
				"Номер, Дата, Организация");
		КонецЕсли;
			
		ВходящиеДанные.НомерИсходногоДокумента = ОбщегоНазначения.ПолучитьНомерНаПечать(РеквизитыИсправляемогоДокумента);
		ВходящиеДанные.ДатаИсходногоДокумента  = РеквизитыИсправляемогоДокумента.Дата;
		ВходящиеДанные.НомерИсправленияИсходногоДокумента = НомерИсправления;
		ВходящиеДанные.ДатаИсправленияИсходногоДокумента  =  ДатаИсправления;
		
	Иначе
		ИсходныйДокумент = Источник.ДокументРеализации;
		
		РеквизитыДокументаРеализации = ОбщегоНазначения.ЗначенияРеквизитовОбъекта(Источник.ДокументРеализации, "Номер, Дата, Организация");
		ВходящиеДанные.НомерИсправления = 1;
		ВходящиеДанные.НомерИсходногоДокумента = ОбщегоНазначения.ПолучитьНомерНаПечать(РеквизитыДокументаРеализации);
		ВходящиеДанные.ДатаИсходногоДокумента  = РеквизитыДокументаРеализации.Дата;
	КонецЕсли;
	
КонецЕсли;

Если Источник.ВидОперации = Перечисления.ВидыОперацийИсправленияПоступленияРеализации.СогласованноеИзменение Тогда
	ВходящиеДанные.ВидОперации = "Корректировка";
Иначе
	ВходящиеДанные.ВидОперации = "Исправление";
КонецЕсли;

Пока ЗначениеЗаполнено(ИсходныйДокумент)
	И ТипЗнч(ИсходныйДокумент) = Тип("ДокументСсылка.КорректировкаРеализации") Цикл
	ИсходныйДокумент = ОбщегоНазначения.ЗначениеРеквизитаОбъекта(ИсходныйДокумент, "ДокументРеализации");
КонецЦикла;

Если НЕ ЗначениеЗаполнено(ИсходныйДокумент) Тогда
	Отказ = Истина;
ИначеЕсли ТипЗнч(ИсходныйДокумент) = Тип("ДокументСсылка.РеализацияТоваровУслуг") Тогда
	ВидОперации = ОбщегоНазначения.ЗначениеРеквизитаОбъекта(ИсходныйДокумент, "ВидОперации");
	Если ВидОперации = Перечисления.ВидыОперацийРеализацияТоваров.АктВыполненныхРабот Тогда
		ВходящиеДанные.ВидДокумента = "АктВыполненныхРабот";
	ИначеЕсли ВидОперации = Перечисления.ВидыОперацийРеализацияТоваров.АктНаПередачуПрав Тогда
		ВходящиеДанные.ВидДокумента = "АктНаПередачуПрав";
	Иначе
		ВходящиеДанные.ВидДокумента = "ТоварнаяНакладная";
	КонецЕсли;
ИначеЕсли ТипЗнч(ИсходныйДокумент) = Тип("ДокументСсылка.АктОбОказанииПроизводственныхУслуг") Тогда
	ВходящиеДанные.ВидДокумента = "АктВыполненныхРабот";
Иначе
	Отказ = Истина;
КонецЕсли;</ПередВыгрузкой>
				<ПослеЗагрузки>Выполнить(Алгоритмы.ЗаполнитьОтветственногоПоДокументу);
Выполнить(Алгоритмы.УстановитьРежимЗаписиДокумента);
Выполнить(Алгоритмы.ПроверитьИзменениеКлючевыхРеквизитовДокумента);
</ПослеЗагрузки>
				<СинхронизироватьПоИдентификатору>true</СинхронизироватьПоИдентификатору>
				<Источник>ДокументСсылка.КорректировкаРеализации</Источник>
				<Приемник>ДокументСсылка.РеализацияТоваровУслуг</Приемник>
				<Свойства>
					<Группа>
						<Код>1</Код>
						<Наименование>Товары --&gt; Товары</Наименование>
						<Порядок>50</Порядок>
						<Источник Имя="Товары" Вид="ТабличнаяЧасть"/>
						<Приемник Имя="Товары" Вид="ТабличнаяЧасть"/>
						<ПередОбработкойВыгрузки>Запрос = Новый Запрос;
Запрос.Текст = 
	"ВЫБРАТЬ
	|	ТаблицаТовары.Номенклатура.Код КАК КодТовара,
	|	ТаблицаТовары.Номенклатура КАК Номенклатура,
	|	ТаблицаТовары.ХарактеристикаНоменклатуры КАК ХарактеристикаНоменклатуры,
	|	ТаблицаТовары.Номенклатура.Комплект КАК Комплект,
	|	ТаблицаТовары.КоличествоДоКорректировки КАК КоличествоДоКорректировки,
	|	ТаблицаТовары.Количество КАК Количество,
	|	ТаблицаТовары.ЦенаДоКорректировки КАК ЦенаДоКорректировки,
	|	ТаблицаТовары.Цена КАК Цена,
	|	ТаблицаТовары.СуммаДоКорректировки КАК СуммаДоКорректировки,
	|	ТаблицаТовары.Сумма КАК Сумма,
	|	ТаблицаТовары.СтавкаНДС КАК СтавкаНДС,
	|	ТаблицаТовары.СуммаНДСДоКорректировки КАК СуммаНДСДоКорректировки,
	|	ТаблицаТовары.СуммаНДС КАК СуммаНДС,
	|	ТаблицаТовары.ЕдиницаИзмерения КАК ЕдиницаИзмерения,
	|	ТаблицаТовары.ЕдиницаИзмерения.ЕдиницаПоКлассификатору КАК ЕдиницаПоКлассификатору,
	|	ТаблицаТовары.ЕдиницаИзмерения.Коэффициент КАК ЕдиницаИзмеренияКоэффициент,
	|	ТаблицаТовары.СерияНоменклатуры.НомерГТД.Код КАК НомерГТД,
	|	ТаблицаТовары.СерияНоменклатуры.СтранаПроисхождения КАК СтранаПроисхождения,
	|	ТаблицаТовары.КлючСвязи КАК КлючСвязи,
	|	ТаблицаТовары.КлючСтроки КАК КлючСтроки
	|ИЗ
	|	Документ.КорректировкаРеализации.Товары КАК ТаблицаТовары
	|ГДЕ
	|	ТаблицаТовары.Ссылка = &amp;Ссылка
	|	И (ТаблицаТовары.Количество &gt; 0
	|				И ТаблицаТовары.КоличествоДоКорректировки = 0
	|			ИЛИ ТаблицаТовары.КоличествоДоКорректировки &gt; 0)
	|
	|ОБЪЕДИНИТЬ ВСЕ
	|
	|ВЫБРАТЬ
	|	ТаблицаУслуг.Номенклатура.Код,
	|	ТаблицаУслуг.Номенклатура,
	|	NULL,
	|	ТаблицаУслуг.Номенклатура.Комплект,
	|	ТаблицаУслуг.КоличествоДоКорректировки,
	|	ТаблицаУслуг.Количество,
	|	ТаблицаУслуг.ЦенаДоКорректировки,
	|	ТаблицаУслуг.Цена,
	|	ТаблицаУслуг.СуммаДоКорректировки,
	|	ТаблицаУслуг.Сумма,
	|	ТаблицаУслуг.СтавкаНДС,
	|	ТаблицаУслуг.СуммаНДСДоКорректировки,
	|	ТаблицаУслуг.СуммаНДС,
	|	NULL,
	|	ТаблицаУслуг.Номенклатура.БазоваяЕдиницаИзмерения,
	|	NULL,
	|	NULL,
	|	NULL,
	|	NULL,
	|	NULL
	|ИЗ
	|	Документ.КорректировкаРеализации.Услуги КАК ТаблицаУслуг
	|ГДЕ
	|	ТаблицаУслуг.Ссылка = &amp;Ссылка
	|	И (ТаблицаУслуг.Количество &gt; 0
	|			И ТаблицаУслуг.КоличествоДоКорректировки = 0
	|		ИЛИ ТаблицаУслуг.КоличествоДоКорректировки &gt; 0)";

Запрос.УстановитьПараметр("Ссылка", Источник.Ссылка);

ТаблицаТовары = Запрос.Выполнить().Выгрузить();
ТаблицаТовары = УправлениеЗапасами.СформироватьТаблицуКомплектующих(ТаблицаТовары, Источник);

КоллекцияОбъектов = ТаблицаТовары;
</ПередОбработкойВыгрузки>
						<ПриВыгрузке>Выполнить(Алгоритмы.ЗаполнитьСтавкуВСтрокеПоФлагуУчитыватьНДС);</ПриВыгрузке>
						<Свойство>
							<Код>5</Код>
							<Наименование>Номенклатура --&gt; Номенклатура</Наименование>
							<Порядок>50</Порядок>
							<Источник Имя="Номенклатура" Вид="Реквизит"/>
							<Приемник Имя="Номенклатура" Вид="Реквизит" Тип="СправочникСсылка.Номенклатура"/>
							<КодПравилаКонвертации>Номенклатура                                      </КодПравилаКонвертации>
							<ПередВыгрузкой>ИсходящиеДанные = Новый Структура("СтавкаНДС", ОбъектКоллекции.СтавкаНДС);</ПередВыгрузкой>
						</Свойство>
						<Свойство>
							<Код>43</Код>
							<Наименование>ХарактеристикаНоменклатуры --&gt; Характеристика</Наименование>
							<Порядок>100</Порядок>
							<Источник Имя="ХарактеристикаНоменклатуры" Вид="Реквизит" Тип="СправочникСсылка.ХарактеристикиНоменклатуры"/>
							<Приемник Имя="Характеристика" Вид="Реквизит" Тип="СправочникСсылка.ХарактеристикиНоменклатуры"/>
							<КодПравилаКонвертации>ХарактеристикиНоменклатуры                        </КодПравилаКонвертации>
						</Свойство>
						<Свойство>
							<Код>2</Код>
							<Наименование>--&gt; ЕдиницаИзмерения</Наименование>
							<Порядок>150</Порядок>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="ЕдиницаИзмерения" Вид="Реквизит" Тип="СправочникСсылка.ЕдиницыИзмерения"/>
							<КодПравилаКонвертации>ЕдиницаПоКлассификатору                           </КодПравилаКонвертации>
							<ПередВыгрузкой>Если ЗначениеЗаполнено(ОбъектКоллекции.ЕдиницаПоКлассификатору) Тогда
	Значение = ОбъектКоллекции.ЕдиницаПоКлассификатору;
КонецЕсли;</ПередВыгрузкой>
						</Свойство>
						<Свойство>
							<Код>4</Код>
							<Наименование>КоличествоДоКорректировки --&gt; КоличествоДоКорректировки</Наименование>
							<Порядок>200</Порядок>
							<Источник Имя="КоличествоДоКорректировки" Вид="Реквизит" Тип="Число"/>
							<Приемник Имя="КоличествоДоКорректировки" Вид="Реквизит" Тип="Число"/>
							<ПередВыгрузкой>Если ЗначениеЗаполнено(ОбъектКоллекции.ЕдиницаИзмеренияКоэффициент) Тогда
	Значение = ОбъектКоллекции.ЕдиницаИзмеренияКоэффициент * ОбъектКоллекции.КоличествоДоКорректировки;
КонецЕсли;</ПередВыгрузкой>
						</Свойство>
						<Свойство>
							<Код>3</Код>
							<Наименование>Количество --&gt; Количество</Наименование>
							<Порядок>250</Порядок>
							<Источник Имя="Количество" Вид="Реквизит" Тип="Число"/>
							<Приемник Имя="Количество" Вид="Реквизит" Тип="Число"/>
							<ПередВыгрузкой>Если ЗначениеЗаполнено(ОбъектКоллекции.ЕдиницаИзмеренияКоэффициент) Тогда
	Значение = ОбъектКоллекции.ЕдиницаИзмеренияКоэффициент * ОбъектКоллекции.Количество;
КонецЕсли;</ПередВыгрузкой>
						</Свойство>
						<Свойство>
							<Код>12</Код>
							<Наименование>ЦенаДоКорректировки --&gt; ЦенаДоКорректировки</Наименование>
							<Порядок>300</Порядок>
							<Источник Имя="ЦенаДоКорректировки" Вид="Реквизит" Тип="Число"/>
							<Приемник Имя="ЦенаДоКорректировки" Вид="Реквизит" Тип="Число"/>
							<ПередВыгрузкой>Если ЗначениеЗаполнено(ОбъектКоллекции.ЕдиницаИзмеренияКоэффициент)
	И ОбъектКоллекции.КоличествоДоКорректировки &lt;&gt; 0 Тогда
	Значение = ОбъектКоллекции.СуммаДоКорректировки / (ОбъектКоллекции.КоличествоДоКорректировки
		* ОбъектКоллекции.ЕдиницаИзмеренияКоэффициент);
КонецЕсли;</ПередВыгрузкой>
						</Свойство>
						<Свойство>
							<Код>11</Код>
							<Наименование>Цена --&gt; Цена</Наименование>
							<Порядок>350</Порядок>
							<Источник Имя="Цена" Вид="Реквизит" Тип="Число"/>
							<Приемник Имя="Цена" Вид="Реквизит" Тип="Число"/>
							<ПередВыгрузкой>Если ЗначениеЗаполнено(ОбъектКоллекции.ЕдиницаИзмеренияКоэффициент)
	И ОбъектКоллекции.Количество &lt;&gt; 0 Тогда
	Значение = ОбъектКоллекции.Сумма / (ОбъектКоллекции.Количество
		* ОбъектКоллекции.ЕдиницаИзмеренияКоэффициент);
КонецЕсли;</ПередВыгрузкой>
						</Свойство>
						<Свойство>
							<Код>8</Код>
							<Наименование>СуммаДоКорректировки --&gt; СуммаДоКорректировки</Наименование>
							<Порядок>400</Порядок>
							<Источник Имя="СуммаДоКорректировки" Вид="Реквизит" Тип="Число"/>
							<Приемник Имя="СуммаДоКорректировки" Вид="Реквизит" Тип="Число"/>
						</Свойство>
						<Свойство>
							<Код>7</Код>
							<Наименование>Сумма --&gt; Сумма</Наименование>
							<Порядок>450</Порядок>
							<Источник Имя="Сумма" Вид="Реквизит" Тип="Число"/>
							<Приемник Имя="Сумма" Вид="Реквизит" Тип="Число"/>
						</Свойство>
						<Свойство>
							<Код>6</Код>
							<Наименование>СтавкаНДС --&gt; СтавкаНДС</Наименование>
							<Порядок>500</Порядок>
							<Источник Имя="СтавкаНДС" Вид="Реквизит" Тип="ПеречислениеСсылка.СтавкиНДС"/>
							<Приемник Имя="СтавкаНДС" Вид="Реквизит" Тип="ПеречислениеСсылка.СтавкиНДС"/>
							<КодПравилаКонвертации>СтавкиНДС                                         </КодПравилаКонвертации>
						</Свойство>
						<Свойство>
							<Код>10</Код>
							<Наименование>СуммаНДСДоКорректировки --&gt; СуммаНДСДоКорректировки</Наименование>
							<Порядок>550</Порядок>
							<Источник Имя="СуммаНДСДоКорректировки" Вид="Реквизит" Тип="Число"/>
							<Приемник Имя="СуммаНДСДоКорректировки" Вид="Реквизит" Тип="Число"/>
						</Свойство>
						<Свойство>
							<Код>9</Код>
							<Наименование>СуммаНДС --&gt; СуммаНДС</Наименование>
							<Порядок>600</Порядок>
							<Источник Имя="СуммаНДС" Вид="Реквизит" Тип="Число"/>
							<Приемник Имя="СуммаНДС" Вид="Реквизит" Тип="Число"/>
						</Свойство>
						<Свойство>
							<Код>29</Код>
							<Наименование>--&gt; СуммаСНДСДоКорректировки</Наименование>
							<Порядок>650</Порядок>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="СуммаСНДСДоКорректировки" Вид="Реквизит" Тип="Число"/>
							<ПередВыгрузкой>Значение = ?(Источник.СуммаВключаетНДС,
	ОбъектКоллекции.СуммаДоКорректировки,
	ОбъектКоллекции.СуммаДоКорректировки + ОбъектКоллекции.СуммаНДСДоКорректировки);</ПередВыгрузкой>
						</Свойство>
						<Свойство>
							<Код>30</Код>
							<Наименование>--&gt; СуммаСНДС</Наименование>
							<Порядок>700</Порядок>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="СуммаСНДС" Вид="Реквизит" Тип="Число"/>
							<ПередВыгрузкой>Значение = ?(Источник.СуммаВключаетНДС,
	ОбъектКоллекции.Сумма,
	ОбъектКоллекции.Сумма + ОбъектКоллекции.СуммаНДС);</ПередВыгрузкой>
						</Свойство>
						<Свойство>
							<Код>31</Код>
							<Наименование>--&gt; НомерГТД</Наименование>
							<Порядок>750</Порядок>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="НомерГТД" Вид="Реквизит" Тип="Строка"/>
							<ПередВыгрузкой>Если ЗначениеЗаполнено(ОбъектКоллекции.НомерГТД) Тогда
	Значение = ОбъектКоллекции.НомерГТД;
КонецЕсли;</ПередВыгрузкой>
						</Свойство>
						<Свойство>
							<Код>32</Код>
							<Наименование>--&gt; СтранаПроисхождения</Наименование>
							<Порядок>800</Порядок>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="СтранаПроисхождения" Вид="Реквизит" Тип="СправочникСсылка.СтраныМира"/>
							<КодПравилаКонвертации>СтраныМира                                        </КодПравилаКонвертации>
							<ПередВыгрузкой>Если ЗначениеЗаполнено(ОбъектКоллекции.СтранаПроисхождения) Тогда
	Значение = ОбъектКоллекции.СтранаПроисхождения;
КонецЕсли;</ПередВыгрузкой>
						</Свойство>
					</Группа>
					<Свойство Поиск="true">
						<Код>28</Код>
						<Наименование>--&gt; ВидДокумента</Наименование>
						<Порядок>100</Порядок>
						<ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных>
						<Источник Имя="" Вид=""/>
						<Приемник Имя="ВидДокумента" Вид="Реквизит" Тип="ПеречислениеСсылка.ВидыДокументов"/>
					</Свойство>
					<Свойство Поиск="true">
						<Код>14</Код>
						<Наименование>--&gt; ВидОперации</Наименование>
						<Порядок>150</Порядок>
						<ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных>
						<Источник Имя="" Вид=""/>
						<Приемник Имя="ВидОперации" Вид="Реквизит" Тип="ПеречислениеСсылка.ВидыОпераций"/>
					</Свойство>
					<Свойство Поиск="true">
						<Код>21</Код>
						<Наименование>Дата --&gt; Дата</Наименование>
						<Порядок>200</Порядок>
						<Источник Имя="Дата" Вид="Свойство" Тип="Дата"/>
						<Приемник Имя="Дата" Вид="Свойство" Тип="Дата"/>
					</Свойство>
					<Свойство Поиск="true">
						<Код>33</Код>
						<Наименование>Номер --&gt; Номер</Наименование>
						<Порядок>250</Порядок>
						<Источник Имя="Номер" Вид="Свойство" Тип="Строка"/>
						<Приемник Имя="Номер" Вид="Свойство" Тип="Строка"/>
						<ПередВыгрузкой>Префикс = "";
Номер = Источник.Номер;
МассивПрефиксовДляОбхода = ОбщегоНазначения.СформироватьМассивПрефиксовДляРИБИОрганизации(Источник.Организация);
Для Каждого ТекущийПрефикс ИЗ МассивПрефиксовДляОбхода Цикл
	
	Если Найти(Номер, ТекущийПрефикс) = 1 Тогда 
		Номер = Сред(Номер, СтрДлина(ТекущийПрефикс) + 1);
		Префикс = Префикс + ТекущийПрефикс;
	КонецЕсли;
	
	Если Лев(Номер, 1) = "-" Тогда
		Номер = Сред(Номер, 2);
		Префикс = Префикс + "-";
	КонецЕсли;
	
КонецЦикла;

Значение = Префикс + "К" + Сред(Номер, 2);</ПередВыгрузкой>
					</Свойство>
					<Свойство>
						<Код>22</Код>
						<Наименование>Номер --&gt; НомерЭД</Наименование>
						<Порядок>300</Порядок>
						<Источник Имя="Номер" Вид="Свойство" Тип="Строка"/>
						<Приемник Имя="НомерЭД" Вид="Реквизит" Тип="Строка"/>
						<ПередВыгрузкой>Если Источник.ВидОперации = Перечисления.ВидыОперацийИсправленияПоступленияРеализации.ИсправлениеОшибки Тогда
	Если ЗначениеЗаполнено(ВходящиеДанные.НомерИсправляемогоКорректировочногоДокумента) Тогда
		Значение = ВходящиеДанные.НомерИсправляемогоКорректировочногоДокумента;
	Иначе
		Значение = ВходящиеДанные.НомерИсходногоДокумента;
	КонецЕсли;
Иначе
	Значение = ОбщегоНазначения.ПолучитьНомерНаПечать(Источник);
КонецЕсли;</ПередВыгрузкой>
					</Свойство>
					<Свойство>
						<Код>26</Код>
						<Наименование>ДокументРеализации --&gt; ДокументОснование</Наименование>
						<Порядок>350</Порядок>
						<Источник Имя="ДокументРеализации" Вид="Реквизит"/>
						<Приемник Имя="ДокументОснование" Вид="Реквизит" Тип="ДокументСсылка.РеализацияТоваровУслуг"/>
					</Свойство>
					<Свойство>
						<Код>25</Код>
						<Наименование>ВалютаДокумента --&gt; Валюта</Наименование>
						<Порядок>400</Порядок>
						<Источник Имя="ВалютаДокумента" Вид="Реквизит" Тип="СправочникСсылка.Валюты"/>
						<Приемник Имя="Валюта" Вид="Реквизит" Тип="СправочникСсылка.Валюты"/>
						<КодПравилаКонвертации>Валюты                                            </КодПравилаКонвертации>
					</Свойство>
					<Свойство>
						<Код>19</Код>
						<Наименование>Организация --&gt; Организация</Наименование>
						<Порядок>450</Порядок>
						<Источник Имя="Организация" Вид="Реквизит" Тип="СправочникСсылка.Организации"/>
						<Приемник Имя="Организация" Вид="Реквизит" Тип="СправочникСсылка.Организации"/>
						<КодПравилаКонвертации>Организации                                       </КодПравилаКонвертации>
					</Свойство>
					<Свойство>
						<Код>18</Код>
						<Наименование>Контрагент --&gt; Контрагент</Наименование>
						<Порядок>500</Порядок>
						<Источник Имя="Контрагент" Вид="Реквизит" Тип="СправочникСсылка.Контрагенты"/>
						<Приемник Имя="Контрагент" Вид="Реквизит" Тип="СправочникСсылка.Контрагенты"/>
						<КодПравилаКонвертации>Контрагенты                                       </КодПравилаКонвертации>
					</Свойство>
					<Свойство>
						<Код>17</Код>
						<Наименование>ДоговорКонтрагента --&gt; ДоговорКонтрагента</Наименование>
						<Порядок>550</Порядок>
						<Источник Имя="ДоговорКонтрагента" Вид="Реквизит" Тип="СправочникСсылка.ДоговорыКонтрагентов"/>
						<Приемник Имя="ДоговорКонтрагента" Вид="Реквизит" Тип="СправочникСсылка.ДоговорыКонтрагентов"/>
						<КодПравилаКонвертации>ДоговорыКонтрагентов                              </КодПравилаКонвертации>
					</Свойство>
					<Свойство>
						<Код>13</Код>
						<Наименование>БанковскийСчетОрганизации --&gt; БанковскийСчетОрганизации</Наименование>
						<Порядок>600</Порядок>
						<Источник Имя="БанковскийСчетОрганизации" Вид="Реквизит" Тип="СправочникСсылка.БанковскиеСчета"/>
						<Приемник Имя="БанковскийСчетОрганизации" Вид="Реквизит" Тип="СправочникСсылка.БанковскиеСчета"/>
						<КодПравилаКонвертации>БанковскиеСчета                                   </КодПравилаКонвертации>
					</Свойство>
					<Свойство>
						<Код>15</Код>
						<Наименование>Грузоотправитель --&gt; Грузоотправитель</Наименование>
						<Порядок>650</Порядок>
						<Источник Имя="Грузоотправитель" Вид="Реквизит" Тип="СправочникСсылка.Контрагенты"/>
						<Приемник Имя="Грузоотправитель" Вид="Реквизит" Тип="СправочникСсылка.Контрагенты"/>
						<КодПравилаКонвертации>Контрагенты                                       </КодПравилаКонвертации>
					</Свойство>
					<Свойство>
						<Код>16</Код>
						<Наименование>Грузополучатель --&gt; Грузополучатель</Наименование>
						<Порядок>700</Порядок>
						<Источник Имя="Грузополучатель" Вид="Реквизит" Тип="СправочникСсылка.Контрагенты"/>
						<Приемник Имя="Грузополучатель" Вид="Реквизит" Тип="СправочникСсылка.Контрагенты"/>
						<КодПравилаКонвертации>Контрагенты                                       </КодПравилаКонвертации>
					</Свойство>
					<Свойство>
						<Код>20</Код>
						<Наименование>СуммаДокумента --&gt; СуммаДокумента</Наименование>
						<Порядок>750</Порядок>
						<Источник Имя="СуммаДокумента" Вид="Реквизит" Тип="Число"/>
						<Приемник Имя="СуммаДокумента" Вид="Реквизит" Тип="Число"/>
					</Свойство>
					<Свойство>
						<Код>27</Код>
						<Наименование>СуммаВключаетНДС --&gt; ЦенаВключаетНДС</Наименование>
						<Порядок>800</Порядок>
						<Источник Имя="СуммаВключаетНДС" Вид="Реквизит" Тип="Булево"/>
						<Приемник Имя="ЦенаВключаетНДС" Вид="Реквизит" Тип="Булево"/>
					</Свойство>
					<Свойство>
						<Код>23</Код>
						<Наименование>ПометкаУдаления --&gt; ПометкаУдаления</Наименование>
						<Порядок>850</Порядок>
						<Источник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
						<Приемник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
					</Свойство>
					<Свойство>
						<Код>39</Код>
						<Наименование>--&gt; НомерИсправления</Наименование>
						<Порядок>900</Порядок>
						<ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных>
						<Источник Имя="" Вид=""/>
						<Приемник Имя="НомерИсправления" Вид="Реквизит" Тип="Число"/>
					</Свойство>
					<Свойство>
						<Код>42</Код>
						<Наименование>--&gt; НомерИсходногоДокумента</Наименование>
						<Порядок>950</Порядок>
						<ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных>
						<Источник Имя="" Вид=""/>
						<Приемник Имя="НомерИсходногоДокумента" Вид="Реквизит" Тип="Строка"/>
					</Свойство>
					<Свойство>
						<Код>38</Код>
						<Наименование>--&gt; ДатаИсходногоДокумента</Наименование>
						<Порядок>1000</Порядок>
						<ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных>
						<Источник Имя="" Вид=""/>
						<Приемник Имя="ДатаИсходногоДокумента" Вид="Реквизит" Тип="Дата"/>
					</Свойство>
					<Свойство>
						<Код>40</Код>
						<Наименование>--&gt; НомерИсправленияИсходногоДокумента</Наименование>
						<Порядок>1050</Порядок>
						<ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных>
						<Источник Имя="" Вид=""/>
						<Приемник Имя="НомерИсправленияИсходногоДокумента" Вид="Реквизит" Тип="Число"/>
					</Свойство>
					<Свойство>
						<Код>36</Код>
						<Наименование>--&gt; ДатаИсправленияИсходногоДокумента</Наименование>
						<Порядок>1100</Порядок>
						<ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных>
						<Источник Имя="" Вид=""/>
						<Приемник Имя="ДатаИсправленияИсходногоДокумента" Вид="Реквизит" Тип="Дата"/>
					</Свойство>
					<Свойство>
						<Код>41</Код>
						<Наименование>--&gt; НомерИсправляемогоКорректировочногоДокумента</Наименование>
						<Порядок>1150</Порядок>
						<ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных>
						<Источник Имя="" Вид=""/>
						<Приемник Имя="НомерИсправляемогоКорректировочногоДокумента" Вид="Реквизит" Тип="Строка"/>
					</Свойство>
					<Свойство>
						<Код>37</Код>
						<Наименование>--&gt; ДатаИсправляемогоКорректировочногоДокумента</Наименование>
						<Порядок>1200</Порядок>
						<ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных>
						<Источник Имя="" Вид=""/>
						<Приемник Имя="ДатаИсправляемогоКорректировочногоДокумента" Вид="Реквизит" Тип="Дата"/>
					</Свойство>
					<Свойство>
						<Код>34</Код>
						<Наименование>Проведен --&gt; Проведен</Наименование>
						<Порядок>1250</Порядок>
						<Источник Имя="Проведен" Вид="Свойство" Тип="Булево"/>
						<Приемник Имя="" Вид=""/>
						<ИмяПараметраДляПередачи>Проведен</ИмяПараметраДляПередачи>
					</Свойство>
				</Свойства>
				<Значения/>
			</Правило>
			<Правило>
				<Код>СчетФактураВыданный</Код>
				<Наименование>Документ: Счет-фактура выданный</Наименование>
				<Порядок>200</Порядок>
				<ПередВыгрузкой>ВходящиеДанные = Новый Структура;
ВходящиеДанные.Вставить("ВидДокумента");
ВходящиеДанные.Вставить("ВидОперации");
ВходящиеДанные.Вставить("НомерИсходногоДокумента", Источник.НомерИсходногоДокумента);
ВходящиеДанные.Вставить("ДатаИсходногоДокумента",  Источник.ДатаИсходногоДокумента);
ВходящиеДанные.Вставить("НомерИсправленияИсходногоДокумента");
ВходящиеДанные.Вставить("ДатаИсправленияИсходногоДокумента");

Если Источник.ВидСчетаФактуры = Перечисления.ВидСчетаФактурыВыставленного.НаРеализацию Тогда
	ВходящиеДанные.ВидДокумента = "СчетФактура";
	Если Источник.Исправление Тогда
		ВходящиеДанные.ВидОперации = "Исправление";
	Иначе
		ВходящиеДанные.ВидОперации = "Реализация";
	КонецЕсли;	
ИначеЕсли Источник.ВидСчетаФактуры = Перечисления.ВидСчетаФактурыВыставленного.НаАванс Тогда
	ВходящиеДанные.ВидДокумента = "СчетФактураНаАванс";
	ВходящиеДанные.ВидОперации  = "Реализация";
ИначеЕсли Источник.ВидСчетаФактуры = Перечисления.ВидСчетаФактурыВыставленного.Корректировочный Тогда
	ВходящиеДанные.ВидДокумента = "СчетФактура";
	Если Источник.Исправление Тогда
		ВходящиеДанные.ВидОперации = "Исправление";
	Иначе
		ВходящиеДанные.ВидОперации = "Корректировка";
	КонецЕсли;
	Запрос = Новый Запрос;
	Запрос.Текст = "
	|ВЫБРАТЬ
	|	СУММА(ВЫРАЗИТЬ(СчетФактураВыданныйДокументыОснования.ДокументОснование КАК Документ.КорректировкаРеализации).СуммаДокумента) КАК СуммаОснования
	|ИЗ
	|	Документ.СчетФактураВыданный.ДокументыОснования КАК СчетФактураВыданныйДокументыОснования
	|ГДЕ
	|	СчетФактураВыданныйДокументыОснования.ДокументОснование ССЫЛКА Документ.КорректировкаРеализации
	|	И СчетФактураВыданныйДокументыОснования.Ссылка = &amp;Ссылка";
	Запрос.УстановитьПараметр("Ссылка",	Источник.Ссылка);
	Выборка = Запрос.Выполнить().Выбрать();
	Если Выборка.Следующий() Тогда
		ВходящиеДанные.Вставить("СуммаДокумента", Выборка.СуммаОснования);	
	КонецЕсли;
	
	Если Источник.ДокументыОснования.Количество() Тогда
		СтрокаОснования = Источник.ДокументыОснования[0];
		ВходящиеДанные.НомерИсходногоДокумента = СтрокаОснования.НомерИсходногоДокумента;
		ВходящиеДанные.ДатаИсходногоДокумента  = СтрокаОснования.ДатаИсходногоДокумента;
		ВходящиеДанные.НомерИсправленияИсходногоДокумента = СтрокаОснования.НомерИсправленияИсходногоДокумента;
		ВходящиеДанные.ДатаИсправленияИсходногоДокумента  = СтрокаОснования.ДатаИсправленияИсходногоДокумента;
	КонецЕсли;
Иначе
	Отказ = Истина;
КонецЕсли;</ПередВыгрузкой>
				<ПослеЗагрузки>Выполнить(Алгоритмы.ЗаполнитьОтветственногоПоДокументу);
Выполнить(Алгоритмы.УстановитьРежимЗаписиДокумента);
Выполнить(Алгоритмы.ПроверитьИзменениеКлючевыхРеквизитовДокумента);

Если Объект.ВидДокумента = Перечисления.ВидыДокументов.СчетФактураНаАванс
	И Объект.ДокументыОснования.Количество() Тогда
	Объект.ДокументыОснования.Очистить();
ИначеЕсли Объект.ДокументыОснования.Количество() Тогда
	ДокументОснование = Объект.ДокументыОснования[0].ДокументОснование;
	Если ЗначениеЗаполнено(ДокументОснование) Тогда
		Объект.ЦенаВключаетНДС = ОбщегоНазначения.ЗначениеРеквизитаОбъекта(
			ДокументОснование, "ЦенаВключаетНДС");
	КонецЕсли;
КонецЕсли;</ПослеЗагрузки>
				<СинхронизироватьПоИдентификатору>true</СинхронизироватьПоИдентификатору>
				<Источник>ДокументСсылка.СчетФактураВыданный</Источник>
				<Приемник>ДокументСсылка.СчетФактураВыданный</Приемник>
				<Свойства>
					<Группа>
						<Код>1</Код>
						<Наименование>ДокументыОснования --&gt; ДокументыОснования</Наименование>
						<Порядок>50</Порядок>
						<Источник Имя="ДокументыОснования" Вид="ТабличнаяЧасть"/>
						<Приемник Имя="ДокументыОснования" Вид="ТабличнаяЧасть"/>
						<ПередОбработкойВыгрузки>Если Источник.ВидСчетаФактуры = Перечисления.ВидСчетаФактурыВыставленного.НаАванс Тогда
	Отказ = Истина;
КонецЕсли;
</ПередОбработкойВыгрузки>
						<Свойство>
							<Код>2</Код>
							<Наименование>ДокументОснование --&gt; ДокументОснование</Наименование>
							<Порядок>50</Порядок>
							<Источник Имя="ДокументОснование" Вид="Реквизит"/>
							<Приемник Имя="ДокументОснование" Вид="Реквизит" Тип="ДокументСсылка.РеализацияТоваровУслуг"/>
						</Свойство>
					</Группа>
					<Группа>
						<Код>18</Код>
						<Наименование>Авансы --&gt; Товары</Наименование>
						<Порядок>100</Порядок>
						<Источник Имя="Авансы" Вид="ТабличнаяЧасть"/>
						<Приемник Имя="Товары" Вид="ТабличнаяЧасть"/>
						<Свойство>
							<Код>19</Код>
							<Наименование>Номенклатура --&gt; Номенклатура</Наименование>
							<Порядок>50</Порядок>
							<Источник Имя="Номенклатура" Вид="Реквизит" Тип="СправочникСсылка.Номенклатура"/>
							<Приемник Имя="Номенклатура" Вид="Реквизит" Тип="СправочникСсылка.Номенклатура"/>
							<КодПравилаКонвертации>Номенклатура                                      </КодПравилаКонвертации>
						</Свойство>
						<Свойство>
							<Код>21</Код>
							<Наименование>Сумма --&gt; Сумма</Наименование>
							<Порядок>100</Порядок>
							<Источник Имя="Сумма" Вид="Реквизит" Тип="Число"/>
							<Приемник Имя="Сумма" Вид="Реквизит" Тип="Число"/>
						</Свойство>
						<Свойство>
							<Код>20</Код>
							<Наименование>СтавкаНДС --&gt; СтавкаНДС</Наименование>
							<Порядок>150</Порядок>
							<Источник Имя="СтавкаНДС" Вид="Реквизит" Тип="ПеречислениеСсылка.СтавкиНДС"/>
							<Приемник Имя="СтавкаНДС" Вид="Реквизит" Тип="ПеречислениеСсылка.СтавкиНДС"/>
							<КодПравилаКонвертации>СтавкиНДС                                         </КодПравилаКонвертации>
						</Свойство>
						<Свойство>
							<Код>22</Код>
							<Наименование>СуммаНДС --&gt; СуммаНДС</Наименование>
							<Порядок>200</Порядок>
							<Источник Имя="СуммаНДС" Вид="Реквизит" Тип="Число"/>
							<Приемник Имя="СуммаНДС" Вид="Реквизит" Тип="Число"/>
						</Свойство>
						<Свойство>
							<Код>33</Код>
							<Наименование>Сумма --&gt; СуммаСНДС</Наименование>
							<Порядок>250</Порядок>
							<Источник Имя="Сумма" Вид="Реквизит" Тип="Число"/>
							<Приемник Имя="СуммаСНДС" Вид="Реквизит" Тип="Число"/>
						</Свойство>
					</Группа>
					<Группа>
						<Код>23</Код>
						<Наименование>ДатаНомерДокументовОплаты --&gt; ПлатежноРасчетныеДокументы</Наименование>
						<Порядок>150</Порядок>
						<Источник Имя="ДатаНомерДокументовОплаты" Вид="ТабличнаяЧасть"/>
						<Приемник Имя="ПлатежноРасчетныеДокументы" Вид="ТабличнаяЧасть"/>
						<ПередВыгрузкой>Если НЕ ЗначениеЗаполнено(ОбъектКоллекции.НомерПлатежноРасчетногоДокумента)
	И НЕ ЗначениеЗаполнено(ОбъектКоллекции.ДатаПлатежноРасчетногоДокумента) Тогда
 	Отказ = Истина;
КонецЕсли;
</ПередВыгрузкой>
						<Свойство>
							<Код>24</Код>
							<Наименование>ДатаПлатежноРасчетногоДокумента --&gt; ДатаПлатежноРасчетногоДокумента</Наименование>
							<Порядок>50</Порядок>
							<Источник Имя="ДатаПлатежноРасчетногоДокумента" Вид="Реквизит" Тип="Дата"/>
							<Приемник Имя="ДатаПлатежноРасчетногоДокумента" Вид="Реквизит" Тип="Дата"/>
						</Свойство>
						<Свойство>
							<Код>25</Код>
							<Наименование>НомерПлатежноРасчетногоДокумента --&gt; НомерПлатежноРасчетногоДокумента</Наименование>
							<Порядок>100</Порядок>
							<Источник Имя="НомерПлатежноРасчетногоДокумента" Вид="Реквизит" Тип="Строка"/>
							<Приемник Имя="НомерПлатежноРасчетногоДокумента" Вид="Реквизит" Тип="Строка"/>
						</Свойство>
					</Группа>
					<Свойство Поиск="true">
						<Код>26</Код>
						<Наименование>--&gt; ВидДокумента</Наименование>
						<Порядок>200</Порядок>
						<ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных>
						<Источник Имя="" Вид=""/>
						<Приемник Имя="ВидДокумента" Вид="Реквизит" Тип="ПеречислениеСсылка.ВидыДокументов"/>
					</Свойство>
					<Свойство Поиск="true">
						<Код>27</Код>
						<Наименование>--&gt; ВидОперации</Наименование>
						<Порядок>250</Порядок>
						<ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных>
						<Источник Имя="" Вид=""/>
						<Приемник Имя="ВидОперации" Вид="Реквизит" Тип="ПеречислениеСсылка.ВидыОпераций"/>
					</Свойство>
					<Свойство Поиск="true">
						<Код>14</Код>
						<Наименование>Дата --&gt; Дата</Наименование>
						<Порядок>300</Порядок>
						<Источник Имя="Дата" Вид="Свойство" Тип="Дата"/>
						<Приемник Имя="Дата" Вид="Свойство" Тип="Дата"/>
					</Свойство>
					<Свойство Поиск="true">
						<Код>28</Код>
						<Наименование>Номер --&gt; Номер</Наименование>
						<Порядок>350</Порядок>
						<Источник Имя="Номер" Вид="Свойство" Тип="Строка"/>
						<Приемник Имя="Номер" Вид="Свойство" Тип="Строка"/>
					</Свойство>
					<Свойство>
						<Код>15</Код>
						<Наименование>Номер --&gt; НомерЭД</Наименование>
						<Порядок>400</Порядок>
						<Источник Имя="Номер" Вид="Свойство" Тип="Строка"/>
						<Приемник Имя="НомерЭД" Вид="Реквизит" Тип="Строка"/>
						<ПередВыгрузкой>Если Источник.Исправление И Источник.ВидСчетаФактуры = Перечисления.ВидСчетаФактурыВыставленного.НаРеализацию Тогда
	Значение = Источник.НомерИсходногоДокумента;	
ИначеЕсли Источник.Исправление И Источник.ВидСчетаФактуры = Перечисления.ВидСчетаФактурыВыставленного.Корректировочный Тогда
	Значение = Источник.НомерИсправляемогоКорректировочногоДокумента;
Иначе
	МассивПрефиксов = Новый Массив;

	// ПрефиксыРИБ.
	Запрос = Новый Запрос();
	Запрос.Текст = "ВЫБРАТЬ Различные
	               |	ПрефиксыИнформационныхБаз.Префикс КАК Префикс
	               |ИЗ
	               |	РегистрСведений.ПрефиксыИнформационныхБаз КАК ПрефиксыИнформационныхБаз";

	ВыборкаУзлов = Запрос.Выполнить().Выбрать();
	Пока ВыборкаУзлов.Следующий() Цикл
		Если Не ПустаяСтрока(ВыборкаУзлов.Префикс) Тогда
			МассивПрефиксов.Добавить(ВыборкаУзлов.Префикс);
		КонецЕсли;
	КонецЦикла;

	// Префиксы Счета-фактуры.
	Если Источник.ВидСчетаФактуры = Перечисления.ВидСчетаФактурыВыставленного.НаАванс Тогда
		МассивПрефиксов.Добавить("А");
	КонецЕсли;

	// Префикс организации.
	Префикс = СокрЛП(ОбщегоНазначения.ЗначениеРеквизитаОбъекта(Источник.Организация, "Префикс"));
	Если Не ПустаяСтрока(Префикс) Тогда
		МассивПрефиксов.Добавить(Префикс);
	КонецЕсли;
	
	Значение = ОбщегоНазначения.ПолучитьНомерНаПечать(Источник, МассивПрефиксов);
КонецЕсли;</ПередВыгрузкой>
					</Свойство>
					<Свойство>
						<Код>9</Код>
						<Наименование>НомерИсправления --&gt; НомерИсправления</Наименование>
						<Порядок>450</Порядок>
						<Источник Имя="НомерИсправления" Вид="Реквизит" Тип="Число"/>
						<Приемник Имя="НомерИсправления" Вид="Реквизит" Тип="Число"/>
					</Свойство>
					<Свойство>
						<Код>12</Код>
						<Наименование>Организация --&gt; Организация</Наименование>
						<Порядок>500</Порядок>
						<Источник Имя="Организация" Вид="Реквизит" Тип="СправочникСсылка.Организации"/>
						<Приемник Имя="Организация" Вид="Реквизит" Тип="СправочникСсылка.Организации"/>
						<КодПравилаКонвертации>Организации                                       </КодПравилаКонвертации>
					</Свойство>
					<Свойство>
						<Код>8</Код>
						<Наименование>Контрагент --&gt; Контрагент</Наименование>
						<Порядок>550</Порядок>
						<Источник Имя="Контрагент" Вид="Реквизит" Тип="СправочникСсылка.Контрагенты"/>
						<Приемник Имя="Контрагент" Вид="Реквизит" Тип="СправочникСсылка.Контрагенты"/>
						<КодПравилаКонвертации>Контрагенты                                       </КодПравилаКонвертации>
					</Свойство>
					<Свойство>
						<Код>17</Код>
						<Наименование>ВалютаДокумента --&gt; Валюта</Наименование>
						<Порядок>600</Порядок>
						<Источник Имя="ВалютаДокумента" Вид="Реквизит" Тип="СправочникСсылка.Валюты"/>
						<Приемник Имя="Валюта" Вид="Реквизит" Тип="СправочникСсылка.Валюты"/>
						<КодПравилаКонвертации>Валюты                                            </КодПравилаКонвертации>
					</Свойство>
					<Свойство>
						<Код>5</Код>
						<Наименование>ДоговорКонтрагента --&gt; ДоговорКонтрагента</Наименование>
						<Порядок>650</Порядок>
						<Источник Имя="ДоговорКонтрагента" Вид="Реквизит" Тип="СправочникСсылка.ДоговорыКонтрагентов"/>
						<Приемник Имя="ДоговорКонтрагента" Вид="Реквизит" Тип="СправочникСсылка.ДоговорыКонтрагентов"/>
						<КодПравилаКонвертации>ДоговорыКонтрагентов                              </КодПравилаКонвертации>
					</Свойство>
					<Свойство>
						<Код>6</Код>
						<Наименование>ИдентификаторГосКонтракта --&gt; ИдентификаторГосКонтракта</Наименование>
						<Порядок>700</Порядок>
						<Источник Имя="ИдентификаторГосКонтракта" Вид="Реквизит" Тип="Строка"/>
						<Приемник Имя="ИдентификаторГосКонтракта" Вид="Реквизит" Тип="Строка"/>
					</Свойство>
					<Свойство>
						<Код>11</Код>
						<Наименование>--&gt; НомерИсходногоДокумента</Наименование>
						<Порядок>750</Порядок>
						<ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных>
						<Источник Имя="" Вид=""/>
						<Приемник Имя="НомерИсходногоДокумента" Вид="Реквизит" Тип="Строка"/>
					</Свойство>
					<Свойство>
						<Код>4</Код>
						<Наименование>--&gt; ДатаИсходногоДокумента</Наименование>
						<Порядок>800</Порядок>
						<ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных>
						<Источник Имя="" Вид=""/>
						<Приемник Имя="ДатаИсходногоДокумента" Вид="Реквизит" Тип="Дата"/>
					</Свойство>
					<Свойство>
						<Код>31</Код>
						<Наименование>--&gt; ДатаИсправленияИсходногоДокумента</Наименование>
						<Порядок>850</Порядок>
						<ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных>
						<Источник Имя="" Вид=""/>
						<Приемник Имя="ДатаИсправленияИсходногоДокумента" Вид="Реквизит" Тип="Дата"/>
					</Свойство>
					<Свойство>
						<Код>32</Код>
						<Наименование>--&gt; НомерИсправленияИсходногоДокумента</Наименование>
						<Порядок>900</Порядок>
						<ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных>
						<Источник Имя="" Вид=""/>
						<Приемник Имя="НомерИсправленияИсходногоДокумента" Вид="Реквизит" Тип="Число"/>
					</Свойство>
					<Свойство>
						<Код>10</Код>
						<Наименование>НомерИсправляемогоКорректировочногоДокумента --&gt; НомерИсправляемогоКорректировочногоДокумента</Наименование>
						<Порядок>950</Порядок>
						<Источник Имя="НомерИсправляемогоКорректировочногоДокумента" Вид="Реквизит" Тип="Строка"/>
						<Приемник Имя="НомерИсправляемогоКорректировочногоДокумента" Вид="Реквизит" Тип="Строка"/>
					</Свойство>
					<Свойство>
						<Код>3</Код>
						<Наименование>ДатаИсправляемогоКорректировочногоДокумента --&gt; ДатаИсправляемогоКорректировочногоДокумента</Наименование>
						<Порядок>1000</Порядок>
						<Источник Имя="ДатаИсправляемогоКорректировочногоДокумента" Вид="Реквизит" Тип="Дата"/>
						<Приемник Имя="ДатаИсправляемогоКорректировочногоДокумента" Вид="Реквизит" Тип="Дата"/>
					</Свойство>
					<Свойство>
						<Код>13</Код>
						<Наименование>СуммаДокумента --&gt; СуммаДокумента</Наименование>
						<Порядок>1050</Порядок>
						<Источник Имя="СуммаДокумента" Вид="Реквизит" Тип="Число"/>
						<Приемник Имя="СуммаДокумента" Вид="Реквизит" Тип="Число"/>
						<ПередВыгрузкой>Если ВходящиеДанные.Свойство("СуммаДокумента") Тогда
	Значение = ВходящиеДанные.СуммаДокумента;
КонецЕсли;</ПередВыгрузкой>
					</Свойство>
					<Свойство>
						<Код>30</Код>
						<Наименование>ИсправляемыйСчетФактура --&gt; СчетФактураОснование</Наименование>
						<Порядок>1100</Порядок>
						<Источник Имя="ИсправляемыйСчетФактура" Вид="Реквизит" Тип="ДокументСсылка.СчетФактураВыданный"/>
						<Приемник Имя="СчетФактураОснование" Вид="Реквизит" Тип="ДокументСсылка.СчетФактураВыданный"/>
						<КодПравилаКонвертации>СчетФактураВыданный                               </КодПравилаКонвертации>
					</Свойство>
					<Свойство>
						<Код>16</Код>
						<Наименование>ПометкаУдаления --&gt; ПометкаУдаления</Наименование>
						<Порядок>1150</Порядок>
						<Источник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
						<Приемник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
					</Свойство>
					<Свойство>
						<Код>29</Код>
						<Наименование>Проведен --&gt; Проведен</Наименование>
						<Порядок>1200</Порядок>
						<Источник Имя="Проведен" Вид="Свойство" Тип="Булево"/>
						<Приемник Имя="" Вид=""/>
						<ИмяПараметраДляПередачи>Проведен</ИмяПараметраДляПередачи>
					</Свойство>
				</Свойства>
				<Значения/>
			</Правило>
			<Правило>
				<Код>ЗаказПоставщику</Код>
				<Наименование>Документ: Заказ поставщику</Наименование>
				<Порядок>250</Порядок>
				<ПослеЗагрузки>Выполнить(Алгоритмы.ЗаполнитьОтветственногоПоДокументу);
Выполнить(Алгоритмы.УстановитьРежимЗаписиДокумента);
Выполнить(Алгоритмы.ПроверитьИзменениеКлючевыхРеквизитовДокумента);

Объект.ВидДокумента = Перечисления.ВидыДокументов.ЗаказТовара;
Объект.СпособДоставки = Перечисления.СпособыДоставки.Самовывоз;

ТаблицаОтбора = Объект.Товары.Выгрузить(,"Номенклатура,Характеристика,ЕдиницаИзмерения");
ТаблицаОтбора.Свернуть("Номенклатура,Характеристика,ЕдиницаИзмерения");
ТаблицаОтбора.Колонки["ЕдиницаИзмерения"].Имя = "Упаковка";
ТаблицаОтбора.Колонки.Добавить("Идентификатор", Новый ОписаниеТипов("Строка", , Новый КвалификаторыСтроки(300)));
ТаблицаОтбора.Колонки.Добавить("Владелец", Новый ОписаниеТипов("СправочникСсылка.Контрагенты"));
ТаблицаОтбора.ЗаполнитьЗначения(Объект.Контрагент, "Владелец");

МенеджерВременныхТаблиц = Новый МенеджерВременныхТаблиц;
ОбменСКонтрагентами.СоздатьВременнуюТаблицуСоответствияНоменклатуры(ТаблицаОтбора, "ВТ_НоменклатураКонтрагента", МенеджерВременныхТаблиц);

Запрос = Новый Запрос;
Запрос.МенеджерВременныхТаблиц = МенеджерВременныхТаблиц;
Запрос.Текст =
	"ВЫБРАТЬ
	|	ВТ_НоменклатураКонтрагента.Идентификатор КАК Идентификатор,
	|	ВТ_НоменклатураКонтрагента.Номенклатура КАК Номенклатура,
	|	ВТ_НоменклатураКонтрагента.Характеристика КАК Характеристика,
	|	ВТ_НоменклатураКонтрагента.Упаковка КАК ЕдиницаИзмерения
	|ИЗ
	|	ВТ_НоменклатураКонтрагента КАК ВТ_НоменклатураКонтрагента";

НоменклатураКонтрагента = Запрос.Выполнить().Выгрузить();

Отбор = Новый Структура("Номенклатура,Характеристика,ЕдиницаИзмерения");
Для Каждого СтрокаТовар Из Объект.Товары Цикл
	ЗаполнитьЗначенияСвойств(Отбор, СтрокаТовар);
	НайденныеСтроки = НоменклатураКонтрагента.НайтиСтроки(Отбор);
	Если НайденныеСтроки.Количество() Тогда
		СтрокаТовар.ИдентификаторПоставщика = НайденныеСтроки[0].Идентификатор;
	КонецЕсли;
КонецЦикла;</ПослеЗагрузки>
				<СинхронизироватьПоИдентификатору>true</СинхронизироватьПоИдентификатору>
				<Источник>ДокументСсылка.ЗаказПоставщику</Источник>
				<Приемник>ДокументСсылка.ЗаказПоставщику</Приемник>
				<Свойства>
					<Группа>
						<Код>1</Код>
						<Наименование>Товары --&gt; Товары</Наименование>
						<Порядок>50</Порядок>
						<Источник Имя="Товары" Вид="ТабличнаяЧасть"/>
						<Приемник Имя="Товары" Вид="ТабличнаяЧасть"/>
						<ПередОбработкойВыгрузки>Запрос = Новый Запрос;
Запрос.Текст = 
	"ВЫБРАТЬ
	|	ТаблицаТовары.Номенклатура.Код КАК КодТовара,
	|	ТаблицаТовары.Номенклатура КАК Номенклатура,
	|	ТаблицаТовары.Номенклатура.Комплект КАК Комплект,
	|	ТаблицаТовары.Количество КАК Количество,
	|	ТаблицаТовары.Цена КАК Цена,
	|	ТаблицаТовары.Сумма КАК Сумма,
	|	ТаблицаТовары.СтавкаНДС КАК СтавкаНДС,
	|	ТаблицаТовары.СуммаНДС КАК СуммаНДС,
	|	ТаблицаТовары.ХарактеристикаНоменклатуры КАК ХарактеристикаНоменклатуры,
	|	ТаблицаТовары.ЕдиницаИзмерения КАК ЕдиницаИзмерения,
	|	ТаблицаТовары.ЕдиницаИзмерения.ЕдиницаПоКлассификатору КАК ЕдиницаПоКлассификатору,
	|	ТаблицаТовары.ЕдиницаИзмерения.Коэффициент КАК ЕдиницаИзмеренияКоэффициент
	|ИЗ
	|	Документ.ЗаказПоставщику.Товары КАК ТаблицаТовары
	|ГДЕ
	|	ТаблицаТовары.Ссылка = &amp;Ссылка
	|
	|ОБЪЕДИНИТЬ ВСЕ
	|
	|ВЫБРАТЬ
	|	ТаблицаУслуг.Номенклатура.Код,
	|	ТаблицаУслуг.Номенклатура,
	|	ТаблицаУслуг.Номенклатура.Комплект,
	|	ТаблицаУслуг.Количество,
	|	ТаблицаУслуг.Цена,
	|	ТаблицаУслуг.Сумма,
	|	ТаблицаУслуг.СтавкаНДС,
	|	ТаблицаУслуг.СуммаНДС,
	|	NULL,
	|	NULL,
	|	ТаблицаУслуг.Номенклатура.БазоваяЕдиницаИзмерения,
	|	NULL
	|ИЗ
	|	Документ.ЗаказПоставщику.Услуги КАК ТаблицаУслуг
	|ГДЕ
	|	ТаблицаУслуг.Ссылка = &amp;Ссылка";

Запрос.УстановитьПараметр("Ссылка", Источник.Ссылка);

КоллекцияОбъектов = Запрос.Выполнить().Выгрузить();</ПередОбработкойВыгрузки>
						<ПриВыгрузке>Выполнить(Алгоритмы.ЗаполнитьСтавкуВСтрокеПоФлагуУчитыватьНДС);</ПриВыгрузке>
						<Свойство>
							<Код>4</Код>
							<Наименование>Номенклатура --&gt; Номенклатура</Наименование>
							<Порядок>50</Порядок>
							<Источник Имя="Номенклатура" Вид="Реквизит" Тип="СправочникСсылка.Номенклатура"/>
							<Приемник Имя="Номенклатура" Вид="Реквизит" Тип="СправочникСсылка.Номенклатура"/>
							<КодПравилаКонвертации>Номенклатура                                      </КодПравилаКонвертации>
							<ПередВыгрузкой>ИсходящиеДанные = Новый Структура("СтавкаНДС", ОбъектКоллекции.СтавкаНДС);</ПередВыгрузкой>
						</Свойство>
						<Свойство>
							<Код>11</Код>
							<Наименование>ХарактеристикаНоменклатуры --&gt; Характеристика</Наименование>
							<Порядок>100</Порядок>
							<Источник Имя="ХарактеристикаНоменклатуры" Вид="Реквизит" Тип="СправочникСсылка.ХарактеристикиНоменклатуры"/>
							<Приемник Имя="Характеристика" Вид="Реквизит" Тип="СправочникСсылка.ХарактеристикиНоменклатуры"/>
							<КодПравилаКонвертации>ХарактеристикиНоменклатуры                        </КодПравилаКонвертации>
						</Свойство>
						<Свойство>
							<Код>2</Код>
							<Наименование>--&gt; ЕдиницаИзмерения</Наименование>
							<Порядок>150</Порядок>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="ЕдиницаИзмерения" Вид="Реквизит" Тип="СправочникСсылка.ЕдиницыИзмерения"/>
							<КодПравилаКонвертации>ЕдиницаПоКлассификатору                           </КодПравилаКонвертации>
							<ПередВыгрузкой>Если ЗначениеЗаполнено(ОбъектКоллекции.ЕдиницаПоКлассификатору) Тогда
	Значение = ОбъектКоллекции.ЕдиницаПоКлассификатору;
КонецЕсли;</ПередВыгрузкой>
						</Свойство>
						<Свойство>
							<Код>3</Код>
							<Наименование>Количество --&gt; Количество</Наименование>
							<Порядок>200</Порядок>
							<Источник Имя="Количество" Вид="Реквизит" Тип="Число"/>
							<Приемник Имя="Количество" Вид="Реквизит" Тип="Число"/>
							<ПередВыгрузкой>Если ЗначениеЗаполнено(ОбъектКоллекции.ЕдиницаИзмеренияКоэффициент) Тогда
	Значение = ОбъектКоллекции.ЕдиницаИзмеренияКоэффициент * ОбъектКоллекции.Количество;
КонецЕсли;</ПередВыгрузкой>
						</Свойство>
						<Свойство>
							<Код>8</Код>
							<Наименование>Цена --&gt; Цена</Наименование>
							<Порядок>250</Порядок>
							<Источник Имя="Цена" Вид="Реквизит" Тип="Число"/>
							<Приемник Имя="Цена" Вид="Реквизит" Тип="Число"/>
							<ПередВыгрузкой>Если ЗначениеЗаполнено(ОбъектКоллекции.ЕдиницаИзмеренияКоэффициент)
	И ОбъектКоллекции.Количество &lt;&gt; 0 Тогда
	Значение = ОбъектКоллекции.Сумма / (ОбъектКоллекции.Количество
		* ОбъектКоллекции.ЕдиницаИзмеренияКоэффициент);
КонецЕсли;</ПередВыгрузкой>
						</Свойство>
						<Свойство>
							<Код>6</Код>
							<Наименование>Сумма --&gt; Сумма</Наименование>
							<Порядок>350</Порядок>
							<Источник Имя="Сумма" Вид="Реквизит" Тип="Число"/>
							<Приемник Имя="Сумма" Вид="Реквизит" Тип="Число"/>
						</Свойство>
						<Свойство>
							<Код>7</Код>
							<Наименование>СуммаНДС --&gt; СуммаНДС</Наименование>
							<Порядок>400</Порядок>
							<Источник Имя="СуммаНДС" Вид="Реквизит" Тип="Число"/>
							<Приемник Имя="СуммаНДС" Вид="Реквизит" Тип="Число"/>
						</Свойство>
						<Свойство>
							<Код>5</Код>
							<Наименование>СтавкаНДС --&gt; СтавкаНДС</Наименование>
							<Порядок>450</Порядок>
							<Источник Имя="СтавкаНДС" Вид="Реквизит" Тип="ПеречислениеСсылка.СтавкиНДС"/>
							<Приемник Имя="СтавкаНДС" Вид="Реквизит" Тип="ПеречислениеСсылка.СтавкиНДС"/>
							<КодПравилаКонвертации>СтавкиНДС                                         </КодПравилаКонвертации>
						</Свойство>
						<Свойство>
							<Код>10</Код>
							<Наименование>--&gt; СуммаСНДС</Наименование>
							<Порядок>500</Порядок>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="СуммаСНДС" Вид="Реквизит" Тип="Число"/>
							<ПередВыгрузкой>Значение = ?(Источник.СуммаВключаетНДС,
	ОбъектКоллекции.Сумма,
	ОбъектКоллекции.Сумма + ОбъектКоллекции.СуммаНДС);</ПередВыгрузкой>
						</Свойство>
					</Группа>
					<Свойство Поиск="true">
						<Код>18</Код>
						<Наименование>Дата --&gt; Дата</Наименование>
						<Порядок>100</Порядок>
						<Источник Имя="Дата" Вид="Свойство" Тип="Дата"/>
						<Приемник Имя="Дата" Вид="Свойство" Тип="Дата"/>
					</Свойство>
					<Свойство Поиск="true">
						<Код>19</Код>
						<Наименование>Номер --&gt; Номер</Наименование>
						<Порядок>150</Порядок>
						<Источник Имя="Номер" Вид="Свойство" Тип="Строка"/>
						<Приемник Имя="Номер" Вид="Свойство" Тип="Строка"/>
					</Свойство>
					<Свойство>
						<Код>25</Код>
						<Наименование>Номер --&gt; НомерЭД</Наименование>
						<Порядок>200</Порядок>
						<Источник Имя="Номер" Вид="Свойство" Тип="Строка"/>
						<Приемник Имя="НомерЭД" Вид="Реквизит" Тип="Строка"/>
						<ПередВыгрузкой>Значение = ОбщегоНазначения.ПолучитьНомерНаПечать(Источник);</ПередВыгрузкой>
					</Свойство>
					<Свойство>
						<Код>22</Код>
						<Наименование>ВалютаДокумента --&gt; Валюта</Наименование>
						<Порядок>250</Порядок>
						<Источник Имя="ВалютаДокумента" Вид="Реквизит" Тип="СправочникСсылка.Валюты"/>
						<Приемник Имя="Валюта" Вид="Реквизит" Тип="СправочникСсылка.Валюты"/>
						<КодПравилаКонвертации>Валюты                                            </КодПравилаКонвертации>
					</Свойство>
					<Свойство>
						<Код>15</Код>
						<Наименование>Организация --&gt; Организация</Наименование>
						<Порядок>300</Порядок>
						<Источник Имя="Организация" Вид="Реквизит" Тип="СправочникСсылка.Организации"/>
						<Приемник Имя="Организация" Вид="Реквизит" Тип="СправочникСсылка.Организации"/>
						<КодПравилаКонвертации>Организации                                       </КодПравилаКонвертации>
					</Свойство>
					<Свойство>
						<Код>14</Код>
						<Наименование>Контрагент --&gt; Контрагент</Наименование>
						<Порядок>350</Порядок>
						<Источник Имя="Контрагент" Вид="Реквизит" Тип="СправочникСсылка.Контрагенты"/>
						<Приемник Имя="Контрагент" Вид="Реквизит" Тип="СправочникСсылка.Контрагенты"/>
						<КодПравилаКонвертации>Контрагенты                                       </КодПравилаКонвертации>
					</Свойство>
					<Свойство>
						<Код>12</Код>
						<Наименование>ДоговорКонтрагента --&gt; ДоговорКонтрагента</Наименование>
						<Порядок>400</Порядок>
						<Источник Имя="ДоговорКонтрагента" Вид="Реквизит" Тип="СправочникСсылка.ДоговорыКонтрагентов"/>
						<Приемник Имя="ДоговорКонтрагента" Вид="Реквизит" Тип="СправочникСсылка.ДоговорыКонтрагентов"/>
						<КодПравилаКонвертации>ДоговорыКонтрагентов                              </КодПравилаКонвертации>
					</Свойство>
					<Свойство>
						<Код>17</Код>
						<Наименование>СуммаДокумента --&gt; СуммаДокумента</Наименование>
						<Порядок>450</Порядок>
						<Источник Имя="СуммаДокумента" Вид="Реквизит" Тип="Число"/>
						<Приемник Имя="СуммаДокумента" Вид="Реквизит" Тип="Число"/>
					</Свойство>
					<Свойство>
						<Код>20</Код>
						<Наименование>ПометкаУдаления --&gt; ПометкаУдаления</Наименование>
						<Порядок>500</Порядок>
						<Источник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
						<Приемник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
					</Свойство>
					<Свойство>
						<Код>23</Код>
						<Наименование>СуммаВключаетНДС --&gt; ЦенаВключаетНДС</Наименование>
						<Порядок>550</Порядок>
						<Источник Имя="СуммаВключаетНДС" Вид="Реквизит" Тип="Булево"/>
						<Приемник Имя="ЦенаВключаетНДС" Вид="Реквизит" Тип="Булево"/>
					</Свойство>
					<Свойство>
						<Код>21</Код>
						<Наименование>Проведен --&gt; Проведен</Наименование>
						<Порядок>600</Порядок>
						<Источник Имя="Проведен" Вид="Свойство" Тип="Булево"/>
						<Приемник Имя="" Вид=""/>
						<ИмяПараметраДляПередачи>Проведен</ИмяПараметраДляПередачи>
					</Свойство>
				</Свойства>
				<Значения/>
			</Правило>
			<Правило>
				<Код>СчетНаОплатуПокупателю</Код>
				<Наименование>Документ: Счет на оплату покупателю</Наименование>
				<Порядок>300</Порядок>
				<ПослеЗагрузки>Выполнить(Алгоритмы.ЗаполнитьОтветственногоПоДокументу);
Выполнить(Алгоритмы.УстановитьРежимЗаписиДокумента);
Выполнить(Алгоритмы.ПроверитьИзменениеКлючевыхРеквизитовДокумента);

Объект.ВидДокумента = Перечисления.ВидыДокументов.СчетНаОплату;
</ПослеЗагрузки>
				<СинхронизироватьПоИдентификатору>true</СинхронизироватьПоИдентификатору>
				<Источник>ДокументСсылка.СчетНаОплатуПокупателю</Источник>
				<Приемник>ДокументСсылка.СчетНаОплатуПокупателю</Приемник>
				<Свойства>
					<Группа>
						<Код>1</Код>
						<Наименование>Товары --&gt; Товары</Наименование>
						<Порядок>50</Порядок>
						<Источник Имя="Товары" Вид="ТабличнаяЧасть"/>
						<Приемник Имя="Товары" Вид="ТабличнаяЧасть"/>
						<ПередОбработкойВыгрузки>Запрос = Новый Запрос;
Запрос.Текст = 
	"ВЫБРАТЬ
	|	ТаблицаТовары.Номенклатура.Код КАК КодТовара,
	|	ТаблицаТовары.Номенклатура КАК Номенклатура,
	|	ТаблицаТовары.Номенклатура.Комплект КАК Комплект,
	|	ТаблицаТовары.Количество КАК Количество,
	|	ТаблицаТовары.Цена КАК Цена,
	|	ТаблицаТовары.Сумма КАК Сумма,
	|	ТаблицаТовары.СтавкаНДС КАК СтавкаНДС,
	|	ТаблицаТовары.СуммаНДС КАК СуммаНДС,
	|	ТаблицаТовары.ХарактеристикаНоменклатуры КАК ХарактеристикаНоменклатуры,
	|	ТаблицаТовары.ЕдиницаИзмерения КАК ЕдиницаИзмерения,
	|	ТаблицаТовары.ЕдиницаИзмерения.ЕдиницаПоКлассификатору КАК ЕдиницаПоКлассификатору,
	|	ТаблицаТовары.ЕдиницаИзмерения.Коэффициент КАК ЕдиницаИзмеренияКоэффициент,
	|	ТаблицаТовары.КлючСтроки
	|ИЗ
	|	Документ.СчетНаОплатуПокупателю.Товары КАК ТаблицаТовары
	|ГДЕ
	|	ТаблицаТовары.Ссылка = &amp;Ссылка
	|
	|ОБЪЕДИНИТЬ ВСЕ
	|
	|ВЫБРАТЬ
	|	ТаблицаУслуг.Номенклатура.Код,
	|	ТаблицаУслуг.Номенклатура,
	|	ТаблицаУслуг.Номенклатура.Комплект,
	|	ТаблицаУслуг.Количество,
	|	ТаблицаУслуг.Цена,
	|	ТаблицаУслуг.Сумма,
	|	ТаблицаУслуг.СтавкаНДС,
	|	ТаблицаУслуг.СуммаНДС,
	|	NULL,
	|	NULL,
	|	ТаблицаУслуг.Номенклатура.БазоваяЕдиницаИзмерения,
	|	NULL,
	|	NULL
	|ИЗ
	|	Документ.СчетНаОплатуПокупателю.Услуги КАК ТаблицаУслуг
	|ГДЕ
	|	ТаблицаУслуг.Ссылка = &amp;Ссылка";

Запрос.УстановитьПараметр("Ссылка", Источник.Ссылка);

ТаблицаТовары = Запрос.Выполнить().Выгрузить();
ТаблицаТовары = УправлениеЗапасами.СформироватьТаблицуКомплектующих(ТаблицаТовары, Источник.Ссылка);

КоллекцияОбъектов = ТаблицаТовары;</ПередОбработкойВыгрузки>
						<ПриВыгрузке>Выполнить(Алгоритмы.ЗаполнитьСтавкуВСтрокеПоФлагуУчитыватьНДС);</ПриВыгрузке>
						<Свойство>
							<Код>4</Код>
							<Наименование>Номенклатура --&gt; Номенклатура</Наименование>
							<Порядок>50</Порядок>
							<Источник Имя="Номенклатура" Вид="Реквизит" Тип="СправочникСсылка.Номенклатура"/>
							<Приемник Имя="Номенклатура" Вид="Реквизит" Тип="СправочникСсылка.Номенклатура"/>
							<КодПравилаКонвертации>Номенклатура                                      </КодПравилаКонвертации>
							<ПередВыгрузкой>ИсходящиеДанные = Новый Структура("СтавкаНДС", ОбъектКоллекции.СтавкаНДС);</ПередВыгрузкой>
						</Свойство>
						<Свойство>
							<Код>23</Код>
							<Наименование>ХарактеристикаНоменклатуры --&gt; Характеристика</Наименование>
							<Порядок>100</Порядок>
							<Источник Имя="ХарактеристикаНоменклатуры" Вид="Реквизит" Тип="СправочникСсылка.ХарактеристикиНоменклатуры"/>
							<Приемник Имя="Характеристика" Вид="Реквизит" Тип="СправочникСсылка.ХарактеристикиНоменклатуры"/>
							<КодПравилаКонвертации>ХарактеристикиНоменклатуры                        </КодПравилаКонвертации>
						</Свойство>
						<Свойство>
							<Код>2</Код>
							<Наименование>--&gt; ЕдиницаИзмерения</Наименование>
							<Порядок>150</Порядок>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="ЕдиницаИзмерения" Вид="Реквизит" Тип="СправочникСсылка.ЕдиницыИзмерения"/>
							<КодПравилаКонвертации>ЕдиницаПоКлассификатору                           </КодПравилаКонвертации>
							<ПередВыгрузкой>Если ЗначениеЗаполнено(ОбъектКоллекции.ЕдиницаПоКлассификатору) Тогда
	Значение = ОбъектКоллекции.ЕдиницаПоКлассификатору;
КонецЕсли;</ПередВыгрузкой>
						</Свойство>
						<Свойство>
							<Код>3</Код>
							<Наименование>Количество --&gt; Количество</Наименование>
							<Порядок>200</Порядок>
							<Источник Имя="Количество" Вид="Реквизит" Тип="Число"/>
							<Приемник Имя="Количество" Вид="Реквизит" Тип="Число"/>
							<ПередВыгрузкой>Если ЗначениеЗаполнено(ОбъектКоллекции.ЕдиницаИзмеренияКоэффициент) Тогда
	Значение = ОбъектКоллекции.ЕдиницаИзмеренияКоэффициент * ОбъектКоллекции.Количество;
КонецЕсли;</ПередВыгрузкой>
						</Свойство>
						<Свойство>
							<Код>8</Код>
							<Наименование>Цена --&gt; Цена</Наименование>
							<Порядок>250</Порядок>
							<Источник Имя="Цена" Вид="Реквизит" Тип="Число"/>
							<Приемник Имя="Цена" Вид="Реквизит" Тип="Число"/>
							<ПередВыгрузкой>Если ЗначениеЗаполнено(ОбъектКоллекции.ЕдиницаИзмеренияКоэффициент)
	И ОбъектКоллекции.Количество &lt;&gt; 0 Тогда
	Значение = ОбъектКоллекции.Сумма / (ОбъектКоллекции.Количество
		* ОбъектКоллекции.ЕдиницаИзмеренияКоэффициент);
КонецЕсли;</ПередВыгрузкой>
						</Свойство>
						<Свойство>
							<Код>25</Код>
							<Наименование>--&gt; СуммаСкидки</Наименование>
							<Порядок>300</Порядок>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="СуммаСкидки" Вид="Реквизит" Тип="Число"/>
							<ПередВыгрузкой>Если ОбъектКоллекции.Количество &lt;&gt; 0
	И ОбъектКоллекции.Цена &lt;&gt; 0 Тогда
	Значение = ОбъектКоллекции.Количество * ОбъектКоллекции.Цена - ОбъектКоллекции.Сумма;
Иначе
	Значение = 0;
КонецЕсли;</ПередВыгрузкой>
						</Свойство>
						<Свойство>
							<Код>6</Код>
							<Наименование>Сумма --&gt; Сумма</Наименование>
							<Порядок>350</Порядок>
							<Источник Имя="Сумма" Вид="Реквизит" Тип="Число"/>
							<Приемник Имя="Сумма" Вид="Реквизит" Тип="Число"/>
						</Свойство>
						<Свойство>
							<Код>5</Код>
							<Наименование>СтавкаНДС --&gt; СтавкаНДС</Наименование>
							<Порядок>400</Порядок>
							<Источник Имя="СтавкаНДС" Вид="Реквизит" Тип="ПеречислениеСсылка.СтавкиНДС"/>
							<Приемник Имя="СтавкаНДС" Вид="Реквизит" Тип="ПеречислениеСсылка.СтавкиНДС"/>
							<КодПравилаКонвертации>СтавкиНДС                                         </КодПравилаКонвертации>
						</Свойство>
						<Свойство>
							<Код>7</Код>
							<Наименование>СуммаНДС --&gt; СуммаНДС</Наименование>
							<Порядок>450</Порядок>
							<Источник Имя="СуммаНДС" Вид="Реквизит" Тип="Число"/>
							<Приемник Имя="СуммаНДС" Вид="Реквизит" Тип="Число"/>
						</Свойство>
						<Свойство>
							<Код>24</Код>
							<Наименование>--&gt; СуммаСНДС</Наименование>
							<Порядок>500</Порядок>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="СуммаСНДС" Вид="Реквизит" Тип="Число"/>
							<ПередВыгрузкой>Значение = ?(Источник.СуммаВключаетНДС,
	ОбъектКоллекции.Сумма,
	ОбъектКоллекции.Сумма + ОбъектКоллекции.СуммаНДС);</ПередВыгрузкой>
						</Свойство>
					</Группа>
					<Свойство Поиск="true">
						<Код>15</Код>
						<Наименование>Дата --&gt; Дата</Наименование>
						<Порядок>100</Порядок>
						<Источник Имя="Дата" Вид="Свойство" Тип="Дата"/>
						<Приемник Имя="Дата" Вид="Свойство" Тип="Дата"/>
					</Свойство>
					<Свойство Поиск="true">
						<Код>16</Код>
						<Наименование>Номер --&gt; Номер</Наименование>
						<Порядок>150</Порядок>
						<Источник Имя="Номер" Вид="Свойство" Тип="Строка"/>
						<Приемник Имя="Номер" Вид="Свойство" Тип="Строка"/>
					</Свойство>
					<Свойство>
						<Код>21</Код>
						<Наименование>Номер --&gt; НомерЭД</Наименование>
						<Порядок>200</Порядок>
						<Источник Имя="Номер" Вид="Свойство" Тип="Строка"/>
						<Приемник Имя="НомерЭД" Вид="Реквизит" Тип="Строка"/>
						<ПередВыгрузкой>Значение = ОбщегоНазначения.ПолучитьНомерНаПечать(Источник);</ПередВыгрузкой>
					</Свойство>
					<Свойство>
						<Код>18</Код>
						<Наименование>ВалютаДокумента --&gt; Валюта</Наименование>
						<Порядок>250</Порядок>
						<Источник Имя="ВалютаДокумента" Вид="Реквизит" Тип="СправочникСсылка.Валюты"/>
						<Приемник Имя="Валюта" Вид="Реквизит" Тип="СправочникСсылка.Валюты"/>
						<КодПравилаКонвертации>Валюты                                            </КодПравилаКонвертации>
					</Свойство>
					<Свойство>
						<Код>12</Код>
						<Наименование>Организация --&gt; Организация</Наименование>
						<Порядок>300</Порядок>
						<Источник Имя="Организация" Вид="Реквизит" Тип="СправочникСсылка.Организации"/>
						<Приемник Имя="Организация" Вид="Реквизит" Тип="СправочникСсылка.Организации"/>
						<КодПравилаКонвертации>Организации                                       </КодПравилаКонвертации>
					</Свойство>
					<Свойство>
						<Код>11</Код>
						<Наименование>Контрагент --&gt; Контрагент</Наименование>
						<Порядок>350</Порядок>
						<Источник Имя="Контрагент" Вид="Реквизит"/>
						<Приемник Имя="Контрагент" Вид="Реквизит" Тип="СправочникСсылка.Контрагенты"/>
						<КодПравилаКонвертации>Контрагенты                                       </КодПравилаКонвертации>
					</Свойство>
					<Свойство>
						<Код>9</Код>
						<Наименование>ДоговорКонтрагента --&gt; ДоговорКонтрагента</Наименование>
						<Порядок>400</Порядок>
						<Источник Имя="ДоговорКонтрагента" Вид="Реквизит" Тип="СправочникСсылка.ДоговорыКонтрагентов"/>
						<Приемник Имя="ДоговорКонтрагента" Вид="Реквизит" Тип="СправочникСсылка.ДоговорыКонтрагентов"/>
						<КодПравилаКонвертации>ДоговорыКонтрагентов                              </КодПравилаКонвертации>
					</Свойство>
					<Свойство>
						<Код>26</Код>
						<Наименование>СтруктурнаяЕдиница --&gt; БанковскийСчетОрганизации</Наименование>
						<Порядок>450</Порядок>
						<Источник Имя="СтруктурнаяЕдиница" Вид="Реквизит"/>
						<Приемник Имя="БанковскийСчетОрганизации" Вид="Реквизит" Тип="СправочникСсылка.БанковскиеСчета"/>
						<КодПравилаКонвертации>БанковскиеСчета                                   </КодПравилаКонвертации>
						<ПередВыгрузкой>Если ТипЗнч(Источник.СтруктурнаяЕдиница) &lt;&gt; Тип("СправочникСсылка.БанковскиеСчета") Тогда
	Отказ = Истина;
КонецЕсли;</ПередВыгрузкой>
					</Свойство>
					<Свойство>
						<Код>14</Код>
						<Наименование>СуммаДокумента --&gt; СуммаДокумента</Наименование>
						<Порядок>500</Порядок>
						<Источник Имя="СуммаДокумента" Вид="Реквизит" Тип="Число"/>
						<Приемник Имя="СуммаДокумента" Вид="Реквизит" Тип="Число"/>
					</Свойство>
					<Свойство>
						<Код>17</Код>
						<Наименование>ПометкаУдаления --&gt; ПометкаУдаления</Наименование>
						<Порядок>550</Порядок>
						<Источник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
						<Приемник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
					</Свойство>
					<Свойство>
						<Код>20</Код>
						<Наименование>СуммаВключаетНДС --&gt; ЦенаВключаетНДС</Наименование>
						<Порядок>600</Порядок>
						<Источник Имя="СуммаВключаетНДС" Вид="Реквизит" Тип="Булево"/>
						<Приемник Имя="ЦенаВключаетНДС" Вид="Реквизит" Тип="Булево"/>
					</Свойство>
					<Свойство>
						<Код>19</Код>
						<Наименование>ЗаказПокупателя --&gt; ДокументОснование</Наименование>
						<Порядок>650</Порядок>
						<Источник Имя="ЗаказПокупателя" Вид="Реквизит" Тип="ДокументСсылка.ЗаказПокупателя"/>
						<Приемник Имя="ДокументОснование" Вид="Реквизит"/>
						<КодПравилаКонвертации>ЗаказПокупателя                                   </КодПравилаКонвертации>
					</Свойство>
					<Свойство>
						<Код>22</Код>
						<Наименование>--&gt; Проведен</Наименование>
						<Порядок>700</Порядок>
						<Источник Имя="" Вид=""/>
						<Приемник Имя="" Вид=""/>
						<ИмяПараметраДляПередачи>Проведен</ИмяПараметраДляПередачи>
						<ПередВыгрузкой>Значение = НЕ Источник.ПометкаУдаления;</ПередВыгрузкой>
					</Свойство>
				</Свойства>
				<Значения/>
			</Правило>
			<Правило>
				<Код>ЗаказПокупателя</Код>
				<Наименование>Документ: Заказ покупателя</Наименование>
				<Порядок>350</Порядок>
				<ПоследовательностьПолейПоиска>СтрокаИменСвойствПоиска = "Дата, Номер, Организация, Контрагент";</ПоследовательностьПолейПоиска>
				<НеЗамещать>true</НеЗамещать>
				<СинхронизироватьПоИдентификатору>true</СинхронизироватьПоИдентификатору>
				<ПродолжитьПоискПоПолямПоискаЕслиПоИдентификаторуНеНашли>true</ПродолжитьПоискПоПолямПоискаЕслиПоИдентификаторуНеНашли>
				<НеВыгружатьОбъектыСвойствПоСсылкам>true</НеВыгружатьОбъектыСвойствПоСсылкам>
				<НеСоздаватьЕслиНеНайден>true</НеСоздаватьЕслиНеНайден>
				<Источник>ДокументСсылка.ЗаказПокупателя</Источник>
				<Приемник>ДокументСсылка.ЗаказПокупателя</Приемник>
				<Свойства>
					<Свойство Поиск="true">
						<Код>3</Код>
						<Наименование>Дата --&gt; Дата</Наименование>
						<Порядок>50</Порядок>
						<Источник Имя="Дата" Вид="Свойство" Тип="Дата"/>
						<Приемник Имя="Дата" Вид="Свойство" Тип="Дата"/>
					</Свойство>
					<Свойство Поиск="true">
						<Код>4</Код>
						<Наименование>Номер --&gt; Номер</Наименование>
						<Порядок>100</Порядок>
						<Источник Имя="Номер" Вид="Свойство" Тип="Строка"/>
						<Приемник Имя="Номер" Вид="Свойство" Тип="Строка"/>
					</Свойство>
					<Свойство Поиск="true">
						<Код>2</Код>
						<Наименование>Организация --&gt; Организация</Наименование>
						<Порядок>150</Порядок>
						<Источник Имя="Организация" Вид="Реквизит" Тип="СправочникСсылка.Организации"/>
						<Приемник Имя="Организация" Вид="Реквизит" Тип="СправочникСсылка.Организации"/>
					</Свойство>
					<Свойство Поиск="true">
						<Код>1</Код>
						<Наименование>Контрагент --&gt; Контрагент</Наименование>
						<Порядок>200</Порядок>
						<Источник Имя="Контрагент" Вид="Реквизит" Тип="СправочникСсылка.Контрагенты"/>
						<Приемник Имя="Контрагент" Вид="Реквизит" Тип="СправочникСсылка.Контрагенты"/>
					</Свойство>
				</Свойства>
				<Значения/>
			</Правило>
		</Группа>
	</ПравилаКонвертацииОбъектов>
	<ПравилаВыгрузкиДанных>
		<Группа Отключить="false">
			<Код>Справочники</Код>
			<Наименование>Справочники</Наименование>
			<Порядок>50</Порядок>
			<Правило Отключить="false">
				<Код>Валюты</Код>
				<Наименование>Валюты                                            </Наименование>
				<Порядок>50</Порядок>
				<КодПравилаКонвертации>Валюты                                            </КодПравилаКонвертации>
				<СпособОтбораДанных>СтандартнаяВыборка</СпособОтбораДанных>
				<ОбъектВыборки>СправочникСсылка.Валюты</ОбъектВыборки>
			</Правило>
			<Правило Отключить="false">
				<Код>СтраныМира</Код>
				<Наименование>СтраныМира                                        </Наименование>
				<Порядок>100</Порядок>
				<КодПравилаКонвертации>СтраныМира                                        </КодПравилаКонвертации>
				<СпособОтбораДанных>СтандартнаяВыборка</СпособОтбораДанных>
				<ОбъектВыборки>СправочникСсылка.КлассификаторСтранМира</ОбъектВыборки>
			</Правило>
			<Правило Отключить="false">
				<Код>КлассификаторБанков</Код>
				<Наименование>КлассификаторБанков                               </Наименование>
				<Порядок>150</Порядок>
				<КодПравилаКонвертации>КлассификаторБанков                               </КодПравилаКонвертации>
				<СпособОтбораДанных>СтандартнаяВыборка</СпособОтбораДанных>
				<ОбъектВыборки>СправочникСсылка.Банки</ОбъектВыборки>
			</Правило>
			<Правило Отключить="false">
				<Код>Организации</Код>
				<Наименование>Организации                                       </Наименование>
				<Порядок>200</Порядок>
				<КодПравилаКонвертации>Организации                                       </КодПравилаКонвертации>
				<СпособОтбораДанных>СтандартнаяВыборка</СпособОтбораДанных>
				<ОбъектВыборки>СправочникСсылка.Организации</ОбъектВыборки>
			</Правило>
			<Правило Отключить="false">
				<Код>Контрагенты</Код>
				<Наименование>Контрагенты                                       </Наименование>
				<Порядок>250</Порядок>
				<КодПравилаКонвертации>Контрагенты                                       </КодПравилаКонвертации>
				<СпособОтбораДанных>СтандартнаяВыборка</СпособОтбораДанных>
				<ОбъектВыборки>СправочникСсылка.Контрагенты</ОбъектВыборки>
			</Правило>
			<Правило Отключить="false">
				<Код>БанковскиеСчета</Код>
				<Наименование>БанковскиеСчета                                   </Наименование>
				<Порядок>300</Порядок>
				<КодПравилаКонвертации>БанковскиеСчета                                   </КодПравилаКонвертации>
				<СпособОтбораДанных>СтандартнаяВыборка</СпособОтбораДанных>
				<ОбъектВыборки>СправочникСсылка.БанковскиеСчета</ОбъектВыборки>
			</Правило>
			<Правило Отключить="false">
				<Код>ДоговорыКонтрагентов</Код>
				<Наименование>ДоговорыКонтрагентов                              </Наименование>
				<Порядок>350</Порядок>
				<КодПравилаКонвертации>ДоговорыКонтрагентов                              </КодПравилаКонвертации>
				<СпособОтбораДанных>СтандартнаяВыборка</СпособОтбораДанных>
				<ОбъектВыборки>СправочникСсылка.ДоговорыКонтрагентов</ОбъектВыборки>
			</Правило>
			<Правило Отключить="false">
				<Код>ЕдиницаПоКлассификатору</Код>
				<Наименование>ЕдиницаПоКлассификатору                           </Наименование>
				<Порядок>400</Порядок>
				<КодПравилаКонвертации>ЕдиницаПоКлассификатору                           </КодПравилаКонвертации>
				<СпособОтбораДанных>СтандартнаяВыборка</СпособОтбораДанных>
				<ОбъектВыборки>СправочникСсылка.КлассификаторЕдиницИзмерения</ОбъектВыборки>
			</Правило>
			<Правило Отключить="false">
				<Код>ВидыНоменклатуры</Код>
				<Наименование>ВидыНоменклатуры                                  </Наименование>
				<Порядок>450</Порядок>
				<КодПравилаКонвертации>ВидыНоменклатуры                                  </КодПравилаКонвертации>
				<СпособОтбораДанных>СтандартнаяВыборка</СпособОтбораДанных>
				<ОбъектВыборки>СправочникСсылка.ВидыНоменклатуры</ОбъектВыборки>
			</Правило>
			<Правило Отключить="false">
				<Код>Номенклатура</Код>
				<Наименование>Номенклатура                                      </Наименование>
				<Порядок>500</Порядок>
				<КодПравилаКонвертации>Номенклатура                                      </КодПравилаКонвертации>
				<СпособОтбораДанных>СтандартнаяВыборка</СпособОтбораДанных>
				<ОбъектВыборки>СправочникСсылка.Номенклатура</ОбъектВыборки>
			</Правило>
			<Правило Отключить="false">
				<Код>ХарактеристикиНоменклатуры</Код>
				<Наименование>ХарактеристикиНоменклатуры                        </Наименование>
				<Порядок>550</Порядок>
				<КодПравилаКонвертации>ХарактеристикиНоменклатуры                        </КодПравилаКонвертации>
				<СпособОтбораДанных>СтандартнаяВыборка</СпособОтбораДанных>
				<ОбъектВыборки>СправочникСсылка.ХарактеристикиНоменклатуры</ОбъектВыборки>
			</Правило>
		</Группа>
		<Группа Отключить="false">
			<Код>Документы</Код>
			<Наименование>Документы</Наименование>
			<Порядок>100</Порядок>
			<Правило Отключить="false">
				<Код>АктОбОказанииПроизводственныхУслуг</Код>
				<Наименование>АктОбОказанииПроизводственныхУслуг                </Наименование>
				<Порядок>50</Порядок>
				<КодПравилаКонвертации>АктОбОказанииПроизводственныхУслуг                </КодПравилаКонвертации>
				<СпособОтбораДанных>СтандартнаяВыборка</СпособОтбораДанных>
				<ОбъектВыборки>ДокументСсылка.АктОбОказанииПроизводственныхУслуг</ОбъектВыборки>
			</Правило>
			<Правило Отключить="false">
				<Код>РеализацияТоваровУслуг</Код>
				<Наименование>РеализацияТоваровУслуг                            </Наименование>
				<Порядок>100</Порядок>
				<КодПравилаКонвертации>РеализацияТоваровУслуг                            </КодПравилаКонвертации>
				<СпособОтбораДанных>СтандартнаяВыборка</СпособОтбораДанных>
				<ОбъектВыборки>ДокументСсылка.РеализацияТоваровУслуг</ОбъектВыборки>
			</Правило>
			<Правило Отключить="false">
				<Код>КорректировкаРеализации</Код>
				<Наименование>КорректировкаРеализации                           </Наименование>
				<Порядок>150</Порядок>
				<КодПравилаКонвертации>КорректировкаРеализации                           </КодПравилаКонвертации>
				<СпособОтбораДанных>СтандартнаяВыборка</СпособОтбораДанных>
				<ОбъектВыборки>ДокументСсылка.КорректировкаРеализации</ОбъектВыборки>
			</Правило>
			<Правило Отключить="false">
				<Код>СчетФактураВыданный</Код>
				<Наименование>СчетФактураВыданный                               </Наименование>
				<Порядок>200</Порядок>
				<КодПравилаКонвертации>СчетФактураВыданный                               </КодПравилаКонвертации>
				<СпособОтбораДанных>СтандартнаяВыборка</СпособОтбораДанных>
				<ОбъектВыборки>ДокументСсылка.СчетФактураВыданный</ОбъектВыборки>
			</Правило>
			<Правило Отключить="false">
				<Код>ЗаказПоставщику</Код>
				<Наименование>ЗаказПоставщику                                   </Наименование>
				<Порядок>250</Порядок>
				<КодПравилаКонвертации>ЗаказПоставщику                                   </КодПравилаКонвертации>
				<СпособОтбораДанных>СтандартнаяВыборка</СпособОтбораДанных>
				<ОбъектВыборки>ДокументСсылка.ЗаказПоставщику</ОбъектВыборки>
			</Правило>
			<Правило Отключить="false">
				<Код>СчетНаОплатуПокупателю</Код>
				<Наименование>СчетНаОплатуПокупателю                            </Наименование>
				<Порядок>300</Порядок>
				<КодПравилаКонвертации>СчетНаОплатуПокупателю                            </КодПравилаКонвертации>
				<СпособОтбораДанных>СтандартнаяВыборка</СпособОтбораДанных>
				<ОбъектВыборки>ДокументСсылка.СчетНаОплатуПокупателю</ОбъектВыборки>
			</Правило>
		</Группа>
	</ПравилаВыгрузкиДанных>
	<ПравилаОчисткиДанных/>
	<Алгоритмы>
		<Алгоритм Имя="ЗаполнитьОтветственногоПоДокументу" ИспользуетсяПриЗагрузке="true">
			<Текст>Объект.Ответственный = Параметры.ТекущийПользователь;
</Текст>
			<Параметры>Объект, Параметры</Параметры>
		</Алгоритм>
		<Алгоритм Имя="ЗаполнитьСтавкуВСтрокеПоФлагуУчитыватьНДС" ИспользуетсяПриЗагрузке="false">
			<Текст>Если Источник.УчитыватьНДС = Ложь Тогда
	ОбъектКоллекции.СтавкаНДС = Перечисления.СтавкиНДС.БезНДС;
ИначеЕсли ОбъектКоллекции.СтавкаНДС = Перечисления.СтавкиНДС.ПустаяСсылка() Тогда
	ОбъектКоллекции.СтавкаНДС = Перечисления.СтавкиНДС.БезНДС;
КонецЕсли;</Текст>
			<Параметры>Источник,ОбъектКоллекции</Параметры>
		</Алгоритм>
		<Алгоритм Имя="ПереносКИ" ИспользуетсяПриЗагрузке="false">
			<Текст>КоллекцияОбъектов = Новый ТаблицаЗначений;
КоллекцияОбъектов.Колонки.Добавить("Тип");
КоллекцияОбъектов.Колонки.Добавить("Вид");
КоллекцияОбъектов.Колонки.Добавить("Представление");
КоллекцияОбъектов.Колонки.Добавить("ЗначенияПолей");
КоллекцияОбъектов.Колонки.Добавить("Страна");
КоллекцияОбъектов.Колонки.Добавить("Регион");
КоллекцияОбъектов.Колонки.Добавить("Город");
КоллекцияОбъектов.Колонки.Добавить("АдресЭП");
КоллекцияОбъектов.Колонки.Добавить("ДоменноеИмяСервера");
КоллекцияОбъектов.Колонки.Добавить("НомерТелефона");
КоллекцияОбъектов.Колонки.Добавить("НомерТелефонаБезКодов");

Запрос = Новый Запрос("
|ВЫБРАТЬ
|	КонтактнаяИнформация.Тип КАК Тип,
|	КонтактнаяИнформация.Вид КАК Вид,
|	КонтактнаяИнформация.Представление КАК Представление,
|	КонтактнаяИнформация.Поле1 КАК Поле1,
|	КонтактнаяИнформация.Поле2 КАК Поле2,
|	КонтактнаяИнформация.Поле3 КАК Поле3,
|	КонтактнаяИнформация.Поле4 КАК Поле4,
|	КонтактнаяИнформация.Поле5 КАК Поле5,
|	КонтактнаяИнформация.Поле6 КАК Поле6,
|	КонтактнаяИнформация.Поле7 КАК Поле7,
|	КонтактнаяИнформация.Поле8 КАК Поле8,
|	КонтактнаяИнформация.Поле9 КАК Поле9,
|	КонтактнаяИнформация.ТипДома КАК ТипДома,
|	КонтактнаяИнформация.ТипКорпуса КАК ТипКорпуса,
|	КонтактнаяИнформация.ТипКвартиры КАК ТипКвартиры
|ИЗ
|	РегистрСведений.КонтактнаяИнформация КАК КонтактнаяИнформация
|ГДЕ
|	КонтактнаяИнформация.Объект = &amp;Контрагент
|	И НЕ КонтактнаяИнформация.Вид В (
|	ЗНАЧЕНИЕ(Справочник.ВидыКонтактнойИнформации.АдресДоставкиКонтрагента),
|	ЗНАЧЕНИЕ(Справочник.ВидыКонтактнойИнформации.КонтактнТелефонКандидата)
|)
|");

ЭтоОрганизация = ТипЗнч(Источник.Ссылка) = Тип("СправочникСсылка.Организации");

Если ЭтоОрганизация И Источник.ЮрФизЛицо = Перечисления.ЮрФизЛицо.ФизЛицо Тогда
	Запрос.УстановитьПараметр("Контрагент", Источник.ИндивидуальныйПредприниматель);
Иначе
	Запрос.УстановитьПараметр("Контрагент", Источник.Ссылка);
КонецЕсли;

Выборка = Запрос.Выполнить().Выбрать();
Пока Выборка.Следующий() Цикл
	НоваяСтрока = КоллекцияОбъектов.Добавить();
	ЗаполнитьЗначенияСвойств(НоваяСтрока, Выборка);
	
	Если Выборка.Вид = Справочники.ВидыКонтактнойИнформации.ЮрАдресФизЛица Тогда
		НоваяСтрока.Вид = ?(ЭтоОрганизация, Справочники.ВидыКонтактнойИнформации.ЮрАдресОрганизации,
			Справочники.ВидыКонтактнойИнформации.ЮрАдресКонтрагента);
	ИначеЕсли Выборка.Вид = Справочники.ВидыКонтактнойИнформации.ФактАдресФизЛица Тогда
		НоваяСтрока.Вид = ?(ЭтоОрганизация, Справочники.ВидыКонтактнойИнформации.ФактАдресОрганизации,
			Справочники.ВидыКонтактнойИнформации.ФактАдресКонтрагента);
	КонецЕсли;
		
	Если Выборка.Тип = Перечисления.ТипыКонтактнойИнформации.Адрес Тогда
		
		Если ЗначениеЗаполнено(Выборка.ТипДома) Тогда
			ТипДома = НРег(Выборка.ТипДома.Метаданные().ЗначенияПеречисления[Перечисления.ТипыДомов.Индекс(Выборка.ТипДома)].Имя);
		Иначе
			ТипДома = Выборка.ТипДома;
		КонецЕсли;
		
		Если ЗначениеЗаполнено(Выборка.ТипКорпуса) Тогда
			ТипКорпуса = НРег(Выборка.ТипКорпуса.Метаданные().ЗначенияПеречисления[Перечисления.ТипыКорпусов.Индекс(Выборка.ТипКорпуса)].Имя);
		Иначе
			ТипКорпуса = Выборка.ТипКорпуса;
		КонецЕсли;
		
		Если ЗначениеЗаполнено(Выборка.ТипКвартиры) Тогда
			ТипКвартиры = ?(Выборка.ТипКвартиры = Перечисления.ТипыКвартир.Квартира,
				"кв.", НРег(Выборка.ТипКвартиры.Метаданные().ЗначенияПеречисления[Перечисления.ТипыКвартир.Индекс(Выборка.ТипКвартиры)].Имя));
		Иначе
			ТипКвартиры = Выборка.ТипКвартиры;
		КонецЕсли;				
		
		НоваяСтрока.ЗначенияПолей = ?(ЗначениеЗаполнено(Выборка.Поле1), "Индекс=" + Выборка.Поле1 + Символы.ПС, "")
		   + ?(ЗначениеЗаполнено(Выборка.Поле2), "Регион="			+ Выборка.Поле2 + Символы.ПС, "")
		   + ?(ЗначениеЗаполнено(Выборка.Поле3), "Район="			+ Выборка.Поле3 + Символы.ПС, "")
		   + ?(ЗначениеЗаполнено(Выборка.Поле4), "Город="			+ Выборка.Поле4 + Символы.ПС, "") 
		   + ?(ЗначениеЗаполнено(Выборка.Поле5), "НаселенныйПункт="	+ Выборка.Поле5 + Символы.ПС, "")
		   + ?(ЗначениеЗаполнено(Выборка.Поле6), "Улица="			+ Выборка.Поле6 + Символы.ПС, "")
		   + ?(ЗначениеЗаполнено(Выборка.Поле7), "Дом="				+ Выборка.Поле7 + Символы.ПС, "")
		   + ?(ЗначениеЗаполнено(Выборка.Поле8), "Корпус="			+ Выборка.Поле8 + Символы.ПС, "")
		   + ?(ЗначениеЗаполнено(Выборка.Поле9), "Квартира="		+ Выборка.Поле9 + Символы.ПС, "")
		   + ?(ЗначениеЗаполнено(ТипДома),		 "ТипДома="			+ ТипДома		+ Символы.ПС, "")
		   + ?(ЗначениеЗаполнено(ТипКорпуса),	 "ТипКорпуса="		+ ТипКорпуса	+ Символы.ПС, "")
		   + ?(ЗначениеЗаполнено(ТипКвартиры),	 "ТипКвартиры="		+ ТипКвартиры, "");
		   
	ИначеЕсли Выборка.Тип = Перечисления.ТипыКонтактнойИнформации.Телефон Тогда
		
		НоваяСтрока.ЗначенияПолей = ?(ЗначениеЗаполнено(Выборка.Поле1), "КодСтраны="     + Выборка.Поле1 + Символы.ПС, "")
		   + ?(ЗначениеЗаполнено(Выборка.Поле2), "КодГорода="     + Выборка.Поле2 + Символы.ПС, "")
		   + ?(ЗначениеЗаполнено(Выборка.Поле3), "НомерТелефона=" + Выборка.Поле3 + Символы.ПС, "")
		   + ?(ЗначениеЗаполнено(Выборка.Поле4), "Добавочный="    + Выборка.Поле4, "");

		НоваяСтрока.НомерТелефонаБезКодов = Выборка.Поле3;
		НоваяСтрока.НомерТелефона         = Выборка.Поле1 + Выборка.Поле2 + Выборка.Поле3;
		
	ИначеЕсли Выборка.Тип = Перечисления.ТипыКонтактнойИнформации.АдресЭлектроннойПочты Тогда
		НоваяСтрока.АдресЭП = Выборка.Представление;
	КонецЕсли;
	
КонецЦикла;</Текст>
			<Параметры>КоллекцияОбъектов, Источник,ВходящиеДанные</Параметры>
		</Алгоритм>
		<Алгоритм Имя="ПроверитьИзменениеКлючевыхРеквизитовДокумента" ИспользуетсяПриЗагрузке="true">
			<Текст>Если Объект.ЭтоНовый() Тогда
	Объект.ДополнительныеСвойства.Вставить("ИзменилисьКлючевыеРеквизиты", Истина);
ИначеЕсли ЭлектронноеВзаимодействиеКЭДО.ИзмененыКлючевыеРеквизитыОбъекта(Объект) Тогда
	Объект.ДополнительныеСвойства.Вставить("ИзменилисьКлючевыеРеквизиты", Истина);
КонецЕсли;</Текст>
			<Параметры>Объект</Параметры>
		</Алгоритм>
		<Алгоритм Имя="УстановитьРежимЗаписиДокумента" ИспользуетсяПриЗагрузке="true">
			<Текст>ПровестиДокумент = Ложь;
Если ПараметрыОбъекта &lt;&gt; Неопределено Тогда
	ПровестиДокумент = ПараметрыОбъекта.Получить("Проведен") = Истина;
КонецЕсли;

Если ПровестиДокумент Тогда
	РежимЗаписи = "Проведение";
	РежимПроведения = "Неоперативный";
Иначе
	РежимЗаписи = "ОтменаПроведения";
КонецЕсли;</Текст>
			<Параметры>ПараметрыОбъекта, РежимЗаписи, РежимПроведения</Параметры>
		</Алгоритм>
	</Алгоритмы>
	<Запросы/>
</ПравилаОбмена>